(function(){"use strict";var e={4288:function(e,t,o){var a=o(3751),n=o(641);function l(e,t,o,a,l,r){const i=(0,n.g2)("NavBar"),s=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)(n.FK,null,["/codraw"!==e.$route.path.substring(0,7)&&"/board"!==e.$route.path.substring(0,6)?((0,n.uX)(),(0,n.Wv)(i,{key:0})):(0,n.Q3)("",!0),(0,n.bF)(s)],64)}var r=o(953),i=o.p+"img/logo.10045025.webp";const s={class:"navbar navbar-expand-lg navbar-dark hero-background shadow p-3",style:{"background-color":"black !important"}},c={class:"offcanvas offcanvas-end mx-2",style:{"background-color":"black"},tabindex:"-1",id:"offcanvas","aria-labelledby":"offcanvasLabel"},d={class:"offcanvas-body"},u=["src"],f={class:"navbar-nav ms-auto mb-2 mb-lg-0 d-flex flex-row align-items-center"},A={class:"nav-item mx-2"},p={class:"nav-item mx-2"},g={name:"NavBar",props:{msg:String}};var v=Object.assign(g,{setup(e){return(e,t)=>{const o=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)("nav",s,[t[3]||(t[3]=(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvas","aria-controls":"offcanvas","aria-label":"Toggle navigation"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,n.Lk)("div",c,[(0,n.Lk)("div",d,[(0,n.bF)(o,{class:"navbar-brand d-flex align-items-center",to:"/"},{default:(0,n.k6)(()=>[(0,n.Lk)("img",{src:(0,r.R1)(i),alt:"logo",loading:"lazy",decoding:"async",height:"90",class:"me-3"},null,8,u),t[0]||(t[0]=(0,n.Lk)("span",null,"CoDraw",-1))]),_:1}),(0,n.Lk)("ul",f,[(0,n.Lk)("li",A,[(0,n.bF)(o,{class:"btn me-2",to:"/signup",id:"sign",style:{"border-color":"yellow",color:"yellow"}},{default:(0,n.k6)(()=>[...t[1]||(t[1]=[(0,n.eW)("Sign up",-1)])]),_:1})]),(0,n.Lk)("li",p,[(0,n.bF)(o,{class:"btn btn-outline-light",id:"sing",to:"/signin"},{default:(0,n.k6)(()=>[...t[2]||(t[2]=[(0,n.eW)("Sign in",-1)])]),_:1})])])])])])}}}),h=o(6262);const m=(0,h.A)(v,[["__scopeId","data-v-55e2d4bc"]]);var w=m,b={name:"App",components:{NavBar:w}};const k=(0,h.A)(b,[["render",l]]);var y=k,x=o(5916),L=o(5220),C=o(33);const E="http://localhost:8000",R="ws://localhost:8000/ws/socket";function B(e){let t=null;if(document.cookie&&""!==document.cookie){const o=document.cookie.split(";");for(let a=0;a<o.length;a++){const n=o[a].trim();if(n.substring(0,e.length+1)===e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}}return t}const D={key:0,class:"alert alert-danger text-center custom-alert p-2",role:"alert",style:{"max-width":"70vw",width:"440px",position:"fixed",top:"4rem",left:"50%",transform:"translateX(-50%)","z-index":"10000","font-size":"0.95rem","border-radius":"0.7rem","box-shadow":"0 2px 8px rgba(220,53,69,0.10)",background:"#222",border:"1.5px solid #dc3545"}},j={class:"alert-content",style:{"padding-top":"0.2rem"}},I={style:{color:"#ffc107","font-size":"1rem"}},P={class:"d-flex justify-content-center pt-5",style:{"background-color":"black","min-height":"40vh"}},T={class:"card p-3 shadow-lg",style:{"max-width":"400px",width:"100%",background:"white",border:"none","min-height":"unset"}},K={class:"mb-2"},Q={class:"mb-2"},S={class:"form-check d-flex align-items-center mb-3 w-100 flex-wrap",style:{padding:"0 !important",gap:"2rem"}},z={class:"text-center mt-2"},J={class:"text-center mt-2"},M={key:0};var F={__name:"SignIn",setup(e){let t=(0,r.KR)(""),o=(0,r.KR)(!1),l=(0,r.KR)(!1);const i=(0,r.KR)(""),s=(0,r.KR)(""),c=(0,r.KR)(null);async function d(e){e.preventDefault();const a=c.value;if(a.classList.add("was-validated"),a.checkValidity())try{const e=B("csrftoken"),a=await fetch(`${E}/signin`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},credentials:"include",body:JSON.stringify({mail:i.value,password:s.value,remember:l.value})}),n=await a.json();200===n.status?window.location.href="/codraw":(o.value=!0,t.value="Invalid credentials. Please try again.")}catch(e){console.error(e),o.value=!0,t.value="An error occurred while signing in."}else e.stopPropagation()}async function u(){try{const e=B("csrftoken"),t=await fetch(`${E}/signin`,{method:"GET",headers:{"X-CSRFToken":e},credentials:"include"}),o=await t.json();300===o.status&&(window.location.href="/codraw")}catch(e){console.error(e)}}return u(),(e,u)=>{const f=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(a.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[(0,r.R1)(o)?((0,n.uX)(),(0,n.CE)("div",D,[(0,n.Lk)("button",{onClick:u[0]||(u[0]=e=>(0,r.i9)(o)?o.value=!1:o=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"#dc3545",color:"#fff",border:"none",width:"1.5rem",height:"1.5rem","font-size":"1.1rem","margin-top":"-0.3rem","margin-right":"-0.3rem","line-height":"1.1rem"}},"×"),(0,n.Lk)("div",j,[(0,n.Lk)("strong",I,(0,C.v_)((0,r.R1)(t)),1),u[4]||(u[4]=(0,n.Lk)("div",{style:{color:"#fff","margin-top":"0.2rem","font-size":"0.92rem"}},"Please try again.",-1))])])):(0,n.Q3)("",!0)]),_:1}),(0,n.Lk)("div",P,[(0,n.Lk)("div",T,[u[14]||(u[14]=(0,n.Lk)("h2",{class:"text-center mb-3 text-black"},"Sign In",-1)),(0,n.Lk)("form",{ref_key:"formRef",ref:c,onSubmit:d,class:"needs-validation",novalidate:""},[(0,n.Lk)("div",K,[u[5]||(u[5]=(0,n.Lk)("label",{for:"email",class:"form-label text-black text-start w-100"},"Email address",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email","onUpdate:modelValue":u[1]||(u[1]=e=>i.value=e),class:"form-control bg-dark text-white border-secondary",id:"email",placeholder:"Enter email",required:""},null,512),[[a.Jo,i.value]]),u[6]||(u[6]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify email. ",-1))]),(0,n.Lk)("div",Q,[u[7]||(u[7]=(0,n.Lk)("label",{for:"password",class:"form-label text-black text-start w-100"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":u[2]||(u[2]=e=>s.value=e),class:"form-control bg-dark text-white border-secondary",id:"password",placeholder:"Enter password",required:""},null,512),[[a.Jo,s.value]]),u[8]||(u[8]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify password. ",-1))]),(0,n.Lk)("div",S,[u[9]||(u[9]=(0,n.Lk)("label",{class:"form-check-label text-black fw-medium mb-0",for:"rememberMe"}," Remember me ",-1)),(0,n.Lk)("input",{type:"checkbox",ref_key:"ticked",ref:l,onClick:u[3]||(u[3]=e=>(0,r.i9)(l)?l.value=!(0,r.R1)(l):l=!(0,r.R1)(l)),id:"rememberMe",style:{"accent-color":"#ffc107",margin:"0 !important",width:"1.25rem",height:"1.25rem"}},null,512)]),u[10]||(u[10]=(0,n.Lk)("button",{id:"sign",type:"submit",class:"btn btn-success w-100 mt-2",style:{"background-color":"yellow",color:"black"}},"Sign In",-1))],544),(0,n.Lk)("div",z,[u[12]||(u[12]=(0,n.Lk)("span",{class:"text-secondary"},"Do not have an account?",-1)),(0,n.bF)(f,{to:"/signup",class:"ms-2 text-info"},{default:(0,n.k6)(()=>[...u[11]||(u[11]=[(0,n.eW)("Sign up",-1)])]),_:1})]),(0,n.Lk)("div",J,[i.value?((0,n.uX)(),(0,n.CE)("div",M,[(0,n.bF)(f,{to:`/restore/${i.value}`,class:"ms-2 text-info"},{default:(0,n.k6)(()=>[...u[13]||(u[13]=[(0,n.eW)("Forgot your password?",-1)])]),_:1},8,["to"])])):(0,n.Q3)("",!0)])])])],64)}}};const O=(0,h.A)(F,[["__scopeId","data-v-3d7179cc"]]);var N=O;const X={key:0,class:"alert alert-danger text-center custom-alert p-2",role:"alert",style:{"max-width":"70vw",width:"440px",position:"fixed",top:"4rem",left:"50%",transform:"translateX(-50%)","z-index":"10000","font-size":"0.95rem","border-radius":"0.7rem","box-shadow":"0 2px 8px rgba(220,53,69,0.10)",background:"#222",border:"1.5px solid #dc3545"}},H={class:"alert-content",style:{"padding-top":"0.2rem"}},U={style:{color:"#ffc107","font-size":"1rem"}},G={key:0,class:"overlay"},Y={class:"popup-card"},_={class:"d-flex justify-content-center mb-3"},W={class:"d-flex justify-content-center pt-5",style:{"background-color":"black","min-height":"40vh"}},V={class:"card p-3 shadow-lg",style:{"max-width":"400px",width:"100%",background:"white",border:"none","min-height":"unset"}},Z={class:"mb-2"},$={class:"mb-2"},q={class:"mb-2"},ee={class:"text-center mt-2"};var te={__name:"SignUp",setup(e){let t=(0,r.KR)(!1),o=(0,r.KR)(null),l=(0,r.KR)(!1),i=(0,r.KR)("");const s=(0,r.KR)(""),c=(0,r.KR)(""),d=(0,r.KR)(""),u=(0,r.KR)(null),f=(0,r.KR)(null),A=(0,r.KR)(null),p=(0,r.KR)(null),g=(0,r.KR)(null);async function v(){try{const e=B("csrftoken"),t=await fetch(`${E}/signup`,{method:"GET",headers:{"X-CSRFToken":e},credentials:"include"}),o=await t.json();300===o.status&&"/codraw"!==window.location.pathname&&(window.location.href="/codraw")}catch(e){console.error(e)}}async function h(e){e.preventDefault();const a=o.value;if(a.classList.add("was-validated"),!a.checkValidity())return void e.stopPropagation();const n=B("csrftoken"),r=s.value,f=c.value,A=d.value;try{const e=await fetch(`${E}/signup`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":n},body:JSON.stringify({username:r,mail:A,password:f}),credentials:"include"}),o=await e.json();200===o.status?(t.value=!0,u.value.focus()):(l.value=!0,i.value="Account already registered under this email. Did you forget your password?")}catch(e){console.error(e)}}function m(e){2===e&&f.value&&f.value.focus(),3===e&&A.value&&A.value.focus(),4===e&&p.value&&p.value.focus(),5===e&&g.value&&g.value.focus()}v();const w=(0,r.KR)(""),b=(0,r.KR)(""),k=(0,r.KR)(""),y=(0,r.KR)(""),x=(0,r.KR)("");function L(){return`${w.value}${b.value}${k.value}${y.value}${x.value}`}async function R(){const e=B("csrftoken"),o=s.value,a=d.value,n=await fetch(`${E}/verify`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},body:JSON.stringify({username:o,mail:a,code:L()})}),r=await n.json();200===r.status?window.location.href="/codraw":(t.value=!1,l.value=!0,w.value="",b.value="",k.value="",y.value="",x.value="",i.value="Invalid verification code. Please try again- new verification code has been sent.")}return(e,v)=>{const L=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(a.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[(0,r.R1)(l)?((0,n.uX)(),(0,n.CE)("div",X,[(0,n.Lk)("button",{onClick:v[0]||(v[0]=e=>(0,r.i9)(l)?l.value=!1:l=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"#dc3545",color:"#fff",border:"none",width:"1.5rem",height:"1.5rem","font-size":"1.1rem","margin-top":"-0.3rem","margin-right":"-0.3rem","line-height":"1.1rem"}},"×"),(0,n.Lk)("div",H,[(0,n.Lk)("strong",U,(0,C.v_)((0,r.R1)(i)),1),v[14]||(v[14]=(0,n.Lk)("div",{style:{color:"#fff","margin-top":"0.2rem","font-size":"0.92rem"}},"Please try again.",-1))])])):(0,n.Q3)("",!0)]),_:1}),(0,r.R1)(t)?((0,n.uX)(),(0,n.CE)("div",G,[(0,n.Lk)("div",Y,[(0,n.Lk)("button",{onClick:v[1]||(v[1]=e=>(0,r.i9)(t)?t.value=!1:t=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"red",color:"white"}},"×"),v[15]||(v[15]=(0,n.Lk)("br",null,null,-1)),v[16]||(v[16]=(0,n.Lk)("br",null,null,-1)),v[17]||(v[17]=(0,n.Lk)("h4",{class:"mb-3"},"Enter Verification Code",-1)),(0,n.Lk)("div",_,[(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"1",onInput:v[2]||(v[2]=e=>m(2)),ref_key:"ZeroInput",ref:u,"onUpdate:modelValue":v[3]||(v[3]=e=>w.value=e),class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,544),[[a.Jo,w.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"2",onInput:v[4]||(v[4]=e=>m(3)),"onUpdate:modelValue":v[5]||(v[5]=e=>b.value=e),class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric",ref_key:"OneInput",ref:f},null,544),[[a.Jo,b.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"3",onInput:v[6]||(v[6]=e=>m(4)),"onUpdate:modelValue":v[7]||(v[7]=e=>k.value=e),ref_key:"TwoInput",ref:A,class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,544),[[a.Jo,k.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"4",onInput:v[8]||(v[8]=e=>m(5)),"onUpdate:modelValue":v[9]||(v[9]=e=>y.value=e),ref_key:"ThreeInput",ref:p,class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,544),[[a.Jo,y.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"5",class:"code-input","onUpdate:modelValue":v[10]||(v[10]=e=>x.value=e),ref_key:"FourInput",ref:g,type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,512),[[a.Jo,x.value]])]),(0,n.Lk)("button",{class:"btn btn-primary w-100",onClick:R},"Verify")])])):(0,n.Q3)("",!0),(0,n.Lk)("div",W,[(0,n.Lk)("div",V,[v[27]||(v[27]=(0,n.Lk)("h2",{class:"text-center mb-3 text-black"},"Sign Up",-1)),(0,n.Lk)("form",{ref_key:"formRef",ref:o,onSubmit:h,class:"needs-validation",novalidate:""},[(0,n.Lk)("div",Z,[v[18]||(v[18]=(0,n.Lk)("label",{for:"username",class:"form-label text-black text-start w-100"},"Username",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":v[11]||(v[11]=e=>s.value=e),type:"text",class:"form-control bg-dark text-white border-secondary",id:"username",placeholder:"Enter username",style:{color:"white"},required:""},null,512),[[a.Jo,s.value]]),v[19]||(v[19]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify username. ",-1))]),(0,n.Lk)("div",$,[v[20]||(v[20]=(0,n.Lk)("label",{for:"email",class:"form-label text-black text-start w-100"},"Email address",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":v[12]||(v[12]=e=>d.value=e),type:"email",class:"form-control bg-dark text-white border-secondary",id:"email",placeholder:"Enter email",required:""},null,512),[[a.Jo,d.value]]),v[21]||(v[21]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify email. ",-1))]),(0,n.Lk)("div",q,[v[22]||(v[22]=(0,n.Lk)("label",{for:"password",class:"form-label text-black text-start w-100"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":v[13]||(v[13]=e=>c.value=e),type:"password",class:"form-control bg-dark text-white border-secondary",id:"password",placeholder:"Enter password",required:""},null,512),[[a.Jo,c.value]]),v[23]||(v[23]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify password. ",-1))]),v[24]||(v[24]=(0,n.Lk)("button",{id:"sign",class:"btn btn-success w-100 mt-2",type:"submit",style:{"background-color":"yellow",color:"black"}},"Sign Up",-1))],544),(0,n.Lk)("div",ee,[v[26]||(v[26]=(0,n.Lk)("span",{class:"text-secondary"},"Already have an account?",-1)),(0,n.bF)(L,{to:"/signin",class:"ms-2 text-info"},{default:(0,n.k6)(()=>[...v[25]||(v[25]=[(0,n.eW)("Sign In",-1)])]),_:1})])])])],64)}}};const oe=(0,h.A)(te,[["__scopeId","data-v-547d26dc"]]);var ae=oe;const ne={class:"hero-background"},le={class:"features-section"},re={class:"container"},ie={class:"row justify-content-center"},se={class:"card feature-card h-100 bg-dark text-white shadow-lg"},ce={class:"card-body text-center"},de={class:"card-title mt-3"},ue={class:"card-text"},fe={id:"about",href:"#about",class:"about-sec"},Ae={class:"container"},pe={class:"row align-items-center"},ge={class:"col-md-6 about-text"},ve={class:"col-md-6 text-center about-visual"},he=["src"],me={class:"my-5 d-flex flex-column justify-content-center text-center align-items-center",style:{color:"yellow","font-size":"1.5rem","font-weight":"700",height:"90vh",width:"100%",overflow:"hidden"}},we={class:"my-5 mx-auto rounded border border-warning",style:{"background-color":"black",overflow:"hidden"}},be={class:"footer-section"},ke={class:"container text-center"},ye={class:"row justify-content-center"},xe={class:"col-md-2 mb-3 footer-links"},Le={class:"col-md-3 mb-3 footer-social"},Ce={class:"social-icons"},Ee={href:"https://github.com/Damian0563/CoDraw"},Re={class:"footer-copy"};function Be(e,t,o,a,l,r){const i=(0,n.g2)("router-link"),s=(0,n.g2)("font-awesome-icon"),c=(0,n.g2)("DemoBoard");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",ne,[t[1]||(t[1]=(0,n.Lk)("h1",{class:"hero-title"},"CoDraw",-1)),t[2]||(t[2]=(0,n.Lk)("p",{class:"hero-subtitle"}," CoDraw is a real-time collaborative drawing platform that lets you and your friends create, share, and edit artwork together from anywhere. Experience seamless teamwork, intuitive tools, and instant updates as you bring your creative ideas to life! ",-1)),(0,n.bF)(i,{to:"/signup"},{default:(0,n.k6)(()=>[...t[0]||(t[0]=[(0,n.Lk)("button",{class:"cta-btn mt-4"},"Start Drawing Now",-1)])]),_:1})]),(0,n.Lk)("div",le,[(0,n.Lk)("div",re,[(0,n.Lk)("div",ie,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.features,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"col-md-3 mb-3",key:t},[(0,n.Lk)("div",se,[(0,n.Lk)("div",ce,[(0,n.bF)(s,{icon:e.icon,class:"feature-icon"},null,8,["icon"]),(0,n.Lk)("h5",de,(0,C.v_)(e.title),1),(0,n.Lk)("p",ue,(0,C.v_)(e.text),1)])])]))),128))])])]),t[13]||(t[13]=(0,n.Lk)("section",{class:"about-sec container text-center my-5"},[(0,n.Lk)("text",{class:"about-title"},"No subscriptions, no hidden fees"),(0,n.Lk)("text",{class:"about-text",style:{"font-size":"2.5rem"}},"- just free for everyone, forever with at most respect to privacy.")],-1)),(0,n.Lk)("section",fe,[(0,n.Lk)("div",Ae,[(0,n.Lk)("div",pe,[(0,n.Lk)("div",ge,[t[4]||(t[4]=(0,n.Lk)("h2",{class:"about-title"},"About CoDraw",-1)),t[5]||(t[5]=(0,n.Lk)("p",null,[(0,n.eW)(" CoDraw was built for creators who believe in collaboration. Whether you're sketching concepts, storyboarding, or designing together, CoDraw makes teamwork feel effortless and fun. "),(0,n.Lk)("br"),(0,n.Lk)("br"),(0,n.eW)(" With our real-time synchronization engine and a beautifully minimal interface, you can see every brushstroke from your teammates the moment it happens — no refreshes, no lag, just instant creativity. "),(0,n.Lk)("br"),(0,n.Lk)("br"),(0,n.eW)(" Our mission is simple: empower creativity by connecting people through shared imagination. ")],-1)),(0,n.bF)(i,{to:"/learn-more"},{default:(0,n.k6)(()=>[...t[3]||(t[3]=[(0,n.Lk)("button",{class:"about-btn mt-3"},"Learn More",-1)])]),_:1})]),(0,n.Lk)("div",ve,[(0,n.Lk)("img",{src:l.logo,alt:"Collaborative Drawing",class:"about-image"},null,8,he)])])])]),(0,n.Lk)("section",me,[t[6]||(t[6]=(0,n.eW)(" Take a look at our minimalistic demo to experience CoDraw and its awesome capabilities in action! ",-1)),(0,n.Lk)("div",we,[(0,n.bF)(c)])]),(0,n.Lk)("footer",be,[(0,n.Lk)("div",ke,[(0,n.Lk)("div",ye,[t[11]||(t[11]=(0,n.Lk)("div",{class:"col-md-4 mb-3 footer-brand"},[(0,n.Lk)("h3",{class:"footer-title"},"CoDraw"),(0,n.Lk)("p",{class:"footer-desc"}," Collaborative drawing made simple, fast, and fun. Create together from anywhere. ")],-1)),(0,n.Lk)("div",xe,[t[9]||(t[9]=(0,n.Lk)("h5",null,"Explore",-1)),(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[(0,n.bF)(i,{to:"/"},{default:(0,n.k6)(()=>[...t[7]||(t[7]=[(0,n.eW)("Home",-1)])]),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(i,{to:"/signup"},{default:(0,n.k6)(()=>[...t[8]||(t[8]=[(0,n.eW)("Get Started",-1)])]),_:1})])])]),(0,n.Lk)("div",Le,[t[10]||(t[10]=(0,n.Lk)("h5",null,"Follow Us",-1)),(0,n.Lk)("div",Ce,[(0,n.Lk)("a",Ee,[(0,n.bF)(s,{icon:["fab","github"]})])])])]),t[12]||(t[12]=(0,n.Lk)("hr",{class:"footer-divider"},null,-1)),(0,n.Lk)("p",Re," © "+(0,C.v_)((new Date).getFullYear())+" CoDraw. All rights reserved. ",1)])])],64)}o(4114);var De=o(2611),je=o(9876),Ie=o(5778),Pe=o.n(Ie);const Te={style:{position:"relative",width:"80vw",height:"80vh",overflow:"hidden"}},Ke={key:0,class:"spinner-overlay"},Qe={key:0,style:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)","z-index":"100",display:"flex","align-items":"center","justify-content":"center"}},Se={style:{background:"#23272f",color:"#fff",padding:"32px 40px","border-radius":"16px","min-width":"320px","box-shadow":"0 8px 32px rgba(0,0,0,0.25)",position:"relative"}},ze={id:"toolbar",style:{position:"absolute",top:"32px",left:"5%",background:"rgba(30, 30, 30, 0.85)","border-radius":"16px","box-shadow":"0 4px 24px rgba(0,0,0,0.18)",padding:"20px 32px",display:"flex","align-items":"center",gap:"20px","z-index":"10"}},Je={style:{color:"#fff","min-width":"32px","text-align":"center"}},Me=10;var Fe={__name:"DemoBoard",setup(e){const t=(0,r.KR)(!1),o=(0,r.KR)(null),l=(0,r.KR)(null),i=(0,r.KR)(window.innerWidth),s=(0,r.KR)(!1),c=(0,r.KR)(!1),d=(0,r.KR)("#ffffff"),u=(0,r.KR)("#000000"),f=(0,r.KR)(null),A=(0,r.KR)("brush"),p=(0,r.KR)(!1),g=(0,r.KR)(5),v=(0,r.KR)([]),h=(0,r.KR)(null),m=(0,r.KR)(null),w=(0,r.KR)(null),b=(0,r.KR)(!1),k=(0,r.KR)(!1),y=(0,r.KR)(!0),x=(0,r.KR)([]),L=(0,r.KR)(0),E={width:4*document.documentElement.clientWidth,height:4*document.documentElement.clientHeight,draggable:!1},R=e=>{e.evt.preventDefault()},B=document.createElement("canvas");B.width=E.width,B.height=E.height;const D=B.getContext("2d");function j(e,t){const o=t.width,a=t.height,n=o/a;let l,r;const i=e.width/e.height;n>=i?(l=e.width,r=e.width/n):(l=e.height*n,r=e.height);let s=0,c=0;return s=(e.width-l)/2,c=(e.height-r)/2,{cropX:s,cropY:c,cropWidth:l,cropHeight:r}}function I(e){const t=e.image();if(!t)return;const o=j(t,{width:e.width(),height:e.height()});e.setAttrs(o)}function P(){const e=w.value.getNode();if(!e)return;const t=e.children||[],o=t[t.length-1];if(!o)return;const a=o.toJSON();L.value<x.value.length-1&&(x.value=x.value.slice(0,L.value+1)),x.value.push(a),L.value=x.value.length-1,x.value.length>Me&&(x.value.shift(),L.value=Math.max(0,L.value-1))}D.strokeStyle=d.value,D.fillStyle=u.value,D.lineJoin="round",D.lineWidth=g.value,D.lineCap="round",D.lineJoin="round",(0,n.wB)(d,e=>{D.strokeStyle=e});const T=async()=>{if(L.value<0)return;const e=w.value.getNode(),t=e.children||[],o=t[t.length-1];o&&o.destroy(),L.value--,e.batchDraw()},K=()=>{if(L.value!=Me-1){L.value++;const e=w.value.getNode();if(!x.value[L.value])return;const t=JSON.parse(x.value[L.value]);if(t)if("Image"===t.className){const o=new window.Image;o.src=t.attrs.src,o.onload=()=>{const a=new(Pe().Image)({id:(0,De.A)(),image:o,x:t.attrs.x,y:t.attrs.y,width:o.width,height:o.height,draggable:!1,src:t.attrs.src});I(a),a.setAttr("src",t.attrs.src),e.add(a),e.draw()}}else{const o=Pe().Node.create(t);e.add(o),e.draw()}}},Q=e=>{e.preventDefault();const t=l.value?.getNode?.();if(!t)return;const o=t.getPointerPosition()||{x:t.width()/2,y:t.height()/2},a=J(t,o),n=e.clipboardData;if(!n||0===n.files.length)return;const r=n.files[0];if(!r.type.startsWith("image/"))return;const i=new FileReader;i.onload=e=>{const t=new window.Image;t.src=e.target.result,t.onload=()=>{const o=new(Pe().Image)({id:(0,De.A)(),image:t,x:a.x,y:a.y,width:t.width,height:t.height,draggable:!1,src:e.target.result});I(o);const n=w.value.getNode();o.setAttr("src",e.target.result),n.add(o),n.draw(),P()},i.onloadstart=function(){console.error("Starting")},i.onerror=function(e){console.error("FileReader error:",e.target.error)}},i.readAsDataURL(r)},S=()=>{c.value=!0,f.value="Board was successfully quick saved."};function z(){c.value=!1,f.value="",t.value=!0,console.log("Clearing the board"),localStorage.removeItem("storage");const e=w.value.getNode();e.destroyChildren(),e.batchDraw(),t.value=!1}const J=e=>{const t=e.getAbsoluteTransform().copy();t.invert();const o=e.getPointerPosition();return t.point(o)},M=()=>{const e=l.value?.getNode?.();if(!e)return;const t=e.toDataURL();v.value=[{id:Date.now(),image:t}],localStorage.setItem("storage",JSON.stringify(v.value))},F={image:B,x:0,y:0,width:B.width,height:B.height},O=e=>{const t=e.target.getStage();if(2===e.evt.button)return b.value=!0,t.draggable(!0),t.startDrag(),void(h.value=t.getPointerPosition());p.value=!0;const a=J(t),n=new(Pe().Line)({stroke:d.value,strokeWidth:g.value,globalCompositeOperation:"eraser"===A.value?"destination-out":"source-over",points:[a.x,a.y],lineCap:"round",lineJoin:"round"});w.value.getNode().add(n),o.value=n},N=e=>{if(p.value=!1,o.value=null,P(),b.value){const t=e.target.getStage();t.draggable(!1),b.value=!1}},X=e=>{if(!p.value||!o.value)return;const t=e.target.getStage(),a=J(t),n=o.value.points().concat([a.x,a.y]);o.value.points(n),w.value.getNode().batchDraw()},H=e=>{e.ctrlKey&&"z"===e.key?T():e.ctrlKey&&"y"===e.key&&K()},U=()=>{i.value=window.innerWidth};return(0,n.sV)(async()=>{t.value=!0,window.addEventListener("keyup",H);let e=null;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{const e=l.value?.getNode(),t=m.value?.getNode();if(!e||!t)return;const o=window.innerWidth,a=window.innerHeight;B.width=4*o,B.height=4*a,e.width(B.width),e.height(B.height),t.width(B.width),t.height(B.height);const n=t.getLayer();n&&n.batchDraw()},100)}),window.addEventListener("resize",U),window.addEventListener("paste",Q),(0,n.wB)(k,()=>{u.value=k.value?"#ffffff":"#000000",d.value=k.value?"#000000":"#ffffff"},{immediate:!0}),t.value=!1}),setInterval(()=>M(),6e4),(0,n.xo)(()=>{t.value=!0}),(0,n.hi)(()=>{window.removeEventListener("paste",Q),window.removeEventListener("keyup",H),window.removeEventListener("resize",U)}),(e,o)=>{const i=(0,n.g2)("font-awesome-icon"),u=(0,n.g2)("v-image"),p=(0,n.g2)("v-layer"),v=(0,n.g2)("v-stage");return(0,n.uX)(),(0,n.CE)("div",Te,[t.value?((0,n.uX)(),(0,n.CE)("div",Ke,[(0,n.bF)((0,r.R1)(je.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.bF)(a.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[c.value?((0,n.uX)(),(0,n.CE)("div",Qe,[(0,n.Lk)("div",Se,[(0,n.Lk)("button",{onClick:o[0]||(o[0]=e=>c.value=!1),style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer"}}," ✕ "),(0,n.Lk)("p",null,(0,C.v_)(f.value),1),"Are you sure you would like to clear the board? This action is irreversible."!==f.value?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:o[1]||(o[1]=e=>c.value=!1),id:"close_form",style:{"margin-top":"20px",background:"#4f8cff",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer"}}," Close ")):(0,n.Q3)("",!0),"Are you sure you would like to clear the board? This action is irreversible."===f.value?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:o[2]||(o[2]=e=>z()),id:"confirm_clear",style:{"margin-top":"20px",background:"green",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer"}}," Confirm ")):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)]),_:1}),(0,n.Lk)("div",ze,[(0,n.bF)(i,{icon:["fas","undo"],class:"feature-icon",onClick:o[3]||(o[3]=e=>T())}),(0,n.bF)(i,{icon:["fas","redo"],class:"feature-icon",onClick:o[4]||(o[4]=e=>K())}),(0,n.Lk)("button",{onClick:o[5]||(o[5]=e=>k.value=!k.value),style:(0,C.Tr)([{"border-radius":"50%",padding:"1rem","border-color":"#f68608","border-width":"5px"},{backgroundColor:k.value?"#ffffff":"#000000"}])},null,4),o[11]||(o[11]=(0,n.Lk)("text",{style:{color:"white"}},"Brush Color",-1)),(0,n.bo)((0,n.Lk)("input",{type:"color","onUpdate:modelValue":o[6]||(o[6]=e=>d.value=e)},null,512),[[a.Jo,d.value]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[7]||(o[7]=e=>A.value=e),style:{background:"#23272f",color:"#fff",border:"none","border-radius":"8px",padding:"8px 16px","font-size":"1rem",outline:"none",cursor:"pointer"}},[...o[10]||(o[10]=[(0,n.Lk)("option",{value:"brush"},"Brush",-1),(0,n.Lk)("option",{value:"eraser"},"Eraser",-1)])],512),[[a.u1,A.value]]),o[12]||(o[12]=(0,n.Lk)("label",{style:{color:"#fff","font-size":"1rem","margin-right":"8px"}}," Line Width ",-1)),(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":o[8]||(o[8]=e=>g.value=e),min:"1",max:"20",style:{"accent-color":"#4f8cff",width:"60px","margin-right":"8px"}},null,512),[[a.Jo,g.value]]),(0,n.Lk)("span",Je,(0,C.v_)(g.value),1),s.value||y.value?((0,n.uX)(),(0,n.CE)("button",{key:0,id:"save_btn",onClick:o[9]||(o[9]=e=>S("save")),style:{background:"#4f8cff",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer",transition:"ease-in-out 0.6s"}},"Save")):(0,n.Q3)("",!0)]),(0,n.Lk)("div",{class:"board-wrapper",style:(0,C.Tr)({backgroundColor:k.value?"#ffffff":"#000000"})},[(0,n.bF)(v,{ref_key:"stageRef",ref:l,config:E,onMousedown:O,onMousemove:X,onMouseup:N,onTouchstart:O,onTouchmove:X,onTouchend:N,onContextmenu:R,style:{"overflow-x":"hidden","overflow-y":"hidden",border:"none !important"}},{default:(0,n.k6)(()=>[(0,n.bF)(p,{ref_key:"layerRef",ref:w},{default:(0,n.k6)(()=>[(0,n.bF)(u,{ref_key:"imageRef",ref:m,config:F},null,512)]),_:1},512)]),_:1},512)],4)])}}};const Oe=(0,h.A)(Fe,[["__scopeId","data-v-150db4e1"]]);var Ne=Oe,Xe={name:"HeRo",components:{DemoBoard:Ne},data(){return{logo:i,features:[{title:"Modern and Slick",text:"A visually appealing interface designed for a seamless and enjoyable drawing experience.",icon:["fas","palette"]},{title:"Performance Oriented",text:"Optimized for speed and responsiveness, ensuring smooth collaboration in real time.",icon:["fas","bolt"]},{title:"Intuitive Design",text:"Easy-to-use tools and layout, making creativity accessible for everyone.",icon:["fas","lightbulb"]}]}},mounted(){this.check()},methods:{async check(){try{const e=B("csrftoken"),t=await fetch(`${E}/home`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":e},credentials:"include"}),o=await t.json();300===o.status&&"/codraw"!==window.location.pathname&&(window.location.href="/codraw")}catch(e){console.error(e)}}}};const He=(0,h.A)(Xe,[["render",Be],["__scopeId","data-v-65889ad6"]]);var Ue=He,Ge=(o(8111),o(1701),o(4641)),Ye=o.p+"img/sidebar.9317e3f0.webp",_e=o(1273);const We={class:"main-layout"},Ve={class:"sidebar-header d-flex flex-column align-items-center mb-4"},Ze=["src"],$e=["src"],qe={class:"main-content flex-grow-1"},et={class:"mb-4"},tt={id:"projects",class:"container"},ot=["onClick"],at={class:"card-body d-flex flex-column text-white",style:{height:"100%"}},nt={class:"card-title fw-bold txtcard mb-2"},lt={class:"card-text txtcard small"},rt={class:"mt-auto py-2 px-2",style:{position:"absolute",bottom:"0",left:"0",right:"0",background:"rgba(0,0,0,0.05)","border-top":"1px solid #ffc107"}},it={class:"d-flex justify-content-between small"},st={class:"txtcard"},ct={class:"txtcard"},dt={class:"txtcard"},ut={class:"text-start small txtcard"},ft={class:"txtcard"},At={key:0,class:"spinner-overlay"},pt={class:"my-5 border rounded justify-content-center",style:{"background-color":"#ffc107",width:"100%",height:"auto"}},gt={class:"row justify-content-center"},vt={class:"col-md-6 col-sm-8 col-7"},ht={class:"input-group shadow-sm rounded mx-2"},mt={id:"results",class:"my-4 mx-3"},wt={class:"container"},bt={class:"row g-1 justify-content-start gap-2"},kt=["onClick"],yt={class:"card-body d-flex flex-column txtcard",style:{height:"100%"}},xt={class:"card-title fw-bold mb-2"},Lt={class:"card-text small"},Ct={class:"mt-auto py-2 px-2",style:{position:"absolute",bottom:"0",left:"0",right:"0",background:"rgba(0,0,0,0.05)","border-top":"1px solid #ffc107"}},Et={class:"d-flex justify-content-between small"},Rt={class:"txtcard"},Bt={class:"txtcard"},Dt={class:"text-start small"},jt=["href"],It={key:0,class:"justify-content-center",style:{"min-height":"12rem"}},Pt={name:"MaIn"};var Tt=Object.assign(Pt,{setup(e){const t=(0,r.KR)(!1),o=(0,r.KR)({}),l=B("csrftoken"),s=(0,r.KR)(!1),c=(0,r.KR)([]),d=(0,r.KR)([]),u=(0,r.KR)(""),f=(0,r.KR)("");async function A(){try{const e=await fetch(`${E}/username`,{method:"GET",headers:{"X-CSRFToken":l},credentials:"include"}),t=await e.json();200==t.status?f.value=t.username:f.value="ERROR 404 NOT FOUND"}catch(e){console.error(e)}}async function p(){try{const e=await fetch(`${E}/log_out`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":l},credentials:"include"}),t=await e.json();200===t.status&&(window.location.href="/")}catch(e){console.error(e)}}async function g(e){try{t.value=!0;const o=await fetch(`${E}/search`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":l},credentials:"include",body:JSON.stringify({query:e,timezone:Ge.c9.local().zoneName})}),a=await o.json();200===a.status&&(d.value=JSON.parse(a.boards)),t.value=!1}catch(o){console.error(o)}}async function v(){try{const e=await fetch(`${E}/codraw`,{method:"GET",headers:{"X-CSRFToken":l},credentials:"include"}),t=await e.json();200!==t.status&&"/"!==window.location.pathname&&(window.location.href="/")}catch(e){console.error(e)}}const h=async()=>{try{const e=await fetch(`${E}/codraw/get_boards`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":l},body:JSON.stringify({timezone:Ge.c9.local().zoneName}),credentials:"include"}),t=await e.json();c.value=t.boards,o.value=t.boards.map(()=>!1)}catch(e){console.error(e)}};async function m(e){try{const t=await fetch(`${E}/load`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":l},credentials:"include",body:JSON.stringify({room:e})}),o=await t.json();200===o.status&&(window.location.href=`${o.url}`)}catch(t){console.error(t)}}async function w(){try{const e=await fetch(`${E}/get_project_url`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":l},credentials:"include"}),t=await e.json();200===t.status?window.location.href=`${t.url}`:console.log("error")}catch(e){console.error(e)}}async function b(){try{const e=await fetch(`${E}/get_popular`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":l},body:JSON.stringify({timezone:Ge.c9.local().zoneName}),credentials:"include"}),t=await e.json();d.value=t.boards}catch(e){console.error(e)}}return(0,n.sV)(async()=>{t.value=!0,await Promise.all([v(),h(),b(),A()]),t.value=!1}),(e,o)=>{const l=(0,n.g2)("RouterLink"),A=(0,n.g2)("RouterView");return(0,n.uX)(),(0,n.CE)("div",We,[(0,n.Lk)("aside",{class:(0,C.C4)(["sidebar d-flex flex-column flex-shrink-0 p-3 text-bg-dark",{"sidebar-collapsed":!s.value}])},[(0,n.Lk)("div",Ve,[(0,n.Lk)("img",{loading:"lazy",alt:"sidebar",decoding:"async",class:(0,C.C4)(["toggle mb-3 align-self-end",{"align-self-center":!s.value}]),onClick:o[0]||(o[0]=e=>s.value=!s.value),src:(0,r.R1)(Ye),style:{cursor:"pointer",width:"2rem",height:"2rem"}},null,10,Ze),(0,n.Lk)("img",{src:(0,r.R1)(i),alt:"logo",loading:"lazy",decoding:"async",class:"logo mb-4 img-fluid rounded rounded-circle",style:{"max-height":"20vh"}},null,8,$e),(0,n.bF)(l,{to:`/codraw/account/${f.value}`,class:"nav-link account-link mb-4 w-100 text-center"},{default:(0,n.k6)(()=>[(0,n.bF)((0,r.R1)(_e.gc),{class:"mx-2",icon:["fas","user"]}),o[7]||(o[7]=(0,n.eW)("My Account ",-1))]),_:1},8,["to"]),(0,n.Lk)("button",{class:"btn btn-danger w-100",onClick:o[1]||(o[1]=e=>p()),id:"out"},"Log out")])],2),(0,n.Lk)("main",qe,[(0,n.bF)(A),o[17]||(o[17]=(0,n.Lk)("h1",null,"Welcome to CoDraw!",-1)),(0,n.Lk)("div",et,[o[11]||(o[11]=(0,n.Lk)("h2",{class:"mb-4 text-start"},"My Projects",-1)),(0,n.Lk)("div",tt,[(0,n.Lk)("div",{class:"card create-project-card my text-center bg-dark",onClick:o[2]||(o[2]=e=>w()),style:{height:"14rem",width:"14rem",cursor:"pointer"}},[...o[8]||(o[8]=[(0,n.Lk)("div",{class:"card-body d-flex flex-column align-items-center justify-content-center",style:{height:"100%"}},[(0,n.Lk)("span",{style:{"font-size":"3rem",color:"#ffc107"}},"+"),(0,n.Lk)("h5",{class:"card-title mt-2 mb-0",style:{color:"#ffc107"}},"Create Project")],-1)])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.value,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"card project-card text-center bg-dark",style:{"min-height":"14rem","min-width":"14rem",cursor:"pointer",position:"relative"},onClick:t=>m(e.room)},[(0,n.Lk)("div",at,[(0,n.Lk)("h5",nt,(0,C.v_)(e.title),1),(0,n.Lk)("p",lt,(0,C.v_)(e.description),1),(0,n.Lk)("footer",rt,[(0,n.Lk)("div",it,[(0,n.Lk)("span",st,[o[9]||(o[9]=(0,n.eW)("Views: ",-1)),(0,n.Lk)("span",ct,(0,C.v_)(e.views),1)]),(0,n.Lk)("span",dt,(0,C.v_)(e.modified),1)]),(0,n.Lk)("div",ut,[o[10]||(o[10]=(0,n.eW)(" Visibility: ",-1)),(0,n.Lk)("span",ft,(0,C.v_)(e.visibility),1)])])])],8,ot))),128))])]),t.value?((0,n.uX)(),(0,n.CE)("div",At,[(0,n.bF)((0,r.R1)(je.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.Lk)("div",pt,[o[16]||(o[16]=(0,n.Lk)("div",{class:"text-center mb-4"},[(0,n.Lk)("h2",{class:"fw-bold mt-4"},"Browse Public Projects"),(0,n.Lk)("p",{class:"text-muted"},"Find boards and ideas shared by the community")],-1)),(0,n.Lk)("div",gt,[(0,n.Lk)("div",vt,[(0,n.Lk)("div",ht,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control border-0 p-3",placeholder:"Search public boards...","aria-label":"Search public boards","onUpdate:modelValue":o[3]||(o[3]=e=>u.value=e),onKeyup:o[4]||(o[4]=(0,a.jR)(e=>g(u.value),["enter"]))},null,544),[[a.Jo,u.value]]),(0,n.Lk)("button",{class:"btn btn-primary",type:"button",onClick:o[5]||(o[5]=e=>g(u.value))},[...o[12]||(o[12]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 \r\n                          1 0 0 0 1.415-1.415l-3.85-3.85zm-5.242 \r\n                          1.656a5.5 5.5 0 1 1 0-11 5.5 \r\n                          5.5 0 0 1 0 11z"})],-1)])])])])]),(0,n.Lk)("section",mt,[(0,n.Lk)("div",wt,[(0,n.Lk)("div",bt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(d.value,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:(0,C.C4)([d.value.length<3?"col-12 col-md-6 col-xl-4":"col-12 col-lg-4 col-xl-3","card result-card text-center bg-dark"]),style:{height:"15rem",width:"15rem",cursor:"pointer",position:"relative"},onClick:t=>m(e.room)},[(0,n.Lk)("div",yt,[(0,n.Lk)("h5",xt,(0,C.v_)(e.title),1),(0,n.Lk)("p",Lt,(0,C.v_)(e.description),1),(0,n.Lk)("footer",Ct,[(0,n.Lk)("div",Et,[(0,n.Lk)("span",null,[o[13]||(o[13]=(0,n.eW)("Views: ",-1)),(0,n.Lk)("span",Rt,(0,C.v_)(e.views),1)]),(0,n.Lk)("span",Bt,(0,C.v_)(e.modified),1)]),(0,n.Lk)("div",Dt,[o[14]||(o[14]=(0,n.eW)(" Owner: ",-1)),(0,n.Lk)("a",{href:`/codraw/account/${e.owner}`,onClick:o[6]||(o[6]=(0,a.D$)(()=>{},["stop"])),style:{color:"#ff4f4f !important"}},(0,C.v_)(e.owner),9,jt)])])])],10,kt))),128)),0===d.value.length?((0,n.uX)(),(0,n.CE)("div",It,[...o[15]||(o[15]=[(0,n.Lk)("text",null,"No results found :(",-1)])])):(0,n.Q3)("",!0)])])])])])])}}});const Kt=(0,h.A)(Tt,[["__scopeId","data-v-3553913a"]]);var Qt=Kt;const St={name:"SeTtings"};var zt=Object.assign(St,{setup(e){const t=B("csrftoken");return console.log(t),(e,t)=>" settings "}});const Jt=zt;var Mt=Jt,Ft="data:image/webp;base64,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",Ot=o.p+"img/bin.16bd31d4.webp",Nt=o.p+"img/save.9ae805ea.webp",Xt=o.p+"img/edit.72b2dc1f.webp";const Ht={key:0,class:"spinner-overlay"},Ut={key:0,style:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)","z-index":"100",display:"flex","align-items":"center","justify-content":"center"}},Gt={style:{background:"#23272f",color:"#fff",padding:"32px 40px","border-radius":"16px","min-width":"320px","box-shadow":"0 8px 32px rgba(0,0,0,0.25)",position:"relative"}},Yt={class:"flex-grow-1 text-white py-5"},_t=["src"],Wt={class:"container"},Vt={class:"fw-bold mb-5 text-center"},Zt={class:"boards-wrapper mt-2 justify-content-start"},$t={class:"d-flex justify-content-end align-items-center gap-2"},qt={key:0,class:"w-100"},eo={class:"d-flex justify-content-end align-items-center gap-2"},to=["onClick"],oo=["src","onClick"],ao=["src","onClick"],no=["src","onClick"],lo={key:0},ro=["onUpdate:modelValue"],io=["onUpdate:modelValue"],so={key:1},co=["onUpdate:modelValue"],uo=["onUpdate:modelValue"],fo={key:1,class:"w-100"},Ao=["onClick"],po=["onUpdate:modelValue"],go=["onUpdate:modelValue"],vo={class:"card-body text-white position-relative flex-grow-1"},ho={class:"d-flex flex-column align-items-start gap-1",style:{position:"absolute",bottom:"0",left:"0",right:"0",background:"rgba(0,0,0,0.05)",padding:"0.5rem"}},mo={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},wo={class:"text-white"},bo={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},ko={class:"text-white"},yo={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},xo={class:"text-white"},Lo={key:0,class:"container mt-5"},Co={class:"boards-wrapper mt-5 justify-content-start"},Eo={class:"d-flex justify-content-end"},Ro=["onClick"],Bo=["src","onClick"],Do=["onUpdate:modelValue"],jo=["onUpdate:modelValue"],Io={class:"card-body text-white position-relative flex-grow-1"},Po={class:"d-flex flex-column align-items-start gap-1",style:{position:"absolute",bottom:"0",left:"0",right:"0",background:"rgba(0,0,0,0.05)",padding:"0.5rem"}},To={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},Ko={class:"text-white"},Qo={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},So={class:"text-white"},zo={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},Jo={class:"text-white"};var Mo={__name:"AccOunt",setup(e){const t=(0,r.KR)(!1),o=(0,r.KR)(null),l=(0,r.KR)(null),i=(0,r.KR)(!1),s=B("csrftoken"),c=(0,r.KR)([]),d=(0,r.KR)(!0),u=(0,r.KR)({}),f=(0,r.KR)([]),A=(0,r.KR)({}),p=async e=>{try{const a=await fetch(`${E}/delete/${e}`,{method:"GET",headers:{"X-CSRFToken":s},credentials:"include"}),n=await a.json();200===n.status?(t.value=!0,o.value="Board was successfully modified."):console.log("Board not deleted successfully")}catch(a){console.error(a)}},g=async e=>{try{const a=await fetch(`${E}/delete/bookmark/${e}`,{method:"GET",headers:{"X-CSRFToken":s},credentials:"include"}),n=await a.json();200===n.status&&(t.value=!0,o.value="Bookmark successfuly deleted.")}catch(a){console.error(a)}},v=async e=>{try{const t=await fetch(`${E}/get_bookmarks/${e}`,{method:"POST",headers:{"X-CSRFToken":s},body:JSON.stringify({timezone:Ge.c9.local().zoneName}),credentials:"include"}),o=await t.json();200===o.status?(f.value=o.bookmarks,A.value=o.bookmarks.map(()=>!1)):f.value=[]}catch(t){console.error(t),f.value=[]}},h=async e=>{if(d.value=!0,e.original_description!==e.description||e.original_title!==e.title)try{const a=await fetch(`${E}/codraw/update/${e.room}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify({title:e.title,description:e.description,timezone:Ge.c9.local().zoneName})}),n=await a.json();200===n.status&&(t.value=!0,o.value="Board was successfully modified.")}catch(a){console.error(a)}d.value=!1},m=async e=>{try{const t=await fetch(`${E}/username`,{method:"GET",headers:{"X-CSRFToken":s},credentials:"include"}),o=await t.json();let a="";return a=200==o.status?o.username:"ERROR 404 NOT FOUND",a===e}catch(t){console.error(t)}},w=async e=>{try{const t=await fetch(`${E}/codraw/boards/${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},body:JSON.stringify({timezone:Ge.c9.local().zoneName}),credentials:"include"}),o=await t.json();c.value=o.boards.map(e=>({...e,original_title:e.title,original_description:e.description})),u.value=o.boards.map(()=>!1)}catch(t){console.error(t)}};async function b(e){try{const t=await fetch(`${E}/load`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify({room:e})}),o=await t.json();200===o.status&&(window.location.href=`${o.url}`)}catch(t){console.error(t)}}return(0,n.sV)(async()=>{d.value=!0;const e=window.location.pathname.split("/");l.value=e[e.length-1],i.value=await m(l.value),await w(l.value),await v(l.value),d.value=!1}),(e,s)=>{const A=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)(n.FK,null,[d.value?((0,n.uX)(),(0,n.CE)("div",Ht,[(0,n.bF)((0,r.R1)(je.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.bF)(a.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[t.value?((0,n.uX)(),(0,n.CE)("div",Ut,[(0,n.Lk)("div",Gt,[(0,n.Lk)("button",{onClick:s[0]||(s[0]=e=>t.value=!1),style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer"}}," ✕ "),(0,n.Lk)("p",null,(0,C.v_)(o.value),1),(0,n.Lk)("button",{onClick:s[1]||(s[1]=e=>t.value=!1),id:"close_form",style:{"margin-top":"20px",background:"#4f8cff",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer"}}," Close ")])])):(0,n.Q3)("",!0)]),_:1}),(0,n.Lk)("main",Yt,[(0,n.bF)(A,{to:"/codraw"},{default:(0,n.k6)(()=>[(0,n.Lk)("img",{src:(0,r.R1)(Ft),decoding:"async",loading:"lazy",class:"back",style:{width:"50px",height:"50px"}},null,8,_t)]),_:1}),(0,n.Lk)("div",Wt,[(0,n.Lk)("h2",Vt,(0,C.v_)(l.value)+"'s Boards",1),(0,n.Lk)("div",Zt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.value,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"project-card"},[(0,n.Lk)("div",$t,[i.value?((0,n.uX)(),(0,n.CE)("div",qt,[(0,n.Lk)("div",eo,[(0,n.Lk)("button",{class:"btn btn-success success",onClick:t=>b(e.room)}," Join room ",8,to),u.value[t]?((0,n.uX)(),(0,n.CE)("img",{key:1,src:(0,r.R1)(Nt),loading:"lazy",decoding:"async",alt:"save",onClick:e=>{u.value[t]=!u.value[t],h(c.value[t]),c.value[t].modified="Just now"},style:{width:"20px",height:"20px",cursor:"pointer"}},null,8,ao)):((0,n.uX)(),(0,n.CE)("img",{key:0,src:(0,r.R1)(Xt),loading:"lazy",decoding:"async",alt:"edit",onClick:e=>u.value[t]=!u.value[t],style:{width:"20px",height:"20px",cursor:"pointer"}},null,8,oo)),(0,n.Lk)("img",{src:(0,r.R1)(Ot),loading:"lazy",alt:"delete",decoding:"async",onClick:e=>{p(c.value[t].room),c.value.splice(t,1)},style:{width:"20px",height:"20px",cursor:"pointer"}},null,8,no)]),u.value[t]?((0,n.uX)(),(0,n.CE)("div",so,[(0,n.bo)((0,n.Lk)("input",{class:"form-control fw-bold mt-2 bg-white text-dark","onUpdate:modelValue":t=>e.title=t,onClick:s[4]||(s[4]=(0,a.D$)(()=>{},["stop"])),placeholder:"Board Title"},null,8,co),[[a.Jo,e.title]]),(0,n.bo)((0,n.Lk)("input",{class:"form-control small mt-3 bg-white text-dark","onUpdate:modelValue":t=>e.description=t,onClick:s[5]||(s[5]=(0,a.D$)(()=>{},["stop"])),placeholder:"Board Description"},null,8,uo),[[a.Jo,e.description]])])):((0,n.uX)(),(0,n.CE)("div",lo,[(0,n.bo)((0,n.Lk)("input",{class:"form-control fw-bold mt-2 bg-dark text-white","onUpdate:modelValue":t=>e.title=t,onClick:s[2]||(s[2]=(0,a.D$)(()=>{},["stop"])),placeholder:"Board Title",readonly:"",disabled:""},null,8,ro),[[a.Jo,e.title]]),(0,n.bo)((0,n.Lk)("input",{class:"form-control small mt-3 bg-dark text-white","onUpdate:modelValue":t=>e.description=t,onClick:s[3]||(s[3]=(0,a.D$)(()=>{},["stop"])),placeholder:"Board Description",readonly:"",disabled:""},null,8,io),[[a.Jo,e.description]])]))])):((0,n.uX)(),(0,n.CE)("div",fo,[(0,n.Lk)("button",{class:"btn btn-success success",onClick:t=>b(e.room)}," Join room ",8,Ao),(0,n.bo)((0,n.Lk)("input",{class:"form-control fw-bold mt-2 bg-dark text-white","onUpdate:modelValue":t=>e.title=t,onClick:s[6]||(s[6]=(0,a.D$)(()=>{},["stop"])),placeholder:"Board Title",readonly:"",disabled:""},null,8,po),[[a.Jo,e.title]]),(0,n.bo)((0,n.Lk)("input",{class:"form-control small mt-3 bg-dark text-white","onUpdate:modelValue":t=>e.description=t,onClick:s[7]||(s[7]=(0,a.D$)(()=>{},["stop"])),placeholder:"Board Description",readonly:"",disabled:""},null,8,go),[[a.Jo,e.description]])]))]),(0,n.Lk)("div",vo,[(0,n.Lk)("div",ho,[(0,n.Lk)("span",mo,[s[10]||(s[10]=(0,n.eW)(" Views: ",-1)),(0,n.Lk)("span",wo,(0,C.v_)(e.views),1)]),(0,n.Lk)("span",bo,[s[11]||(s[11]=(0,n.eW)(" Last Modified: ",-1)),(0,n.Lk)("span",ko,(0,C.v_)(e.modified),1)]),(0,n.Lk)("span",yo,[s[12]||(s[12]=(0,n.eW)(" Visibility: ",-1)),(0,n.Lk)("span",xo,(0,C.v_)(e.visibility),1)])])])]))),128))])]),i.value?((0,n.uX)(),(0,n.CE)("div",Lo,[s[16]||(s[16]=(0,n.Lk)("h1",{class:"text-start"},"Bookmarks",-1)),(0,n.Lk)("div",Co,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(f.value,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"project-card"},[(0,n.Lk)("div",Eo,[(0,n.Lk)("button",{class:"btn btn-success success",onClick:t=>b(e.room)}," Join room ",8,Ro),(0,n.Lk)("img",{src:(0,r.R1)(Ot),loading:"lazy",alt:"delete",decoding:"async",onClick:e=>{g(f.value[t].room),f.value.splice(t,1)},style:{width:"20px",height:"20px",cursor:"pointer"}},null,8,Bo)]),(0,n.bo)((0,n.Lk)("input",{class:"form-control fw-bold mt-2 bg-white text-dark","onUpdate:modelValue":t=>e.title=t,onClick:s[8]||(s[8]=(0,a.D$)(()=>{},["stop"])),placeholder:"Board Title",readonly:"",disabled:""},null,8,Do),[[a.Jo,e.title]]),(0,n.bo)((0,n.Lk)("input",{class:"form-control small mt-3 bg-white text-dark","onUpdate:modelValue":t=>e.description=t,onClick:s[9]||(s[9]=(0,a.D$)(()=>{},["stop"])),placeholder:"Board Description",readonly:"",disabled:""},null,8,jo),[[a.Jo,e.description]]),(0,n.Lk)("div",Io,[(0,n.Lk)("div",Po,[(0,n.Lk)("span",To,[s[13]||(s[13]=(0,n.eW)(" Views: ",-1)),(0,n.Lk)("span",Ko,(0,C.v_)(e.views),1)]),(0,n.Lk)("span",Qo,[s[14]||(s[14]=(0,n.eW)(" Last Modified: ",-1)),(0,n.Lk)("span",So,(0,C.v_)(e.modified),1)]),(0,n.Lk)("span",zo,[s[15]||(s[15]=(0,n.eW)(" Visibility: ",-1)),(0,n.Lk)("span",Jo,(0,C.v_)(e.visibility),1)])])])]))),128))])])):(0,n.Q3)("",!0)])],64)}}};const Fo=(0,h.A)(Mo,[["__scopeId","data-v-73e6fc26"]]);var Oo=Fo,No=(o(7588),o(4603),o(7566),o(8721),o.p+"img/email.54f0aca4.webp"),Xo=o.p+"img/zoom.91d1cc83.webp",Ho=o.p+"img/star.4504b728.webp";const Uo={style:{position:"relative",width:"100vw",height:"100vh",overflow:"hidden"}},Go={key:0,class:"spinner-overlay"},Yo={key:0,style:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)","z-index":"100",display:"flex","align-items":"center","justify-content":"center"}},_o={style:{background:"#23272f",color:"#fff",padding:"32px 40px","border-radius":"16px","min-width":"320px","box-shadow":"0 8px 32px rgba(0,0,0,0.25)",position:"relative"}},Wo={id:"toolbar",style:{position:"absolute",top:"32px",left:"5%",background:"rgba(30, 30, 30, 0.85)","border-radius":"16px","box-shadow":"0 4px 24px rgba(0,0,0,0.18)",padding:"20px 32px",display:"flex","align-items":"center",gap:"20px","z-index":"10"}},Vo={style:{color:"#fff","min-width":"32px","text-align":"center"}},Zo={id:"inv_div",style:{position:"absolute",top:"32px",right:"1rem","z-index":"10"}},$o=["src"],qo=["src"],ea={key:0},ta={key:0,style:{position:"absolute",top:"150px",left:"35%","backdrop-filter":"blur(16px)",background:"rgba(30, 30, 30, 0.75)",border:"1px solid rgba(255, 255, 255, 0.1)","border-radius":"20px","box-shadow":"0 8px 32px rgba(0, 0, 0, 0.25)",padding:"32px",display:"flex","flex-direction":"column",gap:"20px","z-index":"20","min-width":"30vw","max-width":"90vw","font-family":"'Segoe UI', Roboto, sans-serif",transition:"ease-in-out 0.6s",color:"#fff"}},oa={style:{display:"flex","flex-direction":"column",gap:"6px"}},aa={style:{position:"relative"}},na={style:{position:"absolute",right:"10px",bottom:"6px","font-size":"0.75rem",color:"#aaa","pointer-events":"none"}},la={style:{display:"flex","flex-direction":"column",gap:"6px"}},ra={style:{position:"relative"}},ia={style:{position:"absolute",right:"10px",bottom:"6px","font-size":"0.75rem",color:"#aaa","pointer-events":"none"}},sa={style:{display:"flex","align-items":"center",gap:"10px"}},ca={class:"switch"},da={id:"zoom"},ua=["src"],fa=10;var Aa={__name:"BoArd",setup(e){const t=(0,r.KR)(!1),o=B("csrftoken"),l=(0,r.KR)(null),i=(0,r.KR)(null),s=(0,r.KR)(window.innerWidth),c=(0,r.KR)(!1),d=(0,r.KR)(!1),u=(0,r.KR)(!1),f=(0,r.KR)("#ffffff"),A=(0,r.KR)("#000000"),p=(0,r.KR)(null),g=(0,r.KR)(null),v=(0,r.KR)(null),h=(0,r.KR)("Public"),m=(0,r.KR)("brush"),w=(0,r.KR)(!1),b=(0,r.KR)(5),k=(0,r.KR)([]),y=(0,n.EW)(()=>`${(100*x.value).toFixed(0)}%`),x=(0,r.KR)(1),L=(0,r.KR)(null),D=(0,r.KR)(null),j=(0,r.KR)(null),I=(0,r.KR)(!1),P=(0,r.KR)(!1),T=(0,r.KR)(!0),K=(0,r.KR)([]),Q=(0,r.KR)(0),S=(0,r.KR)(!1),z=async()=>{if(c.value)T.value=!1;else try{const e=await fetch(`${E}/status`,{method:"GET",headers:{"X-CSRFToken":o},credentials:"include"});let t=await e.json();200===t.status&&t.user?T.value=!0:T.value=!1}catch(e){console.error(e)}},J=async()=>{const e=new URL(window.location.href).pathname.split("/")[2],t=new URL(window.location.href).pathname.split("/")[3];try{const a=await fetch(`${E}/bookmark/${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":o},credentials:"include",body:JSON.stringify({user:e,status:S.value})}),n=await a.json();200===n.status&&n.bookmarked?S.value=!0:S.value=!1}catch(a){S.value=!1}},M=async()=>{const e=new URL(window.location.href).pathname.split("/")[2],t=new URL(window.location.href).pathname.split("/")[3];try{const a=await fetch(`${E}/is_bookmarked/${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":o},body:JSON.stringify({user:e}),credentials:"include"}),n=await a.json();200===n.status&&n.bookmarked?S.value=!0:S.value=!1}catch(a){S.value=!1,console.error(a)}},F=(0,n.EW)(()=>s.value>1330),O={width:4*document.documentElement.clientWidth,height:4*document.documentElement.clientHeight,draggable:!1},N=(0,r.KR)(null),X=(0,r.KR)(new URL(window.location.href).pathname.split("/")[3]);N.value=new WebSocket(`${R}/${X.value}/`),N.value.onmessage=async e=>{const t=JSON.parse(e.data);if(!t||!t.type)return;const o=j.value.getNode();if("start"===t.type){const e=new(Pe().Line)({stroke:t.stroke,strokeWidth:t.width,globalCompositeOperation:t.operation,points:t.points,lineCap:"round",lineJoin:"round"});e._remote=!0,o.add(e),l.value=e}else if("draw"===t.type&&l.value?._remote){const e=l.value.points().concat(t.points);l.value.points(e),o.batchDraw()}else if("bg"===t.type&&t.bg)A.value=t.bg,P.value="#ffffff"===t.bg;else if("img"==t.type){const e=new window.Image;e.src=t.src,e.onload=()=>{const a=new(Pe().Image)({id:t.id,image:e,x:t.x,y:t.y,width:t.width,height:t.height,draggable:!1});q(a),o.add(a),o.batchDraw()},e.onerror=()=>console.error("Remote image failed to load",t.id)}else"history_update"===t.type&&t.history?(K.value=t.history,Q.value=t.index):"undo"===t.type?await te():"redo"===t.type&&oe()};const H=e=>{e.evt.preventDefault()},U=document.createElement("canvas");U.width=O.width,U.height=O.height;const G=U.getContext("2d");function Y(e){const t=i.value.getNode(),o=1.25,a=t.scaleX(),n="up"===e?1:-1;if(1===a&&-1===n)return;const l=n>0?a*o:a/o;x.value=l,t.scale({x:l,y:l}),t.batchDraw()}G.strokeStyle=f.value,G.fillStyle=A.value,G.lineJoin="round",G.lineWidth=b.value,G.lineCap="round",G.lineJoin="round",(0,n.wB)(f,e=>{G.strokeStyle=e});const _=async()=>{try{const e=new URL(window.location.href).pathname.split("/"),t=e[2],a=e[3],n=await fetch(`${E}/codraw/check_owner`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":o},credentials:"include",body:JSON.stringify({owner:t,room:a})}),l=await n.json();200===l.status&&(c.value=!0)}catch(e){c.value=!1,console.error(e)}},W=async()=>{try{const e=window.location.href;await navigator.clipboard.writeText(e),u.value=!0,g.value="Invitation link copied to clipboard!"}catch(e){console.error("Failed to copy: ",e),u.value=!0,g.value="Failed to copy the link."}},V=()=>{const e=localStorage.getItem("storage");if(e&&(k.value=JSON.parse(e),k.value.length>0)){const e=new window.Image;e.src=k.value[k.value.length-1].image,e.onload=()=>{G.clearRect(0,0,U.width,U.height),G.drawImage(e,0,0),j.value.getNode().batchDraw()}}},Z=async()=>{try{t.value=!0;const e=new URL(window.location.href).pathname.split("/"),a=e[3];p.value||(u.value=!0,g.value="Please provide a title for your board."),p.value.length>66&&(u.value=!0,g.value="The title length is to large, must be at most 60 characters."),v.value&&v.value.length>170&&(u.value=!0,g.value="The description length is to large, must be at most 100 characters.");const n=await fetch(`${E}/codraw/save_new`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":o},body:JSON.stringify({project:a,payload:JSON.stringify(i.value.getStage().toJSON()),title:p.value,description:v.value,type:h.value,bg:A.value}),credentials:"include"}),l=await n.json();let r=!0;d.value=!1,200===l.status&&(r=!1),await new Promise(e=>setTimeout(()=>{t.value=!1,e()},2e3)),r?(u.value=!0,g.value="There was an error saving your board."):(u.value=!0,g.value="Board saved successfully.",ce())}catch(e){console.error(e)}};function $(e,t){const o=t.width,a=t.height,n=o/a;let l,r;const i=e.width/e.height;n>=i?(l=e.width,r=e.width/n):(l=e.height*n,r=e.height);let s=0,c=0;return s=(e.width-l)/2,c=(e.height-r)/2,{cropX:s,cropY:c,cropWidth:l,cropHeight:r}}function q(e){const t=e.image();if(!t)return;const o=$(t,{width:e.width(),height:e.height()});e.setAttrs(o)}function ee(){const e=j.value.getNode();if(!e)return;const t=e.children||[],o=t[t.length-1];if(!o)return;const a=o.toJSON();Q.value<K.value.length-1&&(K.value=K.value.slice(0,Q.value+1)),K.value.push(a),Q.value=K.value.length-1,K.value.length>fa&&(K.value.shift(),Q.value=Math.max(0,Q.value-1)),N.value.send(JSON.stringify({type:"history_update",history:K.value,index:Q.value}))}const te=async()=>{if(Q.value<0)return;const e=j.value.getNode(),t=e.children||[],o=t[t.length-1];o&&o.destroy(),Q.value--,e.batchDraw()},oe=()=>{if(Q.value!=fa-1){Q.value++;const e=j.value.getNode();if(!K.value[Q.value])return;const t=JSON.parse(K.value[Q.value]);if(t)if("Image"===t.className){const o=new window.Image;o.src=t.attrs.src,o.onload=()=>{const a=new(Pe().Image)({id:(0,De.A)(),image:o,x:t.attrs.x,y:t.attrs.y,width:o.width,height:o.height,draggable:!1,src:t.attrs.src});q(a),a.setAttr("src",t.attrs.src),e.add(a),e.draw()}}else{const o=Pe().Node.create(t);e.add(o),e.draw()}}},ae=e=>{e.preventDefault();const t=i.value?.getNode?.();if(!t)return;const o=t.getPointerPosition()||{x:t.width()/2,y:t.height()/2},a=se(t,o),n=e.clipboardData;if(!n||0===n.files.length)return;const l=n.files[0];if(!l.type.startsWith("image/"))return;const r=new FileReader;r.onload=e=>{const t=new window.Image;t.src=e.target.result,t.onload=()=>{const o=new(Pe().Image)({id:(0,De.A)(),image:t,x:a.x,y:a.y,width:t.width,height:t.height,draggable:!1,src:e.target.result});q(o);const n=j.value.getNode();o.setAttr("src",e.target.result),n.add(o),n.draw(),N.value.send(JSON.stringify({type:"img",id:o.id(),src:e.target.result,x:o.x(),y:o.y(),width:o.width(),height:o.height()})),ee()},r.onloadstart=function(){console.error("Starting")},r.onerror=function(e){console.error("FileReader error:",e.target.error)}},r.readAsDataURL(l)},ne=async e=>{try{t.value=!0;const a=new URL(window.location.href).pathname.split("/"),n=a[3];if("save"===e){const e=await fetch(`${E}/codraw/save_project`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":o},body:JSON.stringify({project:n,payload:JSON.stringify(i.value.getStage().toJSON()),bg:A.value}),credentials:"include"}),a=await e.json();let l=!0;200===a.status&&(l=!1),await new Promise(e=>setTimeout(()=>{t.value=!1,e()},2e3)),l?d.value=!0:(ce(),u.value=!0,g.value="Board was successfully quick saved.")}else if("load"===e){const e=await fetch(`${E}/codraw/save_project`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:n})}),t=await e.json();return 200===t.status}}catch(a){console.error(a)}};function le(){localStorage.removeItem("storage"),c.value?window.location.href="http://localhost:8081/codraw":window.location.href="http://localhost:8081/"}function re(){u.value=!1,g.value="",t.value=!0,console.log("Clearing the board"),localStorage.removeItem("storage");const e=j.value.getNode();e.destroyChildren(),e.batchDraw(),t.value=!1}function ie(){c.value?(u.value=!0,g.value="Are you sure you would like to clear the board? This action is irreversible."):(u.value=!0,g.value="You don't have neccessary permissions to clear the board.")}const se=e=>{const t=e.getAbsoluteTransform().copy();t.invert();const o=e.getPointerPosition();return t.point(o)},ce=()=>{const e=i.value?.getNode?.();if(!e)return;const t=e.toDataURL();k.value=[{id:Date.now(),image:t}],localStorage.setItem("storage",JSON.stringify(k.value))},de={image:U,x:0,y:0,width:U.width,height:U.height},ue=e=>{const t=e.target.getStage();if(2===e.evt.button)return I.value=!0,t.draggable(!0),t.startDrag(),void(L.value=t.getPointerPosition());w.value=!0;const o=se(t),a=new(Pe().Line)({stroke:f.value,strokeWidth:b.value,globalCompositeOperation:"eraser"===m.value?"destination-out":"source-over",points:[o.x,o.y],lineCap:"round",lineJoin:"round"});N.value.send(JSON.stringify({type:"start",stroke:f.value,width:b.value,operation:"eraser"===m.value?"destination-out":"source-over",points:[o.x,o.y]})),j.value.getNode().add(a),l.value=a},fe=e=>{if(w.value=!1,l.value=null,ee(),I.value){const t=e.target.getStage();t.draggable(!1),I.value=!1}},Ae=e=>{if(!w.value||!l.value)return;const t=e.target.getStage(),o=se(t),a=l.value.points().concat([o.x,o.y]);l.value.points(a),j.value.getNode().batchDraw(),N.value.send(JSON.stringify({type:"draw",points:[o.x,o.y]}))},pe=async()=>{try{const e=new URL(window.location.href).pathname.split("/"),t=e[3],o=await fetch(`${E}/codraw/get_details`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:t})}),a=await o.json(),n=a.canva,l=a.bg;if(l&&(A.value=l,P.value="#ffffff"===l),n){const e=JSON.parse(n),t=j.value.getNode();t.destroyChildren(),e.children[0].children.forEach(e=>{if("Image"===e.className&&e.attrs.src){const t=new window.Image;t.src=e.attrs.src,e.attrs.image=t}const o=Pe().Node.create(e);t.add(o)}),t.draw()}}catch(e){console.error(e)}},ge=e=>{e.ctrlKey&&"z"===e.key?(te(),N.value.send(JSON.stringify({type:"undo"}))):e.ctrlKey&&"y"===e.key&&(oe(),N.value.send(JSON.stringify({type:"redo"})))},ve=()=>{s.value=window.innerWidth};return(0,n.sV)(async()=>{t.value=!0,await(0,n.dY)(),V(),await ne("load")&&setTimeout(()=>pe(),100),await _(),await z(),T.value&&await M(),window.addEventListener("keyup",ge);const e=i.value.getNode(),o=1.1;e.on("wheel",t=>{t.evt.preventDefault();const a=e.scaleX(),n=e.getPointerPosition(),l={x:(n.x-e.x())/a,y:(n.y-e.y())/a},r=t.evt.deltaY>0?1:-1;if(1===a&&-1===r)return;const i=r>0?a*o:a/o;x.value=i,e.scale({x:i,y:i});const s={x:n.x-l.x*i,y:n.y-l.y*i};e.position(s),e.batchDraw()});let a=null;window.addEventListener("resize",()=>{clearTimeout(a),a=setTimeout(()=>{const e=i.value?.getNode(),t=D.value?.getNode();if(!e||!t)return;const o=window.innerWidth,a=window.innerHeight;U.width=4*o,U.height=4*a,e.width(U.width),e.height(U.height),t.width(U.width),t.height(U.height);const n=t.getLayer();n&&n.batchDraw()},100)}),window.addEventListener("resize",ve),window.addEventListener("paste",ae);const l=document.createElement("div");l.id="preview",l.style.position="absolute",l.style.bottom="15px",l.style.left="15px",l.style.border="5px solid #ffc107",l.style.borderRadius="5%",l.style.backgroundColor="lightgrey",document.body.appendChild(l);const r=new(Pe().Stage)({container:"preview",width:window.innerWidth/8,height:window.innerHeight/8,scaleX:1/32,scaleY:1/32});let s=j.value.getNode(),c=new(Pe().Layer);const d=new(Pe().Rect)({x:0,y:0,width:32*r.width(),height:32*r.height(),fill:A.value,listening:!1});function u(){const e=JSON.parse(i.value.getStage().toJSON());c.destroyChildren(),c.add(d),e.children[0].children.forEach(e=>{const t=Pe().Node.create(e);c.add(t)}),c.draw()}r.add(c),c.add(d),(0,n.wB)(P,()=>{A.value=P.value?"#ffffff":"#000000",f.value=P.value?"#000000":"#ffffff",d.fill(A.value),c.batchDraw(),N.value.readyState===WebSocket.OPEN&&N.value.send(JSON.stringify({type:"bg",bg:A.value}))},{immediate:!0}),t.value=!1,s.on("add destroy change",u),u()}),setInterval(()=>ce(),6e4),(0,n.xo)(()=>{N.value&&N.value.close(),t.value=!0}),(0,n.hi)(()=>{window.removeEventListener("paste",ae),window.removeEventListener("keyup",ge),window.removeEventListener("resize",ve)}),(e,o)=>{const l=(0,n.g2)("font-awesome-icon"),s=(0,n.g2)("v-image"),A=(0,n.g2)("v-layer"),w=(0,n.g2)("v-stage");return(0,n.uX)(),(0,n.CE)("div",Uo,[t.value?((0,n.uX)(),(0,n.CE)("div",Go,[(0,n.bF)((0,r.R1)(je.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.bF)(a.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[u.value?((0,n.uX)(),(0,n.CE)("div",Yo,[(0,n.Lk)("div",_o,[(0,n.Lk)("button",{onClick:o[0]||(o[0]=e=>u.value=!1),style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer"}}," ✕ "),(0,n.Lk)("p",null,(0,C.v_)(g.value),1),"Are you sure you would like to clear the board? This action is irreversible."!==g.value?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:o[1]||(o[1]=e=>u.value=!1),id:"close_form",style:{"margin-top":"20px",background:"#4f8cff",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer"}}," Close ")):(0,n.Q3)("",!0),"Are you sure you would like to clear the board? This action is irreversible."===g.value?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:o[2]||(o[2]=e=>re()),id:"confirm_clear",style:{"margin-top":"20px",background:"green",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer"}}," Confirm ")):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)]),_:1}),(0,n.Lk)("div",Wo,[(0,n.bF)(l,{icon:["fas","undo"],class:"feature-icon",onClick:o[3]||(o[3]=e=>te())}),(0,n.bF)(l,{icon:["fas","redo"],class:"feature-icon",onClick:o[4]||(o[4]=e=>oe())}),(0,n.Lk)("button",{onClick:o[5]||(o[5]=e=>P.value=!P.value),style:(0,C.Tr)([{"border-radius":"50%",padding:"1rem","border-color":"#f68608","border-width":"5px"},{backgroundColor:P.value?"#ffffff":"#000000"}])},null,4),o[21]||(o[21]=(0,n.Lk)("text",{style:{color:"white"}},"Brush Color",-1)),(0,n.bo)((0,n.Lk)("input",{type:"color","onUpdate:modelValue":o[6]||(o[6]=e=>f.value=e)},null,512),[[a.Jo,f.value]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":o[7]||(o[7]=e=>m.value=e),style:{background:"#23272f",color:"#fff",border:"none","border-radius":"8px",padding:"8px 16px","font-size":"1rem",outline:"none",cursor:"pointer"}},[...o[20]||(o[20]=[(0,n.Lk)("option",{value:"brush"},"Brush",-1),(0,n.Lk)("option",{value:"eraser"},"Eraser",-1)])],512),[[a.u1,m.value]]),o[22]||(o[22]=(0,n.Lk)("label",{style:{color:"#fff","font-size":"1rem","margin-right":"8px"}}," Line Width ",-1)),(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":o[8]||(o[8]=e=>b.value=e),min:"1",max:"20",style:{"accent-color":"#4f8cff",width:"60px","margin-right":"8px"}},null,512),[[a.Jo,b.value]]),(0,n.Lk)("span",Vo,(0,C.v_)(b.value),1),c.value||T.value?((0,n.uX)(),(0,n.CE)("button",{key:0,id:"save_btn",onClick:o[9]||(o[9]=e=>ne("save")),style:{background:"#4f8cff",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer",transition:"ease-in-out 0.6s"}},"Save")):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:o[10]||(o[10]=e=>le()),id:"exit",style:{background:"#ff4f4f",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer",transition:"ease-in-out 0.6s"}},"Exit"),c.value?((0,n.uX)(),(0,n.CE)("button",{key:1,id:"clearall",style:{background:"#f68608",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer",transition:"ease-in-out 0.6s"},onClick:o[11]||(o[11]=e=>ie())}," Clear all ")):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Zo,[T.value?((0,n.uX)(),(0,n.CE)("button",{key:0,id:"bookmark-btn",onClick:J,class:"mb-2",style:{background:"#4f8cff",color:"#fff",border:"none","border-radius":"10px",padding:"10px 18px","font-size":"0.95rem","font-weight":"500",cursor:"pointer",transition:"ease-in-out 0.6s",width:"200px",height:"40px"}},[(0,n.Lk)("img",{src:(0,r.R1)(Ho),decoding:"async",loading:"lazy",alt:"Bookmark",style:{width:"18px",height:"18px"}},null,8,$o),(0,n.Lk)("span",null,(0,C.v_)(S.value?"Bookmarked":"Bookmark"),1)])):(0,n.Q3)("",!0),(0,n.Lk)("button",{id:"inv",onClick:W,style:{display:"flex","align-items":"center",gap:"8px",background:"#4f8cff",color:"#fff",border:"none","border-radius":"10px",padding:"10px 18px","font-size":"0.95rem","font-weight":"500",cursor:"pointer",transition:"ease-in-out 0.6s",width:"200px",height:"40px"}},[(0,n.Lk)("img",{src:(0,r.R1)(No),alt:"Copy",style:{width:"18px",height:"18px"}},null,8,qo),F.value?((0,n.uX)(),(0,n.CE)("span",ea,"Copy invitation link")):(0,n.Q3)("",!0)])]),(0,n.bF)(a.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[d.value?((0,n.uX)(),(0,n.CE)("div",ta,[(0,n.Lk)("button",{onClick:o[12]||(o[12]=e=>d.value=!1),style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer",transition:"color 0.2s"}}," ✕ "),(0,n.Lk)("div",oa,[o[23]||(o[23]=(0,n.Lk)("label",{class:"align-self-start"},"Title",-1)),(0,n.Lk)("div",aa,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[13]||(o[13]=e=>p.value=e),type:"text",placeholder:"Enter title",style:{padding:"10px 14px","border-radius":"12px",border:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.05)",color:"#fff","font-size":"1rem",outline:"none",transition:"border 0.2s",width:"100%","box-sizing":"border-box"}},null,512),[[a.Jo,p.value]]),(0,n.Lk)("span",na,(0,C.v_)(p.value&&p.value.length||0),1)])]),(0,n.Lk)("div",la,[o[24]||(o[24]=(0,n.Lk)("label",{class:"align-self-start"},"Description",-1)),(0,n.Lk)("div",ra,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":o[14]||(o[14]=e=>v.value=e),rows:"3",placeholder:"Enter description",style:{padding:"10px 14px","border-radius":"12px",border:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.05)",color:"#fff","font-size":"1rem",resize:"none",outline:"none",transition:"border 0.2s",width:"100%","box-sizing":"border-box"}},null,512),[[a.Jo,v.value]]),(0,n.Lk)("span",ia,(0,C.v_)(v.value&&v.value.length||0),1)])]),(0,n.Lk)("div",sa,[o[26]||(o[26]=(0,n.Lk)("label",{style:{"flex-shrink":"0"}},"Private",-1)),(0,n.Lk)("label",ca,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[15]||(o[15]=e=>h.value=e),type:"checkbox","true-value":"private","false-value":"public"},null,512),[[a.lH,h.value]]),o[25]||(o[25]=(0,n.Lk)("span",{class:"slider"},null,-1))])]),(0,n.Lk)("button",{id:"save_def",onClick:o[16]||(o[16]=e=>Z()),style:{background:"#4f8cff",color:"#fff",border:"none","border-radius":"12px",padding:"12px","font-size":"1rem","font-weight":"500",cursor:"pointer",transition:"0.5s ease-out"},class:"save"}," Save Details ")])):(0,n.Q3)("",!0)]),_:1}),(0,n.Lk)("div",da,[(0,n.Lk)("label",{style:{"font-size":"larger",cursor:"pointer",width:"2rem"},onClick:o[17]||(o[17]=e=>Y("up"))},"+"),(0,n.Lk)("img",{src:(0,r.R1)(Xo),decoding:"async",loading:"lazy",alt:"zoom",class:"img-fluid",style:{width:"1.2rem",height:"1.2rem"}},null,8,ua),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[18]||(o[18]=e=>y.value=e),style:{width:"60px","text-align":"center","border-style":"none"},disabled:""},null,512),[[a.Jo,y.value]]),(0,n.Lk)("label",{style:{"font-size":"larger",cursor:"pointer",width:"2rem"},onClick:o[19]||(o[19]=e=>Y("down"))},"-")]),(0,n.Lk)("div",{class:"board-wrapper",style:(0,C.Tr)({backgroundColor:P.value?"#ffffff":"#000000"})},[(0,n.bF)(w,{ref_key:"stageRef",ref:i,config:O,onMousedown:ue,onMousemove:Ae,onMouseup:fe,onTouchstart:ue,onTouchmove:Ae,onTouchend:fe,onContextmenu:H,style:{"overflow-x":"hidden","overflow-y":"hidden",border:"none !important"}},{default:(0,n.k6)(()=>[(0,n.bF)(A,{ref_key:"layerRef",ref:j},{default:(0,n.k6)(()=>[(0,n.bF)(s,{ref_key:"imageRef",ref:D,config:de},null,512)]),_:1},512)]),_:1},512)],4)])}}};const pa=(0,h.A)(Aa,[["__scopeId","data-v-2147f20c"]]);var ga=pa;const va={class:"d-block justify-content-center align-items-center mt-4"},ha={key:0,class:"alert alert-danger text-center custom-alert p-2",role:"alert",style:{"max-width":"70vw",width:"440px",position:"fixed",top:"4rem",left:"50%",transform:"translateX(-50%)","z-index":"10000","font-size":"0.95rem","border-radius":"0.7rem","box-shadow":"0 2px 8px rgba(220,53,69,0.10)",background:"#222",border:"1.5px solid #dc3545"}},ma={class:"alert-content",style:{"padding-top":"0.2rem"}},wa={style:{color:"#ffc107","font-size":"1rem"}},ba={key:0,class:"spinner-overlay d-flex justify-content-center align-items-center"},ka={class:"popup-card mt-4"},ya={class:"mb-3 text-white mt-5"},xa={style:{color:"yellow","font-weight":"bold","margin-bottom":"4rem"}},La={class:"d-flex justify-content-center mt-4 mb-3"};var Ca={__name:"RestorePassword",setup(e){const t=(0,r.KR)(new URL(window.location.href).pathname.split("/")[2]),o=(0,r.KR)(null),l=(0,r.KR)(null),i=(0,r.KR)(null),s=(0,r.KR)(null),c=(0,r.KR)(null),d=(0,r.KR)(null),u=(0,r.KR)(null),f=(0,r.KR)(null),A=(0,r.KR)(null),p=(0,r.KR)(!1);function g(){return`${o.value}${l.value}${i.value}${s.value}${c.value}`}function v(e){2===e&&d.value&&d.value.focus(),3===e&&u.value&&u.value.focus(),4===e&&f.value&&f.value.focus(),5===e&&A.value&&A.value.focus()}async function h(){try{const e=await fetch(`${E}/restore_password/${t.value}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},body:JSON.stringify({code:g()}),credentials:"include"}),o=await e.json();200===o.status?alert("Code verified! You may now reset your password."):alert("Invalid code. Please try again.")}catch(e){console.log(e)}}return(0,n.sV)(()=>{const e=(0,r.KR)(new URL(window.location.href).pathname.split("/")[2]);async function t(){try{const t=await fetch(`${E}/restore_password/${e.value}`,{method:"GET",headers:{"X-CSRFToken":B("csrftoken")},credentials:"include"}),o=await t.json();return 200===o.status}catch(t){console.log(t),window.location.href="/signin"}}t()}),(e,g)=>((0,n.uX)(),(0,n.CE)("div",va,[g[12]||(g[12]=(0,n.Lk)("h1",{class:"my-2",style:{color:"yellow"}},"Password Restoration",-1)),(0,n.bF)(a.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[e.invalid?((0,n.uX)(),(0,n.CE)("div",ha,[(0,n.Lk)("button",{onClick:g[0]||(g[0]=t=>e.invalid=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"#dc3545",color:"#fff",border:"none",width:"1.5rem",height:"1.5rem","font-size":"1.1rem","margin-top":"-0.3rem","margin-right":"-0.3rem","line-height":"1.1rem"}},"×"),(0,n.Lk)("div",ma,[(0,n.Lk)("strong",wa,(0,C.v_)(e.message),1),g[10]||(g[10]=(0,n.Lk)("div",{style:{color:"#fff","margin-top":"0.2rem","font-size":"0.92rem"}},"Please try again.",-1))])])):(0,n.Q3)("",!0)]),_:1}),p.value?((0,n.uX)(),(0,n.CE)("div",ba,[(0,n.bF)((0,r.R1)(je.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.Lk)("div",ka,[(0,n.Lk)("h4",ya,[g[11]||(g[11]=(0,n.eW)("Enter Verification Code sent to ",-1)),(0,n.Lk)("span",xa,(0,C.v_)(t.value),1)]),(0,n.Lk)("div",La,[(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"1",onInput:g[1]||(g[1]=e=>v(2)),"onUpdate:modelValue":g[2]||(g[2]=e=>o.value=e),ref:"ZeroInput",class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric",autocomplete:"off",autofocus:""},null,544),[[a.Jo,o.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"2",onInput:g[3]||(g[3]=e=>v(3)),"onUpdate:modelValue":g[4]||(g[4]=e=>l.value=e),ref_key:"OneInput",ref:d,class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric",autocomplete:"off"},null,544),[[a.Jo,l.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"3",onInput:g[5]||(g[5]=e=>v(4)),"onUpdate:modelValue":g[6]||(g[6]=e=>i.value=e),ref_key:"TwoInput",ref:u,class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric",autocomplete:"off"},null,544),[[a.Jo,i.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"4",onInput:g[7]||(g[7]=e=>v(5)),"onUpdate:modelValue":g[8]||(g[8]=e=>s.value=e),ref_key:"ThreeInput",ref:f,class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric",autocomplete:"off"},null,544),[[a.Jo,s.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"5",class:"code-input","onUpdate:modelValue":g[9]||(g[9]=e=>c.value=e),ref_key:"FourInput",ref:A,type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,512),[[a.Jo,c.value]])]),(0,n.Lk)("button",{class:"btn btn-primary",onClick:h},"Verify")])]))}};const Ea=Ca;var Ra=Ea;const Ba={class:"container"},Da=["src"];function ja(e,t,o,a,l,r){return(0,n.uX)(),(0,n.CE)("div",Ba,[(0,n.Lk)("img",{src:l.logo,alt:"CoDraw Logo",class:"img-fluid my-4 rounded",style:{"max-height":"200px"}},null,8,Da),t[0]||(t[0]=(0,n.Fv)('<h1 class="text-white mt-4">About CoDraw</h1><section class="mt-3"><p class="text-white"> CoDraw is an innovative platform designed to facilitate collaborative drawing and creativity. Whether you&#39;re an artist looking to share your work or someone who enjoys doodling with friends, CoDraw provides the perfect space to connect and create together. </p><p class="text-white"> Our mission is to bring people together through art, fostering a community where creativity knows no bounds. With a variety of tools and features, CoDraw makes it easy for users of all skill levels to participate in collaborative projects. </p><p class="text-white"> Join us today and start creating amazing artwork with others! If you arre intrested in contributing to the development of CoDraw, check out our <a href="https://github.com/Damian0563/CoDraw" class="text-yellow">Github</a></p></section>',2))])}var Ia={name:"LearnMore",data(){return{logo:i}}};const Pa=(0,h.A)(Ia,[["render",ja]]);var Ta=Pa,Ka=o(7107),Qa=o(6188),Sa=o(7875);Ka.Yv.add(Qa.fyG,Qa.zm_,Qa.rC2,Qa.U23,Qa.yek,Qa.X46,Sa.Vz1);const za=[{path:"/",component:Ue},{path:"/signup",component:ae},{path:"/signin",component:N},{path:"/codraw",component:Qt},{path:"/codraw/settings",component:Mt},{path:"/codraw/account/:username",component:Oo},{path:"/board/:id/:room",component:ga},{path:"/demo",component:Ne},{path:"/learn-more",component:Ta},{path:"/restore/:mail",component:Ra}],Ja=(0,L.aE)({history:(0,L.LA)(),routes:za});(0,a.Ef)(y).use(Ja).use(x.A).component("font-awesome-icon",_e.gc).mount("#app")}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,o),l.loaded=!0,l.exports}o.m=e,function(){var e=[];o.O=function(t,a,n,l){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],n=e[d][1],l=e[d][2];for(var i=!0,s=0;s<a.length;s++)(!1&l||r>=l)&&Object.keys(o.O).every(function(e){return o.O[e](a[s])})?a.splice(s--,1):(i=!1,l<r&&(r=l));if(i){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,n,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,l,r=a[0],i=a[1],s=a[2],c=0;if(r.some(function(t){return 0!==e[t]})){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(s)var d=s(o)}for(t&&t(a);c<r.length;c++)l=r[c],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(d)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],function(){return o(4288)});a=o.O(a)})();
//# sourceMappingURL=app.a328d5fe.js.map