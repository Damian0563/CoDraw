(function(){"use strict";var e={205:function(e,t,a){var o=a(3751),n=a(641);function i(e,t,a,o,i,l){const r=(0,n.g2)("NavBar"),s=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)(n.FK,null,[e.$route.meta.showNav?((0,n.uX)(),(0,n.Wv)(r,{key:0})):(0,n.Q3)("",!0),(0,n.bF)(s)],64)}var l=a(953),r=a.p+"img/logo.10045025.webp";const s={class:"navbar navbar-expand-lg navbar-dark hero-background shadow p-3",style:{"background-color":"black !important"}},c={class:"container-fluid"},d=["src"],u={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasNavbar",style:{"background-color":"black","max-width":"80vw"}},p={class:"offcanvas-body"},v={class:"navbar-nav ms-auto mb-2 mb-lg-0 d-flex flex-column flex-lg-row align-items-center"},f={class:"nav-item my-2 my-lg-0 mx-2"},h={class:"nav-item my-2 my-lg-0 mx-2"},g={name:"NavBar",props:{msg:String}};var m=Object.assign(g,{setup(e){const t=()=>{const e=document.getElementById("offcanvasNavbar"),t=bootstrap.Offcanvas.getInstance(e);t&&t.hide()};return(e,a)=>{const o=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)("nav",s,[(0,n.Lk)("div",c,[(0,n.bF)(o,{class:"navbar-brand d-flex align-items-center",to:"/"},{default:(0,n.k6)(()=>[(0,n.Lk)("img",{src:(0,l.R1)(r),alt:"logo",loading:"lazy",decoding:"async",height:"60",class:"me-2"},null,8,d),a[0]||(a[0]=(0,n.Lk)("span",null,"CoDraw",-1))]),_:1}),a[4]||(a[4]=(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasNavbar","aria-controls":"offcanvasNavbar"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,n.Lk)("div",u,[a[3]||(a[3]=(0,n.Lk)("div",{class:"offcanvas-header border-bottom border-secondary"},[(0,n.Lk)("h5",{class:"offcanvas-title text-white",id:"offcanvasNavbarLabel"},"Menu"),(0,n.Lk)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),(0,n.Lk)("div",p,[(0,n.Lk)("ul",v,[(0,n.Lk)("li",f,[(0,n.bF)(o,{class:"btn btn-signup w-100",to:"/signup",onClick:t},{default:(0,n.k6)(()=>[...a[1]||(a[1]=[(0,n.eW)("Sign up",-1)])]),_:1})]),(0,n.Lk)("li",h,[(0,n.bF)(o,{class:"btn btn-signin w-100",to:"/signin",onClick:t},{default:(0,n.k6)(()=>[...a[2]||(a[2]=[(0,n.eW)("Sign in",-1)])]),_:1})])])])])])])}}}),w=a(6262);const y=(0,w.A)(m,[["__scopeId","data-v-e6cab236"]]);var b=y,k={name:"App",components:{NavBar:b}};const x=(0,w.A)(k,[["render",i]]);var L=x,S=a(5916),C=a(1029),T=(a(9112),a(3110),a(4979),a(33));const R="http://localhost:8000",O="ws://localhost:8000/ws/socket",N="373387543374-fsreaovr782e5faifv2f7128jq6ch4n3";function E(e){let t=null;if(document.cookie&&""!==document.cookie){const a=document.cookie.split(";");for(let o=0;o<a.length;o++){const n=a[o].trim();if(n.substring(0,e.length+1)===e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}}return t}var F=a(5279);const _={class:"footer-section"},z={class:"container text-center"},D={class:"row justify-content-center"},j={class:"col-md-2 mb-3 footer-links"},W={class:"col-md-3 mb-3 footer-social"},X={class:"social-icons"},P={href:"https://github.com/Damian0563/CoDraw"},J={class:"footer-copy"};function K(e,t,a,o,i,l){const r=(0,n.g2)("router-link"),s=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)("footer",_,[(0,n.Lk)("div",z,[(0,n.Lk)("div",D,[t[4]||(t[4]=(0,n.Lk)("div",{class:"col-md-4 mb-3 footer-brand"},[(0,n.Lk)("h3",{class:"footer-title"},"CoDraw"),(0,n.Lk)("p",{class:"footer-desc"}," Collaborative drawing made simple, fast, and fun. Create together from anywhere. ")],-1)),(0,n.Lk)("div",j,[t[2]||(t[2]=(0,n.Lk)("h5",null,"Explore",-1)),(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[(0,n.bF)(r,{to:"/"},{default:(0,n.k6)(()=>[...t[0]||(t[0]=[(0,n.eW)("Home",-1)])]),_:1})]),(0,n.Lk)("li",null,[(0,n.bF)(r,{to:"/signup"},{default:(0,n.k6)(()=>[...t[1]||(t[1]=[(0,n.eW)("Get Started",-1)])]),_:1})])])]),(0,n.Lk)("div",W,[t[3]||(t[3]=(0,n.Lk)("h5",null,"Follow Us",-1)),(0,n.Lk)("div",X,[(0,n.Lk)("a",P,[(0,n.bF)(s,{icon:["fab","github"]})])])])]),t[5]||(t[5]=(0,n.Lk)("hr",{class:"footer-divider"},null,-1)),(0,n.Lk)("p",J," © "+(0,T.v_)((new Date).getFullYear())+" CoDraw. All rights reserved. ",1)])])}var A={name:"FoOter"};const $=(0,w.A)(A,[["render",K],["__scopeId","data-v-0c2a4688"]]);var I=$;const U={key:0,class:"alert alert-danger text-center custom-alert p-2",role:"alert",style:{"max-width":"70vw",width:"440px",position:"fixed",top:"4rem",left:"50%",transform:"translateX(-50%)","z-index":"10000","font-size":"0.95rem","border-radius":"0.7rem","box-shadow":"0 2px 8px rgba(220,53,69,0.10)",background:"#222",border:"1.5px solid #dc3545"}},V={class:"alert-content",style:{"padding-top":"0.2rem"}},B={style:{color:"#ffc107","font-size":"1rem"}},q={key:0,class:"alert alert-success text-center custom-alert p-2",role:"alert",style:{"max-width":"70vw",width:"440px",position:"fixed",top:"4rem",left:"50%",transform:"translateX(-50%)","z-index":"10000","font-size":"0.95rem","border-radius":"0.7rem","box-shadow":"0 2px 8px rgba(40,167,69,0.10)",background:"#222",border:"1.5px solid #28a745"}},M={class:"alert-content",style:{"padding-top":"0.2rem"}},Y={style:{color:"#28a745","font-size":"1rem"}},Q={key:0,class:"spinner-overlay d-flex justify-content-center align-items-center"},G={key:0,class:"recovery-container",role:"alert"},H={class:"d-flex justify-content-center pt-5 mb-5 hero-background"},Z={class:"card p-3 shadow-lg w-60 mx-5",style:{"max-width":"1000px",width:"100%",background:"white",border:"none","min-height":"unset"}},ee={class:"mb-2"},te={class:"mb-2"},ae={class:"form-check d-flex align-items-center mb-3 w-100 flex-wrap",style:{padding:"0 !important",gap:"1.2rem"}},oe={class:"text-center mt-2"},ne={class:"text-center mt-2"};var ie={__name:"SignIn",setup(e){let t=(0,l.KR)(""),a=(0,l.KR)(!1),i=(0,l.KR)(!1);const r=(0,l.KR)(!1),s=(0,l.KR)(""),c=(0,l.KR)(""),d=(0,l.KR)(!1),u=(0,l.KR)(!1),p=(0,l.KR)(!1),v=(0,l.KR)(null);async function f(e){try{const o=e.currentTarget;if(d.value=!0,!o.checkValidity())return e.preventDefault(),void e.stopPropagation();u.value=!1,r.value=!0,a.value=!1,p.value=!1;const n=await fetch(`${R}/restore_password/${s.value}`,{method:"GET",headers:{"X-CSRFToken":E("csrftoken")},credentials:"include"}),i=await n.json();r.value=!1,200===i.status?(t.value="Recovery link sent, its validity is 5 minutes! Please check your email.",p.value=!0):(t.value="This email is not registered. Please check your email address.",a.value=!0)}catch(o){console.error(o),r.value=!1,t.value="An error occurred while sending reset email. Please try again later.",a.value=!0}}async function h(e){e.preventDefault();const o=v.value;if(o.classList.add("was-validated"),o.checkValidity()){r.value=!0;try{const e=E("csrftoken"),o=await fetch(`${R}/signin`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},credentials:"include",body:JSON.stringify({mail:s.value,password:c.value,remember:i.value})}),n=await o.json();200===n.status?window.location.href="/codraw":(a.value=!0,t.value="Invalid credentials. Please try again."),r.value=!1}catch(e){console.error(e),a.value=!0,t.value="An error occurred while signing in.",r.value=!1}}else e.stopPropagation()}async function g(){try{const e=E("csrftoken"),t=await fetch(`${R}/signin`,{method:"GET",headers:{"X-CSRFToken":e},credentials:"include"}),a=await t.json();300===a.status&&(window.location.href="/codraw")}catch(e){console.error(e)}}async function m(e){try{r.value=!0;const o=E("csrftoken"),n=JSON.parse(atob(e.credential.split(".")[1])),i=await fetch(`${R}/google-signin`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":o},credentials:"include",body:JSON.stringify({token:n.sub,email:n.email,name:n.name})}),l=await i.json();console.log(l.status),200===l.status?window.location.href="/codraw":401===l.status?(a.value=!0,t.value="Google sign-in failed, the following email is already registered. Did you forget your password?"):(a.value=!0,t.value="Google sign-in failed. Please sign up first.")}catch(o){a.value=!0,t.value="An error occurred during Google sign-in."}finally{r.value=!1}}return(0,n.sV)(()=>{window.google.accounts.id.initialize({client_id:`${N}.apps.googleusercontent.com`,callback:m}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large"}),g()}),(e,g)=>{const m=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[(0,l.R1)(a)?((0,n.uX)(),(0,n.CE)("div",U,[(0,n.Lk)("button",{onClick:g[0]||(g[0]=e=>(0,l.i9)(a)?a.value=!1:a=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"#dc3545",color:"#fff",border:"none",width:"1.5rem",height:"1.5rem","font-size":"1.1rem","margin-top":"-0.3rem","margin-right":"-0.3rem","line-height":"1.1rem"}},"×"),(0,n.Lk)("div",V,[(0,n.Lk)("strong",B,(0,T.v_)((0,l.R1)(t)),1)])])):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[p.value?((0,n.uX)(),(0,n.CE)("div",q,[(0,n.Lk)("button",{onClick:g[1]||(g[1]=e=>p.value=!1),class:"float-end",style:{background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer"}},"✕"),(0,n.Lk)("div",M,[(0,n.Lk)("strong",Y,(0,T.v_)((0,l.R1)(t)),1)])])):(0,n.Q3)("",!0)]),_:1}),r.value?((0,n.uX)(),(0,n.CE)("div",Q,[(0,n.bF)((0,l.R1)(F.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[u.value?((0,n.uX)(),(0,n.CE)("div",G,[(0,n.Lk)("button",{onClick:g[2]||(g[2]=e=>u.value=!1),class:"float-end",style:{background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer"}},"✕"),g[11]||(g[11]=(0,n.Lk)("h2",{class:"recovery-title"},"Input your email, recovery link will be sent to you!",-1)),(0,n.Lk)("form",{class:(0,T.C4)(["mb-3 needs-validation",{"was-validated":d.value}]),novalidate:"",onSubmit:(0,o.D$)(f,["prevent"])},[g[8]||(g[8]=(0,n.Lk)("label",{for:"emailInput",class:"form-label recovery-label"},"Email Address",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",class:"form-control form-control-lg mb-3 recovery-input",placeholder:"e.g. name@example.com",required:"","onUpdate:modelValue":g[3]||(g[3]=e=>s.value=e)},null,512),[[o.Jo,s.value]]),g[9]||(g[9]=(0,n.Lk)("div",{class:"invalid-feedback mb-2 recovery-invalid-feedback"}," Please specify a valid email address. ",-1)),g[10]||(g[10]=(0,n.Lk)("button",{type:"submit",class:"btn recovery-btn btn-lg w-100 shadow-sm mt-3"}," Send Recovery Link ",-1))],34)])):(0,n.Q3)("",!0)]),_:1}),(0,n.Lk)("div",H,[(0,n.Lk)("div",Z,[g[21]||(g[21]=(0,n.Lk)("h2",{class:"text-center mb-3 text-black"},"Sign In",-1)),(0,n.Lk)("form",{ref_key:"formRef",ref:v,onSubmit:h,class:"needs-validation",novalidate:""},[(0,n.Lk)("div",ee,[g[12]||(g[12]=(0,n.Lk)("label",{for:"email",class:"form-label text-black text-start w-100",autocomplete:"on"},"Email address",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email","onUpdate:modelValue":g[4]||(g[4]=e=>s.value=e),class:"form-control bg-dark text-white border-secondary",id:"email",placeholder:"Enter email",required:""},null,512),[[o.Jo,s.value]]),g[13]||(g[13]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify email. ",-1))]),(0,n.Lk)("div",te,[g[14]||(g[14]=(0,n.Lk)("label",{for:"password",class:"form-label text-black text-start w-100",autocomplete:"on"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":g[5]||(g[5]=e=>c.value=e),class:"form-control bg-dark text-white border-secondary",id:"password",placeholder:"Enter password",required:""},null,512),[[o.Jo,c.value]]),g[15]||(g[15]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify password. ",-1))]),(0,n.Lk)("div",ae,[g[16]||(g[16]=(0,n.Lk)("label",{class:"form-check-label text-black fw-medium mb-0",for:"rememberMe"}," Remember me ",-1)),(0,n.Lk)("input",{type:"checkbox",ref_key:"ticked",ref:i,onClick:g[6]||(g[6]=e=>(0,l.i9)(i)?i.value=!(0,l.R1)(i):i=!(0,l.R1)(i)),id:"rememberMe",style:{"accent-color":"#ffc107",margin:"0 !important",width:"1.25rem",height:"1.25rem"}},null,512)]),g[17]||(g[17]=(0,n.Lk)("button",{id:"sign",type:"submit",class:"btn btn-success w-50 mt-2",style:{"background-color":"yellow",color:"black"}},"Sign In",-1)),g[18]||(g[18]=(0,n.Lk)("div",{class:"d-flex justify-content-center mt-2"},[(0,n.Lk)("div",{id:"google-signin-button",class:"g-signin2"})],-1))],544),(0,n.Lk)("div",oe,[g[20]||(g[20]=(0,n.Lk)("span",{class:"text-secondary"},"Do not have an account?",-1)),(0,n.bF)(m,{to:"/signup",class:"ms-2 text-info"},{default:(0,n.k6)(()=>[...g[19]||(g[19]=[(0,n.eW)("Sign up",-1)])]),_:1})]),(0,n.Lk)("div",ne,[(0,n.Lk)("text",{onClick:g[7]||(g[7]=e=>u.value=!0),class:"ms-2 text-info",style:{cursor:"pointer"}},"Forgot your password?")])])]),(0,n.bF)(I)],64)}}};const le=(0,w.A)(ie,[["__scopeId","data-v-1f6b470a"]]);var re=le;const se={key:0,class:"alert alert-danger text-center custom-alert p-2",role:"alert",style:{"max-width":"70vw",width:"440px",position:"fixed",top:"4rem",left:"50%",transform:"translateX(-50%)","z-index":"10000","font-size":"0.95rem","border-radius":"0.7rem","box-shadow":"0 2px 8px rgba(220,53,69,0.10)",background:"#222",border:"1.5px solid #dc3545"}},ce={class:"alert-content",style:{"padding-top":"0.2rem"}},de={style:{color:"#ffc107","font-size":"1rem"}},ue={key:0,class:"overlay"},pe={class:"popup-card"},ve={class:"d-flex justify-content-center mb-3"},fe={key:1,class:"spinner-overlay d-flex justify-content-center align-items-center"},he={class:"d-flex justify-content-center pt-5 mb-5 hero-background"},ge={class:"card p-3 shadow-lg w-60 mx-5",style:{"max-width":"1000px",width:"100%",background:"white",border:"none","min-height":"unset"}},me={class:"mb-2"},we={class:"mb-2"},ye={class:"mb-2"},be={class:"text-center mt-2"};var ke={__name:"SignUp",setup(e){let t=(0,l.KR)(!1),a=(0,l.KR)(null),i=(0,l.KR)(!1),r=(0,l.KR)("");const s=(0,l.KR)(!1),c=(0,l.KR)(""),d=(0,l.KR)(""),u=(0,l.KR)(""),p=(0,l.KR)(null),v=(0,l.KR)(null),f=(0,l.KR)(null),h=(0,l.KR)(null),g=(0,l.KR)(null),m=(0,l.KR)(""),w=(0,l.KR)(""),y=(0,l.KR)(""),b=(0,l.KR)(""),k=(0,l.KR)("");async function x(){try{const e=E("csrftoken"),t=await fetch(`${R}/signup`,{method:"GET",headers:{"X-CSRFToken":e},credentials:"include"}),a=await t.json();300===a.status&&"/codraw"!==window.location.pathname&&(window.location.href="/codraw")}catch(e){console.error(e)}}async function L(e){e.preventDefault();const o=a.value;if(o.classList.add("was-validated"),!o.checkValidity())return void e.stopPropagation();const l=E("csrftoken"),s=c.value,v=d.value,f=u.value;try{const e=await fetch(`${R}/signup`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":l},body:JSON.stringify({username:s,mail:f,password:v}),credentials:"include"}),a=await e.json();200===a.status?(t.value=!0,await(0,n.dY)(),p.value.focus()):(i.value=!0,r.value="Account already registered under this email. Did you forget your password?")}catch(e){console.error(e)}}function S(e,t){!e.key.startsWith("Arrow")&&"0123456789".includes(e.key)&&("Backspace"===e.key||"Del"==e.key?3!==t||w.value?5!==t||b.value?4!==t||y.value?6!==t||k.value||h.value.focus():v.value.focus():f.value.focus():p.value.focus():2===t&&v.value?v.value.focus():3===t&&f.value?f.value.focus():4===t&&h.value?h.value.focus():5===t&&g.value&&g.value.focus())}function C(){return`${m.value}${w.value}${y.value}${b.value}${k.value}`}async function O(){const e=E("csrftoken"),a=c.value,o=u.value,n=await fetch(`${R}/verify`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},body:JSON.stringify({username:a,mail:o,code:C()})}),l=await n.json();200===l.status?window.location.href="/codraw":(t.value=!1,i.value=!0,m.value="",w.value="",y.value="",b.value="",k.value="",r.value="Invalid verification code. Please try again- new verification code has been sent.")}async function _(e){try{s.value=!0;const t=E("csrftoken"),a=JSON.parse(atob(e.credential.split(".")[1])),o=await fetch(`${R}/google-signup`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},credentials:"include",body:JSON.stringify({token:a.sub,email:a.email,name:a.name})}),n=await o.json();300===n.status?window.location.href="/codraw":(i.value=!0,r.value="Google sign-up failed. An account with this email already exists. Did you forget your password?")}catch(t){i.value=!0,r.value="An error occurred during Google sign-up."}finally{s.value=!1}}return x(),(0,n.sV)(()=>{s.value=!0,window.google.accounts.id.initialize({client_id:`${N}.apps.googleusercontent.com`,callback:_}),window.google.accounts.id.renderButton(document.getElementById("google-signup-button"),{theme:"outline",size:"large",text:"signup"}),s.value=!1}),(e,x)=>{const C=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[(0,l.R1)(i)?((0,n.uX)(),(0,n.CE)("div",se,[(0,n.Lk)("button",{onClick:x[0]||(x[0]=e=>(0,l.i9)(i)?i.value=!1:i=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"#dc3545",color:"#fff",border:"none",width:"1.5rem",height:"1.5rem","font-size":"1.1rem","margin-top":"-0.3rem","margin-right":"-0.3rem","line-height":"1.1rem"}},"×"),(0,n.Lk)("div",ce,[(0,n.Lk)("strong",de,(0,T.v_)((0,l.R1)(r)),1),x[15]||(x[15]=(0,n.Lk)("div",{style:{color:"#fff","margin-top":"0.2rem","font-size":"0.92rem"}},"Please try again.",-1))])])):(0,n.Q3)("",!0)]),_:1}),(0,l.R1)(t)?((0,n.uX)(),(0,n.CE)("div",ue,[(0,n.Lk)("div",pe,[(0,n.Lk)("button",{onClick:x[1]||(x[1]=e=>(0,l.i9)(t)?t.value=!1:t=!1),"aria-label":"Close",class:"float-end",style:{background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer"}},"✕"),x[16]||(x[16]=(0,n.Lk)("h4",{class:"mb-3"},"Enter Verification Code",-1)),(0,n.Lk)("div",ve,[(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"1",onKeyup:x[2]||(x[2]=e=>S(e,2)),ref_key:"ZeroInput",ref:p,"onUpdate:modelValue":x[3]||(x[3]=e=>m.value=e),class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,544),[[o.Jo,m.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"2",onKeyup:x[4]||(x[4]=e=>S(e,3)),"onUpdate:modelValue":x[5]||(x[5]=e=>w.value=e),class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric",ref_key:"OneInput",ref:v},null,544),[[o.Jo,w.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"3",onKeyup:x[6]||(x[6]=e=>S(e,4)),"onUpdate:modelValue":x[7]||(x[7]=e=>y.value=e),ref_key:"TwoInput",ref:f,class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,544),[[o.Jo,y.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"4",onKeyup:x[8]||(x[8]=e=>S(e,5)),"onUpdate:modelValue":x[9]||(x[9]=e=>b.value=e),ref_key:"ThreeInput",ref:h,class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,544),[[o.Jo,b.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"5",onKeyup:x[10]||(x[10]=e=>S(e,6)),class:"code-input","onUpdate:modelValue":x[11]||(x[11]=e=>k.value=e),ref_key:"FourInput",ref:g,type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,544),[[o.Jo,k.value]])]),(0,n.Lk)("button",{class:"btn btn-primary w-100",onClick:O},"Verify")])])):(0,n.Q3)("",!0),s.value?((0,n.uX)(),(0,n.CE)("div",fe,[(0,n.bF)((0,l.R1)(F.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.Lk)("div",he,[(0,n.Lk)("div",ge,[x[26]||(x[26]=(0,n.Lk)("h2",{class:"text-center mb-3 text-black"},"Sign Up",-1)),(0,n.Lk)("form",{ref_key:"formRef",ref:a,onSubmit:L,class:"needs-validation",novalidate:""},[(0,n.Lk)("div",me,[x[17]||(x[17]=(0,n.Lk)("label",{for:"username",class:"form-label text-black text-start w-100"},"Username",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":x[12]||(x[12]=e=>c.value=e),type:"text",class:"form-control bg-dark text-white border-secondary",id:"username",placeholder:"Enter username",style:{color:"white"},required:""},null,512),[[o.Jo,c.value]]),x[18]||(x[18]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify username. ",-1))]),(0,n.Lk)("div",we,[x[19]||(x[19]=(0,n.Lk)("label",{for:"email",class:"form-label text-black text-start w-100"},"Email address",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":x[13]||(x[13]=e=>u.value=e),type:"email",class:"form-control bg-dark text-white border-secondary",id:"email",placeholder:"Enter email",required:""},null,512),[[o.Jo,u.value]]),x[20]||(x[20]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify email. ",-1))]),(0,n.Lk)("div",ye,[x[21]||(x[21]=(0,n.Lk)("label",{for:"password",class:"form-label text-black text-start w-100"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":x[14]||(x[14]=e=>d.value=e),type:"password",class:"form-control bg-dark text-white border-secondary",id:"password",placeholder:"Enter password",required:""},null,512),[[o.Jo,d.value]]),x[22]||(x[22]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify password. ",-1))]),x[23]||(x[23]=(0,n.Lk)("button",{id:"sign",class:"btn btn-success w-50 mt-2",type:"submit",style:{"background-color":"yellow",color:"black"}},"Sign Up",-1))],544),x[27]||(x[27]=(0,n.Lk)("div",{class:"d-flex justify-content-center mt-2"},[(0,n.Lk)("div",{id:"google-signup-button",class:"g-signup2"})],-1)),(0,n.Lk)("div",be,[x[25]||(x[25]=(0,n.Lk)("span",{class:"text-secondary"},"Already have an account?",-1)),(0,n.bF)(C,{to:"/signin",class:"ms-2 text-info"},{default:(0,n.k6)(()=>[...x[24]||(x[24]=[(0,n.eW)("Sign In",-1)])]),_:1})])])]),(0,n.bF)(I)],64)}}};const xe=(0,w.A)(ke,[["__scopeId","data-v-47f7bfd5"]]);var Le=xe;const Se={class:"hero-background"},Ce={class:"d-flex align-items-center justify-content-center gap-5 flex-wrap"},Te={class:"hero-subtitle mb-0 mx-2"},Re={ref:"typewriterText",class:"typewriter-text"},Oe={class:"features-section"},Ne={class:"container"},Ee={class:"row justify-content-center"},Fe={class:"card-body text-center"},_e={class:"card-title mt-3"},ze={class:"card-text"},De={id:"about",href:"#about",class:"about-sec","aria-label":"About codraw"},je={class:"container"},We={class:"row align-items-center"},Xe={class:"col-md-6 about-text scroll-reveal"},Pe={class:"col-md-6 text-center about-visual scroll-reveal",style:{"transition-delay":"200ms"}},Je=["src"],Ke={class:"faq-section","aria-label":"Frequently Asked Questions"},Ae={class:"container"},$e={class:"row justify-content-center"},Ie={class:"col-lg-8"},Ue={class:"accordion",id:"faqAccordion"},Ve=["id"],Be=["data-bs-target","aria-expanded","aria-controls"],qe=["id","aria-labelledby"],Me={class:"accordion-body faq-body"};function Ye(e,t,a,o,i,l){const r=(0,n.g2)("font-awesome-icon"),s=(0,n.g2)("router-link"),c=(0,n.g2)("FoOter");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",Se,[t[2]||(t[2]=(0,n.Lk)("h1",{class:"hero-title"},"CoDraw",-1)),(0,n.Lk)("div",Ce,[(0,n.bF)(r,{icon:["fa","paintbrush"],class:"feature-icon secondary-floating-icon"}),(0,n.bF)(r,{icon:["fa","feather-pointed"],class:"feature-icon hero-floating-icon"}),(0,n.Lk)("p",Te,[(0,n.Lk)("span",Re,null,512),t[0]||(t[0]=(0,n.Lk)("span",{class:"cursor"},"|",-1))]),(0,n.bF)(r,{icon:["fa","pencil"],class:"feature-icon hero-floating-icon"}),(0,n.bF)(r,{icon:["fa","paint-roller"],class:"feature-icon secondary-floating-icon"})]),(0,n.bF)(s,{to:l.getDemoPath(),"aria-label":"Go to full demo"},{default:(0,n.k6)(()=>[...t[1]||(t[1]=[(0,n.Lk)("button",{class:"demo-btn mt-4","aria-label":"Try Full Demo"},"Start drawing now",-1)])]),_:1},8,["to"])]),(0,n.Lk)("div",Oe,[(0,n.Lk)("div",Ne,[(0,n.Lk)("div",Ee,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.features,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"col-md-3 mb-3",key:t},[(0,n.Lk)("div",{class:"card feature-card h-100 bg-dark text-white shadow-lg scroll-reveal",style:(0,T.Tr)({transitionDelay:250*t+"ms"})},[(0,n.Lk)("div",Fe,[(0,n.bF)(r,{icon:e.icon,class:"feature-icon"},null,8,["icon"]),(0,n.Lk)("h5",_e,(0,T.v_)(e.title),1),(0,n.Lk)("p",ze,(0,T.v_)(e.text),1)])],4)]))),128))])])]),t[7]||(t[7]=(0,n.Lk)("section",{class:"about-sec container text-center my-5 scroll-reveal","aria-label":"Our mission"},[(0,n.Lk)("text",{class:"about-title"},"No subscriptions, no hidden fees"),(0,n.Lk)("text",{class:"about-text",style:{"font-size":"2.5rem"}},"- just free for everyone, forever with at most respect to privacy.")],-1)),(0,n.Lk)("section",De,[(0,n.Lk)("div",je,[(0,n.Lk)("div",We,[(0,n.Lk)("div",Xe,[t[4]||(t[4]=(0,n.Lk)("h2",{class:"about-title"},"About CoDraw",-1)),t[5]||(t[5]=(0,n.Lk)("p",null,[(0,n.eW)(" CoDraw was built for creators who believe in collaboration. Whether you're sketching concepts, storyboarding, or designing together, CoDraw makes teamwork feel effortless and fun. "),(0,n.Lk)("br"),(0,n.Lk)("br"),(0,n.eW)(" With our real-time synchronization engine and a beautifully minimal interface, you can see every brushstroke from your teammates the moment it happens — no refreshes, no lag, just instant creativity. "),(0,n.Lk)("br"),(0,n.Lk)("br"),(0,n.eW)(" Our mission is simple: empower creativity by connecting people through shared imagination. ")],-1)),(0,n.bF)(s,{to:"/learn-more#learn-more","aria-label":"Learn More"},{default:(0,n.k6)(()=>[...t[3]||(t[3]=[(0,n.Lk)("button",{class:"about-btn mt-3","aria-label":"Learn More"},"Learn More",-1)])]),_:1})]),(0,n.Lk)("div",Pe,[(0,n.Lk)("img",{src:i.logo,alt:"Collaborative Drawing",class:"about-image",loading:"lazy",decoding:"async"},null,8,Je)])])])]),(0,n.Lk)("section",Ke,[(0,n.Lk)("div",Ae,[t[6]||(t[6]=(0,n.Lk)("h2",{class:"faq-title text-center mb-5 scroll-reveal"},"Frequently Asked Questions",-1)),(0,n.Lk)("div",$e,[(0,n.Lk)("div",Ie,[(0,n.Lk)("div",Ue,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.faqs,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"accordion-item faq-item scroll-reveal",key:t,style:(0,T.Tr)({transitionDelay:100*t+"ms"})},[(0,n.Lk)("h2",{class:"accordion-header",id:"heading"+t},[(0,n.Lk)("button",{class:"accordion-button faq-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse"+t,"aria-expanded":0===t?"true":"false","aria-controls":"collapse"+t},(0,T.v_)(e.question),9,Be)],8,Ve),(0,n.Lk)("div",{id:"collapse"+t,class:(0,T.C4)(["accordion-collapse collapse",{show:0===t}]),"aria-labelledby":"heading"+t,"data-bs-parent":"#faqAccordion"},[(0,n.Lk)("div",Me,(0,T.v_)(e.answer),1)],10,qe)],4))),128))])])])])]),(0,n.bF)(c)],64)}a(8111),a(7588);var Qe=a(2611),Ge={name:"HeRo",components:{FoOter:I},data(){return{logo:r,fullText:"Tired of emailing screenshots back and forth? Stop struggling with clunky tools and endless feedback loops. CoDraw lets you create together in real-time—no downloads, no subscriptions, just instant collaboration. Draw, brainstorm, and bring ideas to life with your team right now.",typewriterIndex:0,typewriterTimeout:null,features:[{title:"Modern and Slick",text:"A visually appealing interface designed for a seamless and enjoyable drawing experience.",icon:["fas","palette"]},{title:"Performance Oriented",text:"Optimized for speed and responsiveness, ensuring smooth collaboration in real time.",icon:["fas","bolt"]},{title:"Intuitive Design",text:"Easy-to-use tools and layout, making creativity accessible for everyone.",icon:["fas","lightbulb"]}],faqs:[{question:"Is CoDraw really free forever?",answer:"Yes! CoDraw is completely free with no subscriptions, hidden fees, or premium features. We believe creativity should be accessible to everyone."},{question:"How many people can collaborate on a single drawing?",answer:"CoDraw supports real-time collaboration for multiple users. There's no strict limit - you can invite as many friends as you'd like to join your drawing session."},{question:"Do I need to create an account to use CoDraw?",answer:"While you can try our demo without an account, creating one allows you to save your drawings, create private rooms, and collaborate with others."},{question:"What browsers does CoDraw support?",answer:"CoDraw works on all modern browsers including Chrome, Firefox, Safari, and Edge. We recommend using the latest version for the best experience."},{question:"Can I use CoDraw on mobile devices?",answer:"Yes! CoDraw is fully responsive and works great on tablets and mobile devices. Touch controls are optimized for drawing on smaller screens."}]}},mounted(){this.check(),this.startTypewriter(),this.initScrollReveal()},beforeUnmount(){this.typewriterTimeout&&clearTimeout(this.typewriterTimeout)},methods:{async check(){try{const e=E("csrftoken"),t=await fetch(`${R}/home`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":e},credentials:"include"}),a=await t.json();300===a.status&&"/codraw"!==window.location.pathname&&(window.location.href="/codraw")}catch(e){console.error(e)}},getDemoPath(){return`/demo/${(0,Qe.A)()}?origin=home`},startTypewriter(){const e=()=>{this.typewriterIndex<this.fullText.length&&this.$refs.typewriterText&&(this.$refs.typewriterText.textContent+=this.fullText.charAt(this.typewriterIndex),this.typewriterIndex++,this.typewriterTimeout=setTimeout(e,30))};this.typewriterTimeout=setTimeout(e,800)},initScrollReveal(){const e={root:null,rootMargin:"0px",threshold:.1},t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("revealed"),t.unobserve(e.target))})},e),a=document.querySelectorAll(".scroll-reveal");a.forEach(e=>t.observe(e))}}};const He=(0,w.A)(Ge,[["render",Ye],["__scopeId","data-v-665f1577"]]);var Ze=He,et=(a(8237),a.p+"img/sidebar.9317e3f0.webp");const tt={class:"sidebar-header d-flex flex-column align-items-center mb-4"},at=["src"],ot=["src"];var nt={__name:"SiDebar",setup(e){const t=(0,l.KR)(!1),a=E("csrftoken"),o=(0,l.KR)(!1),i=(0,l.KR)(!1),s=(0,l.KR)(""),c={"/codraw":!1,"/codraw/search":!1,"/codraw/account":!1};function d(){const e=window.location.pathname;"/codraw"===e?c["/codraw"]=!0:"/codraw/search"===e?c["/codraw/search"]=!0:e.startsWith("/codraw/account")&&(c["/codraw/account"]=!0)}async function u(){try{const e=await fetch(`${R}/log_out`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a},credentials:"include"}),t=await e.json();200===t.status&&(window.location.href="/")}catch(e){console.error(e)}}async function p(){try{const e=await fetch(`${R}/username`,{method:"GET",headers:{"X-CSRFToken":a},credentials:"include"}),t=await e.json();200==t.status?s.value=t.username:s.value="ERROR 404 NOT FOUND"}catch(e){console.error(e)}}function v(){i.value=window.innerWidth<=500}function f(e){if(i.value&&o.value){const t=e.target.closest(".sidebar");t||(o.value=!1)}}return(0,n.sV)(async()=>{t.value=!0,d(),v(),await p(),window.addEventListener("resize",v),window.addEventListener("click",f),t.value=!1}),(e,t)=>{const a=(0,n.g2)("font-awesome-icon"),d=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)("aside",{class:(0,T.C4)(["sidebar d-flex flex-column flex-shrink-0 p-3 text-bg-dark",{"sidebar-collapsed":!o.value,"sidebar-overlay":i.value&&o.value}])},[(0,n.Lk)("div",tt,[(0,n.Lk)("img",{loading:"lazy",alt:"sidebar",decoding:"async",class:(0,T.C4)(["toggle mb-3 align-self-end",{"align-self-center":!o.value}]),onClick:t[0]||(t[0]=e=>(i.value,o.value=!o.value)),src:(0,l.R1)(et),style:{cursor:"pointer",width:"2rem",height:"2rem"}},null,10,at),(0,n.Lk)("img",{src:(0,l.R1)(r),alt:"logo",loading:"lazy",decoding:"async",class:"logo mb-4 img-fluid rounded rounded-circle",style:{"max-height":"20vh"}},null,8,ot),(0,n.bF)(d,{to:"/codraw",class:(0,T.C4)(["nav-link rounded-3 p-3 account-link mb-3 text-center modern-tile",{"active-tile":c["/codraw"]}])},{default:(0,n.k6)(()=>[(0,n.bF)(a,{class:"mx-2 tile-icon",icon:["fas","home"]}),t[2]||(t[2]=(0,n.Lk)("span",{class:"tile-text"},"Start Page",-1))]),_:1},8,["class"]),(0,n.bF)(d,{to:`/codraw/account/${s.value}`,class:(0,T.C4)(["nav-link rounded-3 p-3 account-link mb-3 text-center modern-tile",{"active-tile":c["/codraw/account"]}])},{default:(0,n.k6)(()=>[(0,n.bF)(a,{class:"mx-2 tile-icon",icon:["fas","user"]}),t[3]||(t[3]=(0,n.Lk)("span",{class:"tile-text"},"My Account",-1))]),_:1},8,["to","class"]),(0,n.bF)(d,{to:"/codraw/search",class:(0,T.C4)(["nav-link rounded-3 p-3 account-link mb-3 text-center modern-tile",{"active-tile":c["/codraw/search"]}])},{default:(0,n.k6)(()=>[(0,n.bF)(a,{class:"mx-2 tile-icon",icon:["fas","search"]}),t[4]||(t[4]=(0,n.Lk)("span",{class:"tile-text"},"Search",-1))]),_:1},8,["class"]),(0,n.Lk)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=e=>u()),id:"out"},"Log out")])],2)}}};const it=(0,w.A)(nt,[["__scopeId","data-v-9b234cf8"]]);var lt=it,rt=a(8097);const st={class:"main-layout"},ct={class:"main-content flex-grow-1"},dt={class:"mb-4"},ut={id:"projects",class:"container"},pt=["onClick"],vt={class:"card-body d-flex flex-column card-with-preview"},ft={key:0,class:"preview-section"},ht={class:"preview-image-container"},gt=["src"],mt={class:"content-section"},wt={class:"card-title fw-bold mb-2"},yt={class:"card-text small"},bt={class:"card-footer"},kt={class:"text-start small"},xt={class:"d-flex justify-content-between small"},Lt={class:"text-start small"},St={key:0,class:"spinner-overlay"},Ct={name:"MaIn"};var Tt=Object.assign(Ct,{setup(e){const t=(0,l.KR)(!1),a=E("csrftoken"),o=(0,l.KR)([]),i=(0,l.KR)(""),r=(0,l.KR)({}),s=(0,l.KR)({});async function c(){try{const e=await fetch(`${R}/username`,{method:"GET",headers:{"X-CSRFToken":a},credentials:"include"}),t=await e.json();200==t.status?i.value=t.username:i.value="ERROR 404 NOT FOUND"}catch(e){console.error(e)}}async function d(){try{const e=await fetch(`${R}/codraw/`,{method:"GET",headers:{"X-CSRFToken":a},credentials:"include"}),t=await e.json();200!==t.status&&"/"!==window.location.pathname&&(window.location.href="/")}catch(e){console.error(e)}}const u=async()=>{try{const e=await fetch(`${R}/codraw/get_boards`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a},body:JSON.stringify({timezone:rt.c9.local().zoneName}),credentials:"include"}),t=await e.json();o.value=t.boards,r.value=t.images,s.value=t.boards.reduce((e,t)=>(e[t.room]=!1,e),{})}catch(e){console.error(e)}};async function p(e){try{const t=await fetch(`${R}/load`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a},credentials:"include",body:JSON.stringify({room:e})}),o=await t.json();200===o.status&&(window.location.href=`${o.url}?origin=default`)}catch(t){console.error(t)}}async function v(){try{const e=await fetch(`${R}/get_project_url`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":a},credentials:"include"}),t=await e.json();200===t.status?window.location.href=`${t.url}?origin=default`:console.log("error")}catch(e){console.error(e)}}return(0,n.sV)(async()=>{t.value=!0,await Promise.all([d(),u(),c()]),t.value=!1}),(e,a)=>{const i=(0,n.g2)("RouterView");return(0,n.uX)(),(0,n.CE)("div",st,[(0,n.bF)(lt),(0,n.Lk)("main",ct,[(0,n.bF)(i),a[4]||(a[4]=(0,n.Lk)("h1",{style:{color:"#ffc107"},class:"mb-4"},"Welcome to CoDraw!",-1)),(0,n.Lk)("div",dt,[(0,n.Lk)("div",ut,[(0,n.Lk)("div",{class:"card create-project-card my text-center",onClick:a[0]||(a[0]=e=>v())},[...a[1]||(a[1]=[(0,n.Lk)("div",{class:"card-body d-flex flex-column align-items-center justify-content-center"},[(0,n.Lk)("span",{class:"create-icon"},"+"),(0,n.Lk)("h5",{class:"card-title mt-2 mb-0"},"Create Project")],-1)])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.value,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"card project-card text-center",onClick:t=>p(e.room)},[(0,n.Lk)("div",vt,[r.value[e.room]&&!s.value[e.room]?((0,n.uX)(),(0,n.CE)("div",ft,[(0,n.Lk)("div",ht,[(0,n.Lk)("img",{src:r.value[e.room],class:"preview-image",alt:"Preview of board",loading:"lazy",decoding:"async"},null,8,gt)])])):(0,n.Q3)("",!0),(0,n.Lk)("div",mt,[(0,n.Lk)("h5",wt,(0,T.v_)(e.title),1),(0,n.Lk)("p",yt,(0,T.v_)(e.description),1),(0,n.Lk)("footer",bt,[(0,n.Lk)("div",kt,[(0,n.Lk)("span",null,[a[2]||(a[2]=(0,n.eW)("Visibility: ",-1)),(0,n.Lk)("span",null,(0,T.v_)(e.visibility),1)])]),(0,n.Lk)("div",xt,[(0,n.Lk)("span",null,[a[3]||(a[3]=(0,n.eW)("Views: ",-1)),(0,n.Lk)("span",null,(0,T.v_)(e.views),1)])]),(0,n.Lk)("div",Lt,[(0,n.Lk)("span",null,(0,T.v_)(e.modified),1)])])])])],8,pt))),128))])]),t.value?((0,n.uX)(),(0,n.CE)("div",St,[(0,n.bF)((0,l.R1)(F.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0)])])}}});const Rt=(0,w.A)(Tt,[["__scopeId","data-v-7b8f8203"]]);var Ot=Rt,Nt=(a(1701),a.p+"img/bin.16bd31d4.webp"),Et=a.p+"img/save.9ae805ea.webp",Ft=a.p+"img/edit.72b2dc1f.webp";const _t={key:0,class:"spinner-overlay"},zt={key:0,style:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)","z-index":"100",display:"flex","align-items":"center","justify-content":"center"}},Dt={style:{background:"#23272f",color:"#fff",padding:"32px 40px","border-radius":"16px","min-width":"320px","box-shadow":"0 8px 32px rgba(0,0,0,0.25)",position:"relative"}},jt={class:"main-layout"},Wt={class:"container flex-grow-1 d-flex flex-column mt-4 mt-md-5 align-items-start"},Xt={class:"fw-bold mb-4 mb-md-5 text-start",style:{color:"#ffc107"}},Pt={class:"boards-wrapper mt-2 justify-content-start"},Jt={class:"d-flex justify-content-end align-items-center gap-2"},Kt={key:0,class:"w-100"},At={class:"d-flex justify-content-end align-items-center gap-2"},$t=["onClick"],It=["onClick"],Ut=["src","onClick"],Vt=["src","onClick"],Bt=["src","onClick"],qt={key:0},Mt=["onUpdate:modelValue"],Yt=["onUpdate:modelValue"],Qt={key:1},Gt=["onUpdate:modelValue"],Ht=["onUpdate:modelValue"],Zt={key:1,class:"w-100"},ea=["onClick"],ta=["onUpdate:modelValue"],aa=["onUpdate:modelValue"],oa={class:"card-body text-white position-relative flex-grow-1"},na={class:"d-flex flex-column align-items-start gap-1",style:{position:"absolute",bottom:"0",left:"0",right:"0",background:"rgba(0,0,0,0.05)",padding:"0.5rem"}},ia={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},la={class:"text-white"},ra={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},sa={class:"text-white"},ca={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},da={class:"text-white"},ua={key:0,class:"container mt-4 mt-md-5"},pa={class:"boards-wrapper mt-5 justify-content-start"},va={class:"d-flex justify-content-end"},fa=["onClick"],ha=["src","onClick"],ga=["onUpdate:modelValue"],ma=["onUpdate:modelValue"],wa={class:"card-body text-white position-relative flex-grow-1"},ya={class:"d-flex flex-column align-items-start gap-1",style:{position:"absolute",bottom:"0",left:"0",right:"0",background:"rgba(0,0,0,0.05)",padding:"0.5rem"}},ba={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},ka={class:"text-white"},xa={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},La={class:"text-white"},Sa={class:"fw-semibold text-warning",style:{"font-size":"0.85rem"}},Ca={class:"text-white"},Ta={key:0,class:"text-center mb-3 fw-semibold",style:{color:"#ffc107","font-size":"1.2rem"}};var Ra={__name:"AccOunt",setup(e){const t=(0,l.KR)(!1),a=(0,l.KR)(null),i=(0,l.KR)(null),r=(0,l.KR)(!1),s=E("csrftoken"),c=(0,l.KR)([]),d=(0,l.KR)(!0),u=(0,l.KR)({}),p=(0,l.KR)([]),v=(0,l.KR)({}),f=(0,l.KR)({}),h=async e=>{try{const o=await fetch(`${R}/delete/${e}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include"}),n=await o.json();200===n.status?(t.value=!0,a.value="Board was successfully modified."):console.log("Board not deleted successfully")}catch(o){console.error(o)}},g=async e=>{try{const o=await fetch(`${R}/delete/bookmark/${e}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include"}),n=await o.json();200===n.status&&(t.value=!0,a.value="Bookmark successfuly deleted.")}catch(o){console.error(o)}},m=async e=>{try{if(!r.value)return;const t=await fetch(`${R}/get_bookmarks/${e}`,{method:"POST",headers:{"X-CSRFToken":s,"Content-Type":"application/json"},body:JSON.stringify({timezone:rt.c9.local().zoneName}),credentials:"include"}),a=await t.json();200===a.status?(p.value=a.bookmarks,v.value=a.bookmarks.map(()=>!1)):p.value=[]}catch(t){console.error(t),p.value=[]}},w=async e=>{if(d.value=!0,0!==e.title.length&&0!==e.description.length||(t.value=!0,a.value="Board title or description cannot be empty"),e.original_description!==e.description||e.original_title!==e.title)try{const o=await fetch(`${R}/codraw/update/${e.room}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify({title:e.title,description:e.description,timezone:rt.c9.local().zoneName})}),n=await o.json();200===n.status&&(t.value=!0,a.value="Board was successfully modified.")}catch(o){console.error(o)}d.value=!1},y=async e=>{try{const t=await fetch(`${R}/username`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include"}),a=await t.json();let o="";return o=200==a.status?a.username:"ERROR 404 NOT FOUND",o===e}catch(t){console.error(t)}},b=async e=>{try{const t=await fetch(`${R}/codraw/boards/${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},body:JSON.stringify({timezone:rt.c9.local().zoneName,mode:r.value?"admin":"user"}),credentials:"include"}),a=await t.json();c.value=a.boards.map(e=>({...e,original_title:e.title,original_description:e.description})),f.value=a.images,u.value=a.boards.map(()=>!1)}catch(t){console.error(t)}},k=(e,t)=>{const a=document.createElement("a");a.download=`${t}.png`,a.href=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)};async function x(e){try{const t=await fetch(`${R}/load`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":s},credentials:"include",body:JSON.stringify({room:e})}),a=await t.json();200===a.status&&(window.location.href=`${a.url}?origin=account/${i.value}`)}catch(t){console.error(t)}}return(0,n.sV)(async()=>{d.value=!0;const e=window.location.pathname.split("/");i.value=e[e.length-1],r.value=await y(i.value),await Promise.all[(b(i.value),m(i.value))],d.value=!1}),(e,s)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[d.value?((0,n.uX)(),(0,n.CE)("div",_t,[(0,n.bF)((0,l.R1)(F.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[t.value?((0,n.uX)(),(0,n.CE)("div",zt,[(0,n.Lk)("div",Dt,[(0,n.Lk)("button",{onClick:s[0]||(s[0]=e=>t.value=!1),style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer"}}," ✕ "),(0,n.Lk)("p",null,(0,T.v_)(a.value),1),(0,n.Lk)("button",{onClick:s[1]||(s[1]=e=>t.value=!1),id:"close_form",style:{"margin-top":"20px",background:"#4f8cff",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer"}}," Close ")])])):(0,n.Q3)("",!0)]),_:1}),(0,n.Lk)("main",jt,[(0,n.bF)(lt),(0,n.Lk)("div",Wt,[(0,n.Lk)("h2",Xt,(0,T.v_)(i.value)+"'s Boards",1),(0,n.Lk)("div",Pt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.value,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"project-card"},[(0,n.Lk)("div",Jt,[r.value?((0,n.uX)(),(0,n.CE)("div",Kt,[(0,n.Lk)("div",At,[(0,n.Lk)("button",{class:"text-start btn btn-primary",onClick:t=>k(f.value[e.room],e.title)},"Export",8,$t),(0,n.Lk)("button",{class:"btn btn-success success",onClick:t=>x(e.room)}," Join room ",8,It),u.value[t]?((0,n.uX)(),(0,n.CE)("img",{key:1,src:(0,l.R1)(Et),loading:"lazy",decoding:"async",alt:"save",onClick:e=>{u.value[t]=!u.value[t],w(c.value[t]),c.value[t].modified="Just now"},style:{width:"20px",height:"20px",cursor:"pointer"}},null,8,Vt)):((0,n.uX)(),(0,n.CE)("img",{key:0,src:(0,l.R1)(Ft),loading:"lazy",decoding:"async",alt:"edit",onClick:e=>u.value[t]=!u.value[t],style:{width:"20px",height:"20px",cursor:"pointer"}},null,8,Ut)),(0,n.Lk)("img",{src:(0,l.R1)(Nt),loading:"lazy",alt:"delete",decoding:"async",onClick:e=>{h(c.value[t].room),c.value.splice(t,1)},style:{width:"20px",height:"20px",cursor:"pointer"}},null,8,Bt)]),u.value[t]?((0,n.uX)(),(0,n.CE)("div",Qt,[(0,n.bo)((0,n.Lk)("input",{class:"form-control fw-bold mt-2 bg-white text-dark","onUpdate:modelValue":t=>e.title=t,onClick:s[4]||(s[4]=(0,o.D$)(()=>{},["stop"])),placeholder:"Board Title"},null,8,Gt),[[o.Jo,e.title]]),(0,n.bo)((0,n.Lk)("input",{class:"form-control small mt-3 bg-white text-dark","onUpdate:modelValue":t=>e.description=t,onClick:s[5]||(s[5]=(0,o.D$)(()=>{},["stop"])),placeholder:"Board Description"},null,8,Ht),[[o.Jo,e.description]])])):((0,n.uX)(),(0,n.CE)("div",qt,[(0,n.bo)((0,n.Lk)("input",{class:"form-control fw-bold mt-2 bg-dark text-white","onUpdate:modelValue":t=>e.title=t,onClick:s[2]||(s[2]=(0,o.D$)(()=>{},["stop"])),placeholder:"Board Title",readonly:"",disabled:""},null,8,Mt),[[o.Jo,e.title]]),(0,n.bo)((0,n.Lk)("input",{class:"form-control small mt-3 bg-dark text-white","onUpdate:modelValue":t=>e.description=t,onClick:s[3]||(s[3]=(0,o.D$)(()=>{},["stop"])),placeholder:"Board Description",readonly:"",disabled:""},null,8,Yt),[[o.Jo,e.description]])]))])):((0,n.uX)(),(0,n.CE)("div",Zt,[(0,n.Lk)("button",{class:"btn btn-success success",onClick:t=>x(e.room)}," Join room ",8,ea),(0,n.bo)((0,n.Lk)("input",{class:"form-control fw-bold mt-2 bg-dark text-white","onUpdate:modelValue":t=>e.title=t,onClick:s[6]||(s[6]=(0,o.D$)(()=>{},["stop"])),placeholder:"Board Title",readonly:"",disabled:""},null,8,ta),[[o.Jo,e.title]]),(0,n.bo)((0,n.Lk)("input",{class:"form-control small mt-3 bg-dark text-white","onUpdate:modelValue":t=>e.description=t,onClick:s[7]||(s[7]=(0,o.D$)(()=>{},["stop"])),placeholder:"Board Description",readonly:"",disabled:""},null,8,aa),[[o.Jo,e.description]])]))]),(0,n.Lk)("div",oa,[(0,n.Lk)("div",na,[(0,n.Lk)("span",ia,[s[10]||(s[10]=(0,n.eW)(" Views: ",-1)),(0,n.Lk)("span",la,(0,T.v_)(e.views),1)]),(0,n.Lk)("span",ra,[s[11]||(s[11]=(0,n.eW)(" Last Modified: ",-1)),(0,n.Lk)("span",sa,(0,T.v_)(e.modified),1)]),(0,n.Lk)("span",ca,[s[12]||(s[12]=(0,n.eW)(" Visibility: ",-1)),(0,n.Lk)("span",da,(0,T.v_)(e.visibility),1)])])])]))),128))]),r.value?((0,n.uX)(),(0,n.CE)("div",ua,[s[16]||(s[16]=(0,n.Lk)("h1",{class:"text-start",style:{color:"#ffc107"}},"Bookmarks",-1)),(0,n.Lk)("div",pa,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(p.value,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"project-card"},[(0,n.Lk)("div",va,[(0,n.Lk)("button",{class:"btn btn-success success",onClick:t=>x(e.room)}," Join room ",8,fa),(0,n.Lk)("img",{src:(0,l.R1)(Nt),loading:"lazy",alt:"delete",decoding:"async",onClick:e=>{g(p.value[t].room),p.value.splice(t,1)},style:{width:"20px",height:"20px",cursor:"pointer"}},null,8,ha)]),(0,n.bo)((0,n.Lk)("input",{class:"form-control fw-bold mt-2 bg-white text-dark","onUpdate:modelValue":t=>e.title=t,onClick:s[8]||(s[8]=(0,o.D$)(()=>{},["stop"])),placeholder:"Board Title",readonly:"",disabled:""},null,8,ga),[[o.Jo,e.title]]),(0,n.bo)((0,n.Lk)("input",{class:"form-control small mt-3 bg-white text-dark","onUpdate:modelValue":t=>e.description=t,onClick:s[9]||(s[9]=(0,o.D$)(()=>{},["stop"])),placeholder:"Board Description",readonly:"",disabled:""},null,8,ma),[[o.Jo,e.description]]),(0,n.Lk)("div",wa,[(0,n.Lk)("div",ya,[(0,n.Lk)("span",ba,[s[13]||(s[13]=(0,n.eW)(" Views: ",-1)),(0,n.Lk)("span",ka,(0,T.v_)(e.views),1)]),(0,n.Lk)("span",xa,[s[14]||(s[14]=(0,n.eW)(" Last Modified: ",-1)),(0,n.Lk)("span",La,(0,T.v_)(e.modified),1)]),(0,n.Lk)("span",Sa,[s[15]||(s[15]=(0,n.eW)(" Visibility: ",-1)),(0,n.Lk)("span",Ca,(0,T.v_)(e.visibility),1)])])])]))),128)),0===p.value.length?((0,n.uX)(),(0,n.CE)("div",Ta," No bookmarks yet. ")):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)])])],64))}};const Oa=(0,w.A)(Ra,[["__scopeId","data-v-527da298"]]);var Na=Oa,Ea=(a(4114),a(6573),a(8100),a(7936),a(9577),a(6632),a(4226),a(9486),a(456),a(4603),a(7566),a(8721),a.p+"img/email.54f0aca4.webp"),Fa=a.p+"img/zoom.91d1cc83.webp",_a=a.p+"img/star.4504b728.webp",za=a(5778),Da=a.n(za);const ja={style:{position:"relative",width:"100vw",height:"100vh",overflow:"hidden"}},Wa={key:0,class:"spinner-overlay"},Xa={key:0,style:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)","z-index":"100",display:"flex","align-items":"center","justify-content":"center"}},Pa={style:{background:"#23272f",color:"#fff",padding:"32px 40px","border-radius":"16px","min-width":"320px","box-shadow":"0 8px 32px rgba(0,0,0,0.25)",position:"relative"}},Ja={style:{color:"#fff","min-width":"32px","text-align":"center"}},Ka={key:0,style:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)","z-index":"100",display:"flex","align-items":"center","justify-content":"center"}},Aa={style:{background:"#23272f",color:"#fff",padding:"32px 40px","border-radius":"16px","min-width":"320px","box-shadow":"0 8px 32px rgba(0,0,0,0.25)",position:"relative"}},$a={class:"row"},Ia={class:"col-3"},Ua={class:"col-3"},Va={class:"col-3"},Ba={class:"col-3"},qa={id:"inv_div",style:{position:"absolute",top:"12px",right:"1rem","z-index":"10"}},Ma=["src"],Ya={key:0},Qa=["src"],Ga={key:0},Ha={key:0,style:{position:"absolute",top:"150px",left:"35%","backdrop-filter":"blur(16px)",background:"rgba(30, 30, 30, 0.75)",border:"1px solid rgba(255, 255, 255, 0.1)","border-radius":"20px","box-shadow":"0 8px 32px rgba(0, 0, 0, 0.25)",padding:"32px",display:"flex","flex-direction":"column",gap:"20px","z-index":"20","min-width":"30vw","max-width":"90vw","font-family":"'Segoe UI', Roboto, sans-serif",transition:"ease-in-out 0.6s",color:"#fff"}},Za={style:{display:"flex","flex-direction":"column",gap:"6px"}},eo={style:{position:"relative"}},to={style:{position:"absolute",right:"10px",bottom:"6px","font-size":"0.75rem",color:"#aaa","pointer-events":"none"}},ao={style:{display:"flex","flex-direction":"column",gap:"6px"}},oo={style:{position:"relative"}},no={style:{position:"absolute",right:"10px",bottom:"6px","font-size":"0.75rem",color:"#aaa","pointer-events":"none"}},io={style:{display:"flex","align-items":"center",gap:"10px"}},lo={class:"switch"},ro={id:"zoom"},so=["src"],co=30;var uo={__name:"BoArd",setup(e){const t=(0,l.KR)(!1),a=E("csrftoken"),i=(0,l.KR)(null),r="demo"==new URL(window.location.href).pathname.split("/")[1]?"demo":"default";let s=null,c=0;const d=(0,l.KR)(null),u=(0,l.KR)(window.innerWidth),p=(0,l.KR)(!1),v=(0,l.KR)(!1),f=(0,l.KR)(!1),h=(0,l.KR)("#ffffff"),g=(0,l.KR)("#000000"),m=(0,l.KR)(null),w=(0,l.KR)(null),y=(0,l.KR)(null),b=(0,l.KR)("Public"),k=(0,l.KR)("brush"),x=(0,l.KR)(!1),L=(0,l.KR)(5),S=(0,l.KR)([]),C=(0,n.EW)(()=>`${(100*N.value).toFixed(0)}%`),N=(0,l.KR)(1),_=(0,l.KR)(null),z=(0,l.KR)(null),D=(0,l.KR)(null),j=(0,l.KR)(!1),W=(0,l.KR)(!1),X=(0,l.KR)(!0),P=(0,l.KR)([]),J=(0,l.KR)(0),K=(0,l.KR)(!1),A=(0,l.KR)(!1),$=(0,l.KR)(!1),I=(0,l.KR)(new URL(window.location.href).pathname.split("/")[3]);"demo"===r&&(I.value=new URL(window.location.href).pathname.split("/")[2]);const U=(0,l.KR)(!1),V=new URL(window.location.href).searchParams.get("origin"),B=[],q=[],M=e=>{const t=h.value;switch(e){case"text":{const e=new(Da().Text)({x:window.innerWidth/2,y:window.innerHeight/2,id:(0,Qe.A)(),width:220,height:80,fill:t,fontSize:32,fontFamily:"System UI",text:"Write text here",align:"center",verticalAlign:"middle",draggable:!0,name:"mainText"});e.setAttr("originalFontSize",32),e.setAttr("originalWidth",220),e.setAttr("originalHeight",80);const a=new(Da().Text)({x:window.innerWidth/2,y:window.innerHeight/2,id:e.id(),width:220,height:80,fill:t,fontSize:32,fontFamily:"System UI",text:"Write text here",align:"center",verticalAlign:"middle",draggable:!0});a.setAttr("originalFontSize",32),a.setAttr("originalWidth",220),a.setAttr("originalHeight",80),e.on("dragmove",()=>{a.position(e.position()),me.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"text",newpos:e.position(),id:e.id()}))}),e.on("dblclick",e=>{e.evt.stopPropagation(),Y(e.target)}),a.on("dragmove",()=>{e.position(a.position()),D.value.getNode().batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"text",newpos:a.position(),id:a.id()}))}),a.on("dblclick",t=>{t.evt.stopPropagation(),Y(e)}),D.value.getNode().add(e),me.add(a),a.moveToTop(),e.moveToTop(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape",shapeType:"text",id:e.id(),x:e.x(),y:e.y(),width:e.width(),height:e.height(),fill:e.fill(),text:e.text(),fontSize:e.fontSize(),fontFamily:e.fontFamily(),align:e.align(),verticalAlign:e.verticalAlign()}));break}case"arrow":{const e=new(Da().Arrow)({x:window.innerWidth/2,y:window.innerHeight/2,id:(0,Qe.A)(),points:[200,200,0,0],stroke:t,strokeWidth:L.value,pointerLength:20,pointerWidth:20,fill:t,draggable:!0}),a=new(Da().Arrow)({x:window.innerWidth/2,y:window.innerHeight/2,id:e.id(),points:[200,200,0,0],stroke:t,strokeWidth:L.value,pointerLength:20,pointerWidth:20,fill:t,draggable:!0});e.on("dragmove",()=>{a.position(e.position()),me.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"arrow",newpos:e.position(),id:e.id()}))}),a.on("dragmove",()=>{e.position(a.position()),D.value.getNode().batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"arrow",newpos:a.position(),id:a.id()}))}),D.value.getNode().add(e),me.add(a),e.moveToTop(),a.moveToTop(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape",shapeType:"arrow",id:e.id(),x:e.x(),y:e.y(),points:e.points(),stroke:e.stroke(),strokeWidth:e.strokeWidth(),pointerLength:e.pointerLength(),pointerWidth:e.pointerWidth(),fill:e.fill()}));break}case"circle":{const e=new(Da().Circle)({x:window.innerWidth/2,y:window.innerHeight/2,id:(0,Qe.A)(),radius:100,fill:t,stroke:"#000000"===W.value?"white":"black",strokeWidth:L.value,draggable:!0}),a=new(Da().Circle)({x:window.innerWidth/2,y:window.innerHeight/2,id:e.id(),radius:100,fill:t,stroke:"#000000"===W.value?"white":"black",strokeWidth:L.value,draggable:!0});e.on("dragmove",()=>{a.position(e.position()),me.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"circle",newpos:e.position(),id:e.id()}))}),a.on("dragmove",()=>{e.position(a.position()),D.value.getNode().batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"circle",newpos:a.position(),id:a.id()}))}),D.value.getNode().add(e),me.add(a),e.moveToTop(),a.moveToTop(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape",shapeType:"circle",id:e.id(),x:e.x(),y:e.y(),radius:e.radius(),fill:e.fill(),stroke:e.stroke(),strokeWidth:e.strokeWidth()}));break}case"square":{const e=new(Da().Rect)({x:window.innerWidth/2,y:window.innerHeight/2,id:(0,Qe.A)(),width:100,height:100,fill:t,stroke:"#000000"===W.value?"white":"black",strokeWidth:L.value,draggable:!0}),a=new(Da().Rect)({x:window.innerWidth/2,y:window.innerHeight/2,id:e.id(),width:100,height:100,fill:t,stroke:"#000000"===W.value?"white":"black",strokeWidth:L.value,draggable:!0});e.on("dragmove",()=>{a.position(e.position()),me.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"square",newpos:e.position(),id:e.id()}))}),a.on("dragmove",()=>{e.position(a.position()),D.value.getNode().batchDraw()}),D.value.getNode().add(e),me.add(a),e.moveToTop(),a.moveToTop(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape",shapeType:"square",id:e.id(),x:e.x(),y:e.y(),width:e.width(),height:e.height(),fill:e.fill(),stroke:e.stroke(),strokeWidth:e.strokeWidth()}));break}default:break}$.value=!1},Y=e=>{const t=D.value.getNode();if(!t||!e)return;const a=new(Da().Transformer)({nodes:[e],borderStroke:"#ffc107",borderDash:[5,5],borderStrokeWidth:1,borderDashOffset:0,borderJoinStyle:"round",scalingEnabled:!0,enabledAnchors:["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"],keepRatio:!0,keepRatioByExpanding:!0,rotateEnabled:!1,boundBoxFunc:(e,t)=>t.width<5||t.height<5?e:t});H(),B.push(a),t.add(a),t.batchDraw();const o=()=>{const t=e.scaleX()||1;return{x:e.x()+e.width()*t-15,y:e.y()-15}},n=o(),i=new(Da().Group)({x:n.x,y:n.y,opacity:0,listening:!0}),l=new(Da().Circle)({radius:12,fill:"#ff4f4f",stroke:"#fff",strokeWidth:2}),r=new(Da().Text)({text:"×",fontSize:12,fontFamily:"Arial",fill:"#fff",x:-5,y:-8});i.add(l),i.add(r),i.on("click",t=>{t.evt.stopPropagation(),G(e,a,i)}),i.on("mouseenter",()=>{l.fill("#ff3333"),t.batchDraw()}),i.on("mouseleave",()=>{l.fill("#ff4f4f"),t.batchDraw()}),q.push(i),t.add(i),i.to({opacity:1,duration:.2});const s=()=>{const e=o();i.x(e.x),i.y(e.y)};e.on("dragmove",()=>{s();const t=me.findOne(`#${e.id()}`);t&&(t.position(e.position()),me.batchDraw())}),a.on("transform",()=>{s();const t=me.findOne(`#${e.id()}`),a=e.scaleX()||1,o=e.scaleY()||1,n=e.getAttr("originalFontSize")||32,i=e.getAttr("originalWidth")||220,l=e.getAttr("originalHeight")||80;t&&(t.x(e.x()),t.y(e.y()),t.fontSize(n*a),t.width(i*a),t.height(l*o),t.scaleX(1),t.scaleY(1),me.batchDraw()),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"resize-shape",id:e.id(),x:e.x(),y:e.y(),width:i*a,height:l*o,fontSize:n*a}))}),t.draw()},Q=e=>{const t=e.target,a=D.value.getNode();if(!a||!t)return;const o=new(Da().Transformer)({nodes:[t],borderStroke:"#ffc107",borderDash:[5,5],borderStrokeWidth:1,borderDashOffset:0,borderJoinStyle:"round",scalingEnabled:!0,enabledAnchors:["top-left","middle-left","top-right","middle-right","bottom-left","bottom-right"],keepRatio:!0,keepRatioByExpanding:!0,rotateEnabled:!1,boundBoxFunc:(e,t)=>t.width<5||t.height<5?e:t});H(),B.push(o),a.add(o);const n=()=>{const e=t.scaleX()||1;return{x:t.x()+t.width()*e-15,y:t.y()-15}},i=n(),l=new(Da().Group)({x:i.x,y:i.y,opacity:0,listening:!0}),r=new(Da().Circle)({radius:12,fill:"#ff4f4f",stroke:"#fff",strokeWidth:2}),s=new(Da().Text)({text:"×",fontSize:12,fontFamily:"Arial",fill:"#fff",x:-5,y:-8});l.add(r),l.add(s),l.on("click",e=>{e.evt.stopPropagation(),G(t,o,l)}),l.on("mouseenter",()=>{r.fill("#ff3333"),a.batchDraw()}),l.on("mouseleave",()=>{r.fill("#ff4f4f"),a.batchDraw()}),q.push(l),a.add(l),l.to({opacity:1,duration:.2});const c=()=>{const e=n();l.x(e.x),l.y(e.y)};o.on("transform",()=>{c(),a.batchDraw();const e=me.findOne(`#${t.id()}`);e&&(e.x(t.x()),e.y(t.y()),e.width(t.width()*t.scaleX()),e.height(t.height()*t.scaleY()),e.scaleX(1),e.scaleY(1),me.draw()),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"img_resize",id:t.id(),x:t.x(),y:t.y(),width:t.width()*t.scaleX(),height:t.height()*t.scaleY()}))}),a.draw()},G=(e,t,a)=>{const o=D.value.getNode();if(!o)return;const n=e.id();e.destroy(),t&&t.destroy(),a&&a.destroy();const i=B.indexOf(t);i>-1&&B.splice(i,1);const l=q.indexOf(a);l>-1&&q.splice(l,1),o.batchDraw();const r=me.findOne(`#${n}`);r&&(r.destroy(),me.batchDraw()),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"img_delete",id:n})),Re()},H=()=>{for(const e of B)e.destroy();for(const e of q)e.destroy();B.length=0,q.length=0},Z=e=>{const t=e.target;(!t||"Transformer"!==t.className&&"Transformer"!==t.getParent()?.className)&&H()},ee=async()=>{if("demo"!==r)try{const e=await fetch(`${R}/status`,{method:"GET",headers:{"X-CSRFToken":a},credentials:"include"});let t=await e.json();200===t.status&&t.user?X.value=!0:X.value=!1}catch(e){console.error(e)}else X.value=!0},te=()=>{A.value=!A.value;const e=d.value.getNode();A.value?(j.value=!0,x.value=!1,e.draggable(!0),e.container().style.cursor="grab"):(j.value=!1,e.draggable(!1),e.container().style.cursor="default")},ae=()=>{$.value=!$.value},oe=async()=>{const e=new URL(window.location.href).pathname.split("/")[2];try{const t=await fetch(`${R}/bookmark/${I.value}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a},credentials:"include",body:JSON.stringify({user:e,status:K.value})}),o=await t.json();200===o.status&&o.bookmarked?K.value=!0:K.value=!1}catch(t){K.value=!1}},ne=async()=>{const e=new URL(window.location.href).pathname.split("/")[2];try{const t=await fetch(`${R}/is_bookmarked/${I.value}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a},body:JSON.stringify({user:e}),credentials:"include"}),o=await t.json();200===o.status&&o.bookmarked?K.value=!0:K.value=!1}catch(t){K.value=!1}},ie=(0,n.EW)(()=>u.value>1300),le={width:2*document.documentElement.clientWidth,height:2*document.documentElement.clientHeight,draggable:!1},re=(0,l.KR)(null),se=O,ce=se.endsWith("/")?se.slice(0,-1):se,de=`${ce}/${I.value}/`;re.value=new WebSocket(de),re.value.onopen=function(){re.value.send(JSON.stringify({type:"sync-request",room:I.value}))},re.value.onmessage=async e=>{const t=JSON.parse(e.data);if(!t||!t.type)return;const a=D.value.getNode();if("start"===t.type){const e="destination-out"===t.operation,o={stroke:t.stroke,strokeWidth:t.width,globalCompositeOperation:t.operation,points:t.points,lineCap:"round",lineJoin:"round",tension:.5},n={stroke:e?g.value:t.stroke,strokeWidth:t.width,globalCompositeOperation:t.operation,points:t.points,lineCap:"round",lineJoin:"round",tension:.5},l=new(Da().Line)(o),r=new(Da().Line)(n);l._remote=!0,r._remote=!0,a.add(l),l.moveToTop(),me.add(r),r.moveToTop(),i.value={main:l,preview:r,_remote:!0}}else if("draw"===t.type&&i.value?._remote){const e=i.value.main.points();e.push(...t.points),i.value.main.points(e);const o=i.value.preview.points();o.push(...t.points),i.value.preview.points(o),a.batchDraw(),me.batchDraw()}else if("bg"===t.type&&t.bg)g.value=t.bg,W.value="#ffffff"===t.bg;else if("img"==t.type){const e=new window.Image;e.src=t.src,e.onload=()=>{const o=new(Da().Image)({id:t.id,image:e,x:t.x,y:t.y,width:t.width,height:t.height,draggable:!1});Te(o),o.on("dblclick",Q),a.add(o);const n=new(Da().Image)({id:t.id,image:e,x:t.x,y:t.y,width:t.width,height:t.height});me.add(n),me.batchDraw(),a.batchDraw()},e.onerror=()=>console.error("Remote image failed to load",t.id)}else if("img_delete"===t.type&&t.id){const e=a.findOne(`#${t.id}`);if(e){const o=B.find(t=>t.nodes().includes(e)),n=q.find(t=>{const a=t.x(),o=t.y(),n=e.x(),i=e.y(),l=e.width();return Math.abs(a-(n+l-15))<5&&Math.abs(o-(i-15))<5}),i=me.findOne(`#${t.id}`);if(i&&i.destroy(),e.destroy(),o){o.destroy();const e=B.indexOf(o);e>-1&&B.splice(e,1)}if(n){n.destroy();const e=q.indexOf(n);e>-1&&q.splice(e,1)}a.batchDraw(),me.draw()}}else if("img_resize"===t.type&&t.id){const e=a.findOne(`#${t.id}`),o=me.findOne(`#${t.id}`);if(e){e.x(t.x),e.y(t.y),e.width(t.width),e.height(t.height),e.scaleX(1),e.scaleY(1);const o=B.find(t=>t.nodes().includes(e));o&&o.forceUpdate();const n=q.find(t=>{const a=t.x(),o=t.y(),n=e.x(),i=e.y(),l=e.width();return Math.abs(a-(n+l-15))<5&&Math.abs(o-(i-15))<5});n&&(n.x(t.x+t.width-15),n.y(t.y-15)),a.batchDraw()}o&&(o.x(t.x),o.y(t.y),o.width(t.width),o.height(t.height),o.scaleX(1),o.scaleY(1),me.draw())}else if("history_update"===t.type&&t.history)P.value=t.history,J.value=t.index;else if("undo"===t.type)await Oe();else if("redo"===t.type)Ne();else if("sync-request"===t.type){if($e(),re.value&&re.value.readyState===WebSocket.OPEN){const e="demo"===r?"demo":I.value;re.value.send(JSON.stringify({type:"sync-response",context:localStorage.getItem(e)}))}}else if("sync-response"===t.type)U.value=!0,D.value||await(0,n.dY)(),t.context&&D.value&&await Ge(t.context);else if("clearall"===t.type)Je(!1);else if("shape"===t.type&&t.shapeType){const e=D.value.getNode();let a,o;const n={id:t.id,x:t.x,y:t.y,draggable:!0};"text"===t.shapeType?(Object.assign(n,{width:t.width,height:t.height,fill:t.fill,fontSize:t.fontSize,fontFamily:t.fontFamily,text:t.text,align:t.align,verticalAlign:t.verticalAlign}),a=new(Da().Text)(n),a.setAttr("originalFontSize",t.fontSize),a.setAttr("originalWidth",t.width),a.setAttr("originalHeight",t.height),o=new(Da().Text)({...n}),o.setAttr("originalFontSize",t.fontSize),o.setAttr("originalWidth",t.width),o.setAttr("originalHeight",t.height),a.on("dragmove",()=>{o.position(a.position()),me.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"text",newpos:a.position(),id:a.id()}))}),o.on("dragmove",()=>{a.position(o.position()),e.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"text",newpos:o.position(),id:o.id()}))}),a.on("dblclick",e=>{e.evt.stopPropagation(),Y(a)}),o.on("dblclick",e=>{e.evt.stopPropagation(),Y(a)})):"arrow"===t.shapeType?(Object.assign(n,{points:t.points,stroke:t.stroke,strokeWidth:t.strokeWidth,pointerLength:t.pointerLength,pointerWidth:t.pointerWidth,fill:t.fill}),a=new(Da().Arrow)(n),o=new(Da().Arrow)({...n}),a.on("dragmove",()=>{o.position(a.position()),me.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"arrow",newpos:a.position(),id:a.id()}))}),o.on("dragmove",()=>{a.position(o.position()),e.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"arrow",newpos:o.position(),id:o.id()}))})):"circle"===t.shapeType?(Object.assign(n,{radius:t.radius,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth}),a=new(Da().Circle)(n),o=new(Da().Circle)({...n}),a.on("dragmove",()=>{o.position(a.position()),me.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"circle",newpos:a.position(),id:a.id()}))}),o.on("dragmove",()=>{a.position(o.position()),e.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"circle",newpos:o.position(),id:o.id()}))})):"square"===t.shapeType&&(Object.assign(n,{width:t.width,height:t.height,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth}),a=new(Da().Rect)(n),o=new(Da().Rect)({...n}),a.on("dragmove",()=>{o.position(a.position()),me.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"square",newpos:a.position(),id:a.id()}))}),o.on("dragmove",()=>{a.position(o.position()),e.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"shape-drag",shapeType:"square",newpos:o.position(),id:o.id()}))})),a&&o&&(e.add(a),me.add(o),a.moveToTop(),o.moveToTop(),e.batchDraw(),me.batchDraw())}else if("shape-drag"===t.type&&t.shapeType&&t.id){const e=D.value.getNode(),a=e.findOne(`#${t.id}`),o=me.findOne(`#${t.id}`);a&&(a.position(t.newpos),e.batchDraw()),o&&(o.position(t.newpos),me.batchDraw())}else if("resize-shape"===t.type&&t.id){const e=D.value.getNode(),a=e.findOne(`#${t.id}`),o=me.findOne(`#${t.id}`);if(a){a.x(t.x),a.y(t.y),t.fontSize&&(a.setAttr("originalFontSize",t.fontSize),a.fontSize(t.fontSize)),t.width&&(a.setAttr("originalWidth",t.width),a.width(t.width)),t.height&&(a.setAttr("originalHeight",t.height),a.height(t.height)),a.scaleX(1),a.scaleY(1);const o=B.find(e=>e.nodes().includes(a));o&&o.forceUpdate(),e.batchDraw()}o&&(o.x(t.x),o.y(t.y),t.fontSize&&o.fontSize(t.fontSize),t.width&&o.width(t.width),t.height&&o.height(t.height),o.scaleX(1),o.scaleY(1),me.batchDraw())}};const ue=e=>{e.evt.preventDefault()},pe=document.createElement("canvas");pe.width=le.width,pe.height=le.height;const ve=(0,l.KR)(!1),fe=pe.getContext("2d");fe.strokeStyle=h.value,fe.fillStyle=g.value,fe.lineJoin="round",fe.lineWidth=Number(L.value),fe.lineCap="round",fe.lineJoin="round";const he=document.createElement("div");he.id="preview",he.style.position="absolute",he.style.bottom="5px",he.style.left="5px",he.style.border="5px solid #ffc107",he.style.borderRadius="5%",he.style.backgroundColor=g.value,document.body.appendChild(he);const ge=new(Da().Stage)({container:"preview",width:window.innerWidth/8,height:window.innerHeight/8,scaleX:1/32,scaleY:1/32});let me=new(Da().Layer);const we=new(Da().Rect)({x:0,y:0,width:32*ge.width(),height:32*ge.height(),fill:g.value,listening:!1});function ye(e){const t=[50,75,100,125,150,175,200],a=d.value.getNode(),o=100*a.scaleX(),n="up"===e?1:-1;if(50===o&&-1===n||200===o&&1===n)return;const i=t[t.indexOf(o)+n]/100;N.value=i,a.scale({x:i,y:i}),a.batchDraw()}ge.add(me),me.add(we),(0,n.wB)(h,e=>{fe.strokeStyle=e}),(0,n.wB)(W,()=>{g.value=W.value?"#ffffff":"#000000",h.value=W.value?"#000000":"#ffffff",we.fill(g.value),he.style.backgroundColor=g.value,me.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"bg",bg:g.value}))},{immediate:!0});const be=e=>{e.evt.preventDefault(),ye(e.evt.deltaY>0?"up":"down")},ke=async()=>{try{const e=new URL(window.location.href).pathname.split("/"),t=e[2],o=await fetch(`${R}/codraw/check_owner`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":a},credentials:"include",body:JSON.stringify({owner:t,room:I.value})}),n=await o.json();200===n.status&&(p.value=!0)}catch(e){p.value=!1,console.error(e)}},xe=async()=>{try{const e=window.location.href;await navigator.clipboard.writeText(e),f.value=!0,w.value="Invitation link copied to clipboard!"}catch(e){f.value=!0,w.value="Failed to copy the link."}},Le=async()=>{let e=null;if("demo"===r)e=localStorage.getItem("demo");else{const t=new URL(window.location.href).pathname.split("/")[3];e=localStorage.getItem(t)}e&&await Ge(e)},Se=async()=>{try{t.value=!0,m.value||(f.value=!0,w.value="Please provide a title for your board."),m.value.length>66&&(f.value=!0,w.value="The title length is to large, must be at most 60 characters."),y.value&&y.value.length>170&&(f.value=!0,w.value="The description length is to large, must be at most 100 characters.");const e=new FormData;e.append("project",I.value),e.append("title",m.value),e.append("description",y.value),e.append("payload",JSON.stringify([{id:Date.now(),image:d.value.getStage().toJSON()}])),e.append("bg",g.value),e.append("preview",De()),e.append("type",b.value);const o=await fetch(`${R}/codraw/save_new`,{method:"POST",headers:{"X-CSRFToken":a},body:e,credentials:"include"}),n=await o.json();let i=!0;v.value=!1,200===n.status&&(i=!1),await new Promise(e=>setTimeout(()=>{t.value=!1,e()},2e3)),i?(f.value=!0,w.value="There was an error saving your board."):(f.value=!0,w.value="Board saved successfully.",ve.value=!0,$e())}catch(e){console.error(e)}};function Ce(e,t){const a=t.width,o=t.height,n=a/o;let i,l;const r=e.width/e.height;n>=r?(i=e.width,l=e.width/n):(i=e.height*n,l=e.height);let s=0,c=0;return s=(e.width-i)/2,c=(e.height-l)/2,{cropX:s,cropY:c,cropWidth:i,cropHeight:l}}function Te(e){const t=e.image();if(!t)return;const a=Ce(t,{width:e.width(),height:e.height()});e.setAttrs(a)}function Re(){const e=D.value.getNode();if(!e)return;const t=e.children||[],a=t[t.length-1];if(!a)return;const o=a.toJSON();J.value<P.value.length-1&&(P.value=P.value.slice(0,J.value+1)),P.value.push(o),J.value=P.value.length-1,P.value.length>co&&(P.value.shift(),J.value=Math.max(0,J.value-1)),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"history_update",history:P.value,index:J.value}))}const Oe=async()=>{if(J.value<0)return;const e=D.value.getNode(),t=e.children||[],a=t[t.length-1];a&&a.destroy();const o=me.children||[],n=o[o.length-1];n&&n.destroy(),H(),J.value--,me.batchDraw(),e.batchDraw()},Ne=()=>{if(!(J.value>=P.value.length-1)){{J.value++;const e=D.value.getNode();if(!P.value[J.value])return;const t=JSON.parse(P.value[J.value]);if(t)if("Image"===t.className){const a=new window.Image;a.src=t.attrs.src,a.onload=()=>{const o=new(Da().Image)({id:t.attrs.id||(0,Qe.A)(),image:a,x:t.attrs.x,y:t.attrs.y,width:t.attrs.width||a.width,height:t.attrs.height||a.height,draggable:!1,src:t.attrs.src});Te(o),o.setAttr("src",t.attrs.src),o.on("dblclick",Q),e.add(o);const n=new(Da().Image)({id:o.id(),image:a,x:t.attrs.x,y:t.attrs.y,width:t.attrs.width||a.width,height:t.attrs.height||a.height});me.add(n),me.batchDraw(),e.draw()},a.onerror=()=>{console.error("Failed to load image for redo")}}else{const a=Da().Node.create(t),o=Da().Node.create(t);e.add(a),me.add(o),me.draw(),e.draw()}}H()}},Ee=async()=>{await Oe(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"undo"}))},Fe=()=>{Ne(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"redo"}))},_e=async()=>{const e=new URL(window.location.href).pathname.split("/")[2];try{const t=await fetch(`${R}/codraw/check_saved`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:I.value,owner:e})}),a=await t.json();ve.value=a.saved}catch(t){console.error(t),ve.value=!1}},ze=e=>{const t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(t.length),n=new Uint8Array(o);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new Blob([o],{type:a})},De=()=>{const e=d.value.getStage(),t=D.value.getNode(),a=new(Da().Rect)({x:-e.x()/e.scaleX(),y:-e.y()/e.scaleY(),width:e.width()/e.scaleX(),height:e.height()/e.scaleY(),fill:g.value,listening:!1});t.add(a),a.moveToBottom();const o=e.toDataURL({pixelRatio:2});return a.destroy(),t.batchDraw(),o},je=(e,t,a)=>{if(!e.type.startsWith("image/"))return;const o=new FileReader;o.onload=e=>{const o=new window.Image;o.src=e.target.result,o.onload=()=>{const n=new(Da().Image)({id:(0,Qe.A)(),image:o,x:t,y:a,width:o.width,height:o.height,draggable:!1,src:e.target.result});Te(n);const i=D.value.getNode();n.setAttr("src",e.target.result),n.on("dblclick",Q),i.add(n);const l=new(Da().Image)({id:n.id(),image:o,x:t,y:a,width:o.width,height:o.height});me.add(l),me.batchDraw(),i.draw(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"img",id:n.id(),src:e.target.result,x:n.x(),y:n.y(),width:n.width(),height:n.height()})),Re()}},o.readAsDataURL(e)},We=e=>{e.preventDefault();const t=d.value?.getNode?.();if(!t)return;const a=t.getPointerPosition();let o;if(a)o=Ae(t);else{const e=window.innerWidth/t.scaleX(),a=window.innerHeight/t.scaleY(),n=-t.x()/t.scaleX()+e/2,i=-t.y()/t.scaleY()+a/2;o={x:n,y:i}}const n=e.clipboardData;if(!n||0===n.files.length)return;const i=n.files[0];je(i,o.x,o.y)},Xe=async e=>{try{if(t.value=!0,"save"===e){if(!ve.value)return t.value=!1,v.value=!0,!1;const e=new FormData,o=ze(De());e.append("project",I.value),e.append("payload",JSON.stringify(d.value.getStage().toJSON())),e.append("bg",g.value),e.append("preview",o,`${I.value}.webp`);const n=await fetch(`${R}/codraw/save_project`,{method:"POST",headers:{"X-CSRFToken":a},body:e,credentials:"include"}),i=await n.json();let l=!0;200===i.status&&(l=!1),await new Promise(e=>setTimeout(()=>{t.value=!1,e()},2e3)),l?v.value=!0:($e(),f.value=!0,w.value="Board was successfully quick saved.")}else if("load"===e){if("demo"===r){const e=localStorage.getItem("demo");return e&&!U.value&&await Ge(e),!1}const e=await fetch(`${R}/codraw/load_project`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:I.value})}),t=await e.json();if(200===t.status)return!0;const a=localStorage.getItem("demo"===r?"demo":I.value);return a&&!U.value&&await Ge(a),!1}}catch(o){console.error(o)}};function Pe(){const e=new URL(window.location.href).pathname.split("/")[3];localStorage.removeItem(e),"default"===V?window.location.href="/codraw":V.startsWith("search")||V.startsWith("account")?window.location.href=`/codraw/${V}`:window.location.href="/"}function Je(e){if(f.value=!1,w.value="",t.value=!0,"demo"===r)localStorage.removeItem("demo");else{const e=new URL(window.location.href).pathname.split("/")[3];localStorage.removeItem(e)}const a=D.value.getNode();a.destroyChildren(),me.destroyChildren(),H(),a.batchDraw(),me.batchDraw(),re.value&&re.value.readyState===WebSocket.OPEN&&e&&re.value.send(JSON.stringify({type:"clearall"})),t.value=!1}function Ke(){p.value||"demo"===r?(f.value=!0,w.value="Are you sure you would like to clear the board? This action is irreversible."):(f.value=!0,w.value="You don't have neccessary permissions to clear the board.")}const Ae=e=>{const t=e.getAbsoluteTransform().copy();t.invert();const a=e.getPointerPosition();return t.point(a)},$e=()=>{const e=d.value?.getNode?.();if(!e)return;const t=e.toJSON();if(S.value=[{id:Date.now(),image:t}],"demo"===r)localStorage.setItem("demo",JSON.stringify(S.value));else{const e=new URL(window.location.href).pathname.split("/")[3];localStorage.setItem(e,JSON.stringify(S.value))}},Ie={image:pe,x:0,y:0,width:pe.width,height:pe.height};let Ue=null,Ve=0;const Be=e=>{if(e.evt.touches&&1!=e.evt.touches.length){if(e.evt.touches&&2==e.evt.touches.length){e.evt.cancelable&&e.evt.preventDefault(),x.value=!1,i.value=null;const t=e.evt.touches[0],a=e.evt.touches[1];Ve=Math.sqrt(Math.pow(a.clientX-t.clientX,2)+Math.pow(a.clientY-t.clientY,2)),Ue={x:(t.clientX+a.clientX)/2,y:(t.clientY+a.clientY)/2}}}else{const t=e.target.getStage();if(2===e.evt.button||A.value)return t.container().style.cursor="grab",j.value=!0,t.draggable(!0),t.startDrag(),void(_.value=t.getPointerPosition());if(e.target!==t&&(e.target.draggable()||e.target.getParent()?.draggable()))return;x.value=!0,t.container().style.cursor="default";const a=Ae(t),o="eraser"===k.value,n=o?"rgba(0,0,0,1)":h.value,l=o?"rgba(0,0,0,1)":h.value,r={stroke:n,strokeWidth:Number(L.value),globalCompositeOperation:o?"destination-out":"source-over",points:[a.x,a.y],lineCap:"round",lineJoin:"round",tension:.5},s={stroke:l,strokeWidth:Number(L.value),globalCompositeOperation:o?"destination-out":"source-over",points:[a.x,a.y],lineCap:"round",lineJoin:"round",tension:.5},c=new(Da().Line)(r),d=new(Da().Line)(s);me.add(d),d.moveToTop(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"start",stroke:h.value,width:Number(L.value),operation:"eraser"===k.value?"destination-out":"source-over",points:[a.x,a.y]}));const u=D.value.getNode();u.add(c),c.moveToTop(),me.draw(),i.value={main:c,preview:d}}},qe=e=>{if(x.value=!1,i.value=null,Ve=0,Ue=null,Re(),j.value){const t=e.target.getStage();t.draggable(!1),j.value=!1}null!==s&&(cancelAnimationFrame(s),s=null,D.value.getNode().batchDraw(),me.batchDraw())},Me=e=>{if(e.evt.touches&&1!=e.evt.touches.length){if(e.evt.touches&&2==e.evt.touches.length&&Ue){e.evt.cancelable&&e.evt.preventDefault();const t=d.value.getNode(),a=e.evt.touches[0],o=e.evt.touches[1],n=Math.sqrt(Math.pow(o.clientX-a.clientX,2)+Math.pow(o.clientY-a.clientY,2)),i={x:(a.clientX+o.clientX)/2,y:(a.clientY+o.clientY)/2},l={x:(i.x-t.x())/t.scaleX(),y:(i.y-t.y())/t.scaleX()},r=n/Ve,s=t.scaleX()*r;if(s>.05&&s<5){t.scale({x:s,y:s});const e={x:i.x-l.x*s,y:i.y-l.y*s};t.position(e),t.batchDraw()}Ve=n,Ue=i}}else{if(!x.value||!i.value)return;const t=e.target.getStage(),a=Ae(t),o=i.value.main.points();o.push(a.x,a.y),i.value.main.points(o);const n=i.value.preview.points();n.push(a.x,a.y),i.value.preview.points(n);const l=Date.now();l-c>=16&&re.value&&re.value.readyState===WebSocket.OPEN&&(c=l,re.value.send(JSON.stringify({type:"draw",points:[a.x,a.y]}))),null===s&&(s=requestAnimationFrame(()=>{D.value.getNode().batchDraw(),me.batchDraw(),s=null}))}},Ye=()=>{u.value=window.innerWidth;const e=d.value?.getNode(),t=z.value?.getNode();if(!e||!t)return;const a=window.innerWidth,o=window.innerHeight;pe.width=4*a,pe.height=4*o,e.width(pe.width),e.height(pe.height),t.width(pe.width),t.height(pe.height);const n=t.getLayer();n&&n.batchDraw()},Ge=async e=>{if(!e)return;const t=D.value?.getNode();if(!t)return await(0,n.dY)(),Ge(e);const a="string"===typeof e?JSON.parse(e):e;let o=null;if(Array.isArray(a)&&a[0]?.image?o="string"===typeof a[0].image?JSON.parse(a[0].image):a[0].image:a.image?o="string"===typeof a.image?JSON.parse(a.image):a.image:("Stage"===a.className||a.children)&&(o=a),!o)return;t.destroyChildren(),H();const i=o.children?.[0]?.children||[],l=i.map(e=>"Image"===e.className&&e.attrs.src?new Promise(t=>{const a=new window.Image;a.crossOrigin="Anonymous",a.onload=()=>{e.attrs.image=a,t()},a.onerror=()=>{t()},a.src=e.attrs.src}):Promise.resolve());await Promise.all(l),i.forEach(e=>{const a=Da().Node.create(e),o=Da().Node.create(e);me.add(a),t.add(o),"Image"===o.className&&(Te(o),o.on("dblclick",Q))}),me.batchDraw(),t.batchDraw()},He=async()=>{try{if("default"===r){const e=await fetch(`${R}/codraw/get_details`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project:I.value})}),t=await e.json(),a=t.canva,o=t.bg,n=t.last;o&&(g.value=o,W.value="#ffffff"===o);const i=localStorage.getItem(I.value);if(i&&i.length>a.length){const e=JSON.parse(i);if(e&&e[0]&&e[0].id>n)return void await Le()}a&&await Ge(a)}else if("demo"===r){const e=localStorage.getItem(I.value);if(e){const t=JSON.parse(e);if(t&&t[0])return void await Le()}}}catch(e){console.error(e)}},Ze=e=>{const t=d.value?.getNode?.();if(!t)return;const a=e.target.files;if(!a||0===a.length)return;const o=window.innerWidth/t.scaleX(),n=window.innerHeight/t.scaleY(),i=-t.x()/t.scaleX()+o/2,l=-t.y()/t.scaleY()+n/2;Array.from(a).forEach((e,t)=>{if(e.type.startsWith("image/")){const a=t%3*30,o=30*Math.floor(t/3);je(e,i+a,l+o)}}),e.target.value=""},et=async e=>{!e.ctrlKey||"z"!==e.key&&"Z"!==e.key?!e.ctrlKey||"y"!==e.key&&"Y"!==e.key||(e.preventDefault(),Ne(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"redo"}))):(e.preventDefault(),await Oe(),re.value&&re.value.readyState===WebSocket.OPEN&&re.value.send(JSON.stringify({type:"undo"})))};let tt=null;const at=()=>new Promise(e=>{const t=setInterval(()=>{U.value&&(clearInterval(t),e())},100);setTimeout(()=>{clearInterval(t),e()},5e3)});return(0,n.sV)(async()=>{t.value=!0,await(0,n.dY)(),await at(),await Xe("load")&&(U.value||He()),"demo"===r?X.value=!0:await Promise.all([ke(),ee(),_e()]),X.value&&"demo"!==r&&await ne(),tt=setInterval(()=>$e(),6e4),window.addEventListener("keydown",et),window.addEventListener("resize",Ye),window.addEventListener("paste",We);const e=document.getElementById("upload");e.addEventListener("change",Ze),t.value=!1}),(0,n.xo)(()=>{re.value&&re.value.close(),t.value=!0}),(0,n.hi)(()=>{clearInterval(tt),window.removeEventListener("paste",We),window.removeEventListener("keydown",et),window.removeEventListener("resize",Ye);const e=document.getElementById("upload");e&&e.removeEventListener("change",Ze)}),(e,a)=>{const i=(0,n.g2)("font-awesome-icon"),s=(0,n.g2)("v-image"),c=(0,n.g2)("v-layer"),g=(0,n.g2)("v-stage");return(0,n.uX)(),(0,n.CE)("div",ja,[t.value?((0,n.uX)(),(0,n.CE)("div",Wa,[(0,n.bF)((0,l.R1)(F.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[f.value?((0,n.uX)(),(0,n.CE)("div",Xa,[(0,n.Lk)("div",Pa,[(0,n.Lk)("button",{onClick:a[0]||(a[0]=e=>f.value=!1),style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer"}}," ✕ "),(0,n.Lk)("p",null,(0,T.v_)(w.value),1),"Are you sure you would like to clear the board? This action is irreversible."!==w.value?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:a[1]||(a[1]=e=>f.value=!1),id:"close_form",style:{"margin-top":"20px",background:"#4f8cff",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer"}}," Close ")):(0,n.Q3)("",!0),"Are you sure you would like to clear the board? This action is irreversible."===w.value?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:a[2]||(a[2]=e=>Je(!0)),id:"confirm_clear",style:{"margin-top":"20px",background:"green",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer"}}," Confirm ")):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)]),_:1}),(0,n.Lk)("div",{id:"toolbar",class:(0,T.C4)({"vertical-toolbar":u.value<800}),style:{position:"absolute",top:"12px",left:"3%",background:"rgba(30, 30, 30, 0.85)","border-radius":"16px","box-shadow":"0 4px 24px rgba(0,0,0,0.18)",padding:"20px 32px",display:"flex","align-items":"center",gap:"10px","z-index":"10"}},[(0,n.bF)(i,{icon:["fas","undo"],class:"feature-icon",onClick:a[3]||(a[3]=e=>Ee())}),(0,n.bF)(i,{icon:["fas","redo"],class:"feature-icon",onClick:a[4]||(a[4]=e=>Fe())}),(0,n.Lk)("button",{onClick:a[5]||(a[5]=e=>W.value=!W.value),style:(0,T.Tr)([{"border-radius":"50%",padding:"1rem","border-color":"#f68608","border-width":"5px"},{backgroundColor:W.value?"#ffffff":"#000000"}])},null,4),a[30]||(a[30]=(0,n.Lk)("text",{style:{color:"white"}},"Brush Color",-1)),(0,n.bo)((0,n.Lk)("input",{type:"color","onUpdate:modelValue":a[6]||(a[6]=e=>h.value=e)},null,512),[[o.Jo,h.value]]),(0,n.bF)(i,{icon:["fas","hand"],onClick:a[7]||(a[7]=e=>te("$event")),class:"feature-icon",style:(0,T.Tr)({color:A.value?"#0d6efd":"orange"})},null,8,["style"]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>k.value=e),style:{background:"#23272f",color:"#fff",border:"none","border-radius":"8px",padding:"8px 16px","font-size":"1rem",outline:"none",cursor:"pointer"}},[...a[28]||(a[28]=[(0,n.Lk)("option",{value:"brush"},"Brush",-1),(0,n.Lk)("option",{value:"eraser"},"Eraser",-1)])],512),[[o.u1,k.value]]),(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":a[9]||(a[9]=e=>L.value=e),min:"1",max:"10",style:{"accent-color":"#4f8cff",width:"60px"}},null,512),[[o.Jo,L.value]]),(0,n.Lk)("span",Ja,(0,T.v_)(L.value),1),(0,n.Lk)("label",{"aria-label":"upload",title:"upload image",onClick:a[10]||(a[10]=(...t)=>e.uploadImage&&e.uploadImage(...t)),style:{cursor:"pointer"}},[...a[29]||(a[29]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"16",fill:"#ffc107",class:"bi bi-upload",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"}),(0,n.Lk)("path",{d:"M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"})],-1),(0,n.Lk)("input",{type:"file",id:"upload",style:{display:"none"}},null,-1)])]),(0,n.Lk)("div",{style:{display:"flex","align-items":"center",cursor:"pointer"}},[(0,n.Lk)("img",{width:"24",height:"24",loading:"async",decoding:"lazy",onClick:ae,src:"https://img.icons8.com/external-tal-revivo-filled-tal-revivo/24/external-assorted-shape-tool-selector-for-designing-application-text-filled-tal-revivo.png",alt:"external-assorted-shape-tool-selector-for-designing-application-text-filled-tal-revivo"})]),(p.value||X.value)&&"default"===(0,l.R1)(r)?((0,n.uX)(),(0,n.CE)("button",{key:0,id:"save_btn",onClick:a[11]||(a[11]=e=>Xe("save")),style:{background:"#4f8cff",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer",transition:"ease-in-out 0.6s"}},"Save")):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:a[12]||(a[12]=e=>Pe()),id:"exit",style:{background:"#ff4f4f",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer",transition:"ease-in-out 0.6s"}},"Exit"),p.value||"demo"===(0,l.R1)(r)?((0,n.uX)(),(0,n.CE)("button",{key:1,id:"clearall",style:{background:"#f68608",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer",transition:"ease-in-out 0.6s"},onClick:a[13]||(a[13]=e=>Ke())}," Clear all ")):(0,n.Q3)("",!0)],2),(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[$.value?((0,n.uX)(),(0,n.CE)("div",Ka,[(0,n.Lk)("div",Aa,[(0,n.Lk)("button",{onClick:a[14]||(a[14]=e=>$.value=!1),style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"white","font-size":"20px",cursor:"pointer"}}," ✕ "),a[31]||(a[31]=(0,n.Lk)("p",null,"Select a Shape",-1)),(0,n.Lk)("div",$a,[(0,n.Lk)("div",Ia,[(0,n.bF)(i,{icon:["fas","text-height"],class:"feature-icon",alt:"text","ara-label":"text",onClick:a[15]||(a[15]=e=>M("text"))})]),(0,n.Lk)("div",Ua,[(0,n.bF)(i,{icon:["fas","arrow-up-long"],class:"feature-icon",alt:"arrow","ara-label":"arrow",onClick:a[16]||(a[16]=e=>M("arrow"))})]),(0,n.Lk)("div",Va,[(0,n.bF)(i,{icon:["fas","circle"],class:"feature-icon",alt:"circle","ara-label":"circle",onClick:a[17]||(a[17]=e=>M("circle"))})]),(0,n.Lk)("div",Ba,[(0,n.bF)(i,{icon:["fas","square"],class:"feature-icon",alt:"square","ara-label":"square",onClick:a[18]||(a[18]=e=>M("square"))})])])])])):(0,n.Q3)("",!0)]),_:1}),(0,n.Lk)("div",qa,[X.value&&"demo"!==(0,l.R1)(r)?((0,n.uX)(),(0,n.CE)("button",{key:0,id:"bookmark-btn",onClick:oe,class:"mb-2",style:(0,T.Tr)([{background:"#4f8cff",color:"#fff",border:"none","border-radius":"10px",padding:"10px 18px","font-size":"0.95rem","font-weight":"500",cursor:"pointer",transition:"ease-in-out 0.6s",height:"40px"},{width:ie.value?"200px":"unset"}])},[(0,n.Lk)("img",{src:(0,l.R1)(_a),decoding:"async",loading:"lazy",alt:"Bookmark",style:{width:"18px",height:"18px"}},null,8,Ma),ie.value?((0,n.uX)(),(0,n.CE)("span",Ya,(0,T.v_)(K.value?"Bookmarked":"Bookmark"),1)):(0,n.Q3)("",!0)],4)):(0,n.Q3)("",!0),(0,n.Lk)("button",{id:"inv",onClick:xe,style:(0,T.Tr)([{display:"flex","align-items":"center",gap:"8px",background:"#4f8cff",color:"#fff",border:"none","border-radius":"10px",padding:"10px 18px","font-size":"0.95rem","font-weight":"500",cursor:"pointer",transition:"ease-in-out 0.6s",height:"40px"},{width:ie.value?"200px":"unset"}])},[(0,n.Lk)("img",{src:(0,l.R1)(Ea),alt:"Copy",style:{width:"18px",height:"18px"}},null,8,Qa),ie.value?((0,n.uX)(),(0,n.CE)("span",Ga,"Copy invitation link")):(0,n.Q3)("",!0)],4)]),(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[v.value?((0,n.uX)(),(0,n.CE)("div",Ha,[(0,n.Lk)("button",{onClick:a[19]||(a[19]=e=>v.value=!1),style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer",transition:"color 0.2s"}}," ✕ "),(0,n.Lk)("div",Za,[a[32]||(a[32]=(0,n.Lk)("label",{class:"align-self-start"},"Title",-1)),(0,n.Lk)("div",eo,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[20]||(a[20]=e=>m.value=e),type:"text",placeholder:"Enter title",style:{padding:"10px 14px","border-radius":"12px",border:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.05)",color:"#fff","font-size":"1rem",outline:"none",transition:"border 0.2s",width:"100%","box-sizing":"border-box"}},null,512),[[o.Jo,m.value]]),(0,n.Lk)("span",to,(0,T.v_)(m.value&&m.value.length||0),1)])]),(0,n.Lk)("div",ao,[a[33]||(a[33]=(0,n.Lk)("label",{class:"align-self-start"},"Description",-1)),(0,n.Lk)("div",oo,[(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":a[21]||(a[21]=e=>y.value=e),rows:"3",placeholder:"Enter description",style:{padding:"10px 14px","border-radius":"12px",border:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.05)",color:"#fff","font-size":"1rem",resize:"none",outline:"none",transition:"border 0.2s",width:"100%","box-sizing":"border-box"}},null,512),[[o.Jo,y.value]]),(0,n.Lk)("span",no,(0,T.v_)(y.value&&y.value.length||0),1)])]),(0,n.Lk)("div",io,[a[35]||(a[35]=(0,n.Lk)("label",{style:{"flex-shrink":"0"}},"Private",-1)),(0,n.Lk)("label",lo,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[22]||(a[22]=e=>b.value=e),type:"checkbox","true-value":"Private","false-value":"Public"},null,512),[[o.lH,b.value]]),a[34]||(a[34]=(0,n.Lk)("span",{class:"slider"},null,-1))])]),(0,n.Lk)("button",{id:"save_def",onClick:a[23]||(a[23]=e=>Se()),style:{background:"#4f8cff",color:"#fff",border:"none","border-radius":"12px",padding:"12px","font-size":"1rem","font-weight":"500",cursor:"pointer",transition:"0.5s ease-out"},class:"save"}," Save Details ")])):(0,n.Q3)("",!0)]),_:1}),(0,n.Lk)("div",ro,[(0,n.Lk)("label",{style:{"font-size":"small",cursor:"pointer",width:"1.5rem"},onClick:a[24]||(a[24]=e=>ye("up"))},"+"),(0,n.Lk)("img",{src:(0,l.R1)(Fa),decoding:"async",loading:"lazy",alt:"zoom",class:"img-fluid",style:{width:"1rem",height:"1rem"}},null,8,so),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[25]||(a[25]=e=>C.value=e),style:{width:"60px","text-align":"center","border-style":"none","font-size":"0.7rem"},disabled:""},null,512),[[o.Jo,C.value]]),(0,n.Lk)("label",{style:{"font-size":"small",cursor:"pointer",width:"1.5rem"},onClick:a[26]||(a[26]=e=>ye("down"))},"-")]),(0,n.Lk)("div",{class:"board-wrapper",style:(0,T.Tr)({backgroundColor:W.value?"#ffffff":"#000000"})},[(0,n.bF)(g,{ref_key:"stageRef",ref:d,config:le,onMousedown:Be,onMousemove:Me,onMouseup:qe,onWheel:be,onTouchstart:Be,onTouchmove:Me,onTouchend:qe,onContextmenu:ue,onClick:a[27]||(a[27]=e=>Z(e)),style:{"overflow-x":"hidden","overflow-y":"hidden",border:"none !important"}},{default:(0,n.k6)(()=>[(0,n.bF)(c,{ref_key:"layerRef",ref:D},{default:(0,n.k6)(()=>[(0,n.bF)(s,{ref_key:"imageRef",ref:z,config:Ie},null,512)]),_:1},512)]),_:1},512)],4)])}}};const po=(0,w.A)(uo,[["__scopeId","data-v-2fb7c2fe"]]);var vo=po;const fo={class:"d-flex flex-column min-vh-100"},ho={class:"flex-grow-1 d-flex flex-column justify-content-center align-items-center mt-2 mb-3"},go={key:0,class:"alert alert-danger text-center custom-alert p-2",role:"alert",style:{"max-width":"70vw",width:"440px",position:"fixed",top:"4rem",left:"50%",transform:"translateX(-50%)","z-index":"10000","font-size":"0.95rem","border-radius":"0.7rem","box-shadow":"0 2px 8px rgba(220,53,69,0.10)",background:"#222",border:"1.5px solid #dc3545"}},mo={class:"alert-content",style:{"padding-top":"0.2rem"}},wo={style:{color:"#ffc107","font-size":"1rem"}},yo={key:0,class:"alert alert-success text-center custom-alert p-2",role:"alert",style:{"max-width":"70vw",width:"440px",position:"fixed",top:"4rem",left:"50%",transform:"translateX(-50%)","z-index":"10000","font-size":"0.95rem","border-radius":"0.7rem","box-shadow":"0 2px 8px rgba(40,167,69,0.10)",background:"#222",border:"1.5px solid #28a745"}},bo={key:0,class:"spinner-overlay d-flex justify-content-center align-items-center"},ko={class:"container align-items-center w-25 mt-4 bg-white rounded p-4"},xo={class:"input-group"},Lo={class:"input-group"},So={key:0},Co={key:1};var To={__name:"RestorePassword",setup(e){const t=(0,l.KR)(""),a=(0,l.KR)(!1),i=(0,l.KR)(!1),r=(0,l.KR)(!1),s=(0,l.KR)(""),c=(0,l.KR)("");function d(e){const t="new_password"===e?document.querySelector("#new"):document.querySelector("#confirm");"password"===t.type?t.type="text":t.type="password"}async function u(){try{i.value=!0;const e=new URL(window.location.href).pathname.split("/")[2],t=await fetch(`${R}/recover/${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":E("csrftoken")},credentials:"include",body:JSON.stringify({new_password:s.value})}),a=await t.json();return 200===a.status}catch(e){i.value=!1,t.value="An error occurred. Please try again.",a.value=!0}i.value=!1}const p=()=>{u().then(e=>{i.value=!1,e?(r.value=!0,setTimeout(()=>{window.location.href=`${window.location.origin}/signin`},1e4)):(t.value="Failed to update password. The recovery link may be invalid or expired.",a.value=!0)})};return(0,n.sV)(()=>{i.value=!0;const e=(0,l.KR)(new URL(window.location.href).pathname.split("/")[2]);async function o(){try{const t=await fetch(`${R}/recover/${e.value}`,{method:"GET",headers:{"X-CSRFToken":E("csrftoken")},credentials:"include"}),a=await t.json();return 200===a.status}catch(t){window.location.href="/signin"}}o().then(e=>{i.value=!1,e||(t.value="Recovery link is either invalid or expired.",a.value=!0)})}),(e,u)=>{const v=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)("div",fo,[(0,n.Lk)("div",ho,[u[11]||(u[11]=(0,n.Lk)("h1",{class:"my-4",style:{color:"yellow"}},"Password Restoration",-1)),(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[a.value?((0,n.uX)(),(0,n.CE)("div",go,[(0,n.Lk)("button",{onClick:u[0]||(u[0]=e=>a.value=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"#dc3545",color:"#fff",border:"none",width:"1.5rem",height:"1.5rem","font-size":"1.1rem","margin-top":"-0.3rem","margin-right":"-0.3rem","line-height":"1.1rem"}},"×"),(0,n.Lk)("div",mo,[(0,n.Lk)("strong",wo,(0,T.v_)(t.value),1),u[7]||(u[7]=(0,n.Lk)("div",{style:{color:"#fff","margin-top":"0.2rem","font-size":"0.92rem"}},"Please try again.",-1))])])):(0,n.Q3)("",!0)]),_:1}),(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[r.value?((0,n.uX)(),(0,n.CE)("div",yo,[(0,n.Lk)("button",{onClick:u[1]||(u[1]=e=>r.value=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"#28a745",color:"#fff",border:"none",width:"1.5rem",height:"1.5rem","font-size":"1.1rem","margin-top":"-0.3rem","margin-right":"-0.3rem","line-height":"1.1rem"}},"×"),u[8]||(u[8]=(0,n.Lk)("div",{class:"alert-content",style:{"padding-top":"0.2rem"}},[(0,n.Lk)("strong",{style:{color:"#28a745","font-size":"1rem"}},"Password successfully updated!"),(0,n.Lk)("div",{style:{color:"#fff","margin-top":"0.2rem","font-size":"0.92rem"}},"You can now sign in with your new password. You will be redirected in 10 seconds to the sign in page.")],-1))])):(0,n.Q3)("",!0)]),_:1}),i.value?((0,n.uX)(),(0,n.CE)("div",bo,[(0,n.bF)((0,l.R1)(F.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.bF)(o.eB,{name:"fade-slide"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",ko,[u[10]||(u[10]=(0,n.Lk)("h2",{class:"text-center mb-5 text-black"},"Enter New Password",-1)),(0,n.Lk)("div",xo,[(0,n.bo)((0,n.Lk)("input",{type:"password",id:"new","onUpdate:modelValue":u[2]||(u[2]=e=>s.value=e),class:"form-control bg-dark text-black bg-white border-secondary mb-3",placeholder:"Enter new password",required:""},null,512),[[o.Jo,s.value]]),(0,n.bF)(v,{icon:["fas","eye"],class:"input-icon mt-2 mx-2",style:{cursor:"pointer"},onClick:u[3]||(u[3]=e=>d("new_password"))})]),(0,n.Lk)("div",Lo,[(0,n.bo)((0,n.Lk)("input",{type:"password",id:"confirm","onUpdate:modelValue":u[4]||(u[4]=e=>c.value=e),class:"form-control bg-dark text-black bg-white border-secondary mb-3",placeholder:"Confirm new password",required:""},null,512),[[o.Jo,c.value]]),(0,n.bF)(v,{icon:["fas","eye"],class:"input-icon mt-2 mx-2",style:{cursor:"pointer"},onClick:u[5]||(u[5]=e=>d("confirm_password"))})]),s.value===c.value&&s.value.length>0?((0,n.uX)(),(0,n.CE)("div",So,[(0,n.Lk)("button",{onClick:u[6]||(u[6]=e=>p()),class:"btn btn-primary w-100 mt-2"},"Restore Password")])):((0,n.uX)(),(0,n.CE)("div",Co,[...u[9]||(u[9]=[(0,n.Lk)("button",{disabled:"",class:"btn btn-secondary w-100 mt-2"},"Restore Password",-1),(0,n.Lk)("label",{class:"text-danger mt-2 d-block text-center"},"Passwords do not match.",-1)])]))])]),_:1})]),(0,n.bF)(I)])}}};const Ro=To;var Oo=Ro;const No={class:"learn-more-container",id:"learn-more"},Eo={class:"content-wrapper"},Fo=["src"];function _o(e,t,a,o,i,l){const r=(0,n.g2)("FoOter");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",No,[(0,n.Lk)("div",Eo,[(0,n.Lk)("img",{src:i.logo,alt:"CoDraw Logo",class:"learn-more-logo"},null,8,Fo),t[0]||(t[0]=(0,n.Fv)('<h1 class="learn-more-title" data-v-3d77b7a4>About CoDraw</h1><section class="learn-more-section" data-v-3d77b7a4><p class="learn-more-text" data-v-3d77b7a4> CoDraw is an innovative platform designed to facilitate collaborative drawing and creativity. Whether you&#39;re an artist looking to share your work or someone who enjoys doodling with friends, CoDraw provides the perfect space to connect and create together. </p><p class="learn-more-text" data-v-3d77b7a4> Our mission is to bring people together through art, fostering a community where creativity knows no bounds. With a variety of tools and features, CoDraw makes it easy for users of all skill levels to participate in collaborative projects. </p><p class="learn-more-text" data-v-3d77b7a4> Join us today and start creating amazing artwork with others! If you are interested in contributing to the development of CoDraw, check out our <a href="https://github.com/Damian0563/CoDraw" class="github-link" data-v-3d77b7a4>GitHub</a></p></section>',2))])]),(0,n.bF)(r)],64)}var zo={name:"LearnMore",components:{FoOter:I},data(){return{logo:r}}};const Do=(0,w.A)(zo,[["render",_o],["__scopeId","data-v-3d77b7a4"]]);var jo=Do;const Wo={class:"not-found-background"},Xo={class:"not-found-content"};function Po(e,t,a,o,i,l){const r=(0,n.g2)("font-awesome-icon"),s=(0,n.g2)("router-link"),c=(0,n.g2)("FoOter");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",Wo,[(0,n.Lk)("div",Xo,[(0,n.bF)(r,{icon:["fas","exclamation-triangle"],class:"not-found-icon"}),t[1]||(t[1]=(0,n.Lk)("h1",{class:"not-found-title"},"404 - Page Not Found",-1)),t[2]||(t[2]=(0,n.Lk)("p",{class:"not-found-text"}," Oops! The page you're looking for doesn't exist. It might have been moved, deleted, or you entered the wrong URL. ",-1)),(0,n.bF)(s,{to:"/",class:"not-found-btn","aria-label":"Go back to home"},{default:(0,n.k6)(()=>[...t[0]||(t[0]=[(0,n.eW)(" Go Home ",-1)])]),_:1})])]),(0,n.bF)(c)],64)}var Jo={name:"NotFound",components:{FoOter:I}};const Ko=(0,w.A)(Jo,[["render",Po],["__scopeId","data-v-174e3a39"]]);var Ao=Ko;const $o={key:0,class:"spinner-overlay"},Io={class:"main-layout"},Uo={class:"flex-grow-1 d-flex justify-content-center align-items-start p-3 p-md-5"},Vo={class:"my-5 border rounded justify-content-center",style:{"background-color":"#ffc107",width:"90%",height:"110vh"}},Bo={class:"row justify-content-center mx-2"},qo={class:"col-md-6 col-sm-10 col-12"},Mo={class:"input-group shadow-sm rounded mx-2"},Yo={id:"results",class:"my-4 mx-3"},Qo={class:"container"},Go={class:"row g-1 justify-content-start gap-2"},Ho=["onClick"],Zo={class:"card-body d-flex flex-column",style:{height:"100%"}},en={class:"card-title fw-bold mb-2"},tn={class:"card-text small"},an={class:"card-footer"},on={class:"d-flex justify-content-between small"},nn={class:"text-start small"},ln=["href"],rn={key:0,class:"justify-content-center",style:{"min-height":"12rem"}};var sn={__name:"SeArch",setup(e){const t=(0,l.KR)(!1),a=(0,l.KR)([]),i=(0,l.KR)(""),r=E("csrftoken");async function s(e){try{t.value=!0;const o=await fetch(`${R}/search`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":r},credentials:"include",body:JSON.stringify({query:e,timezone:rt.c9.local().zoneName})}),n=await o.json();console.log(n),200===n.status&&n.boards&&(a.value=JSON.parse(n.boards)),t.value=!1}catch(o){console.error(o)}}async function c(){try{const e=await fetch(`${R}/get_popular`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":r},body:JSON.stringify({timezone:rt.c9.local().zoneName}),credentials:"include"}),t=await e.json();a.value=t.boards}catch(e){console.error(e)}}async function d(e){try{const t=await fetch(`${R}/load`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":r},credentials:"include",body:JSON.stringify({room:e})}),a=await t.json();200===a.status&&(window.location.href=`${a.url}?origin=search`)}catch(t){console.error(t)}}return(0,n.sV)(async()=>{t.value=!0,await c(),t.value=!1}),(e,r)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[t.value?((0,n.uX)(),(0,n.CE)("div",$o,[(0,n.bF)((0,l.R1)(F.y1),{size:"60",color:"orange"})])):(0,n.Q3)("",!0),(0,n.Lk)("div",Io,[(0,n.bF)(lt),(0,n.Lk)("div",Uo,[(0,n.Lk)("div",Vo,[r[9]||(r[9]=(0,n.Lk)("div",{class:"text-center mb-4"},[(0,n.Lk)("h2",{class:"fw-bold mt-4"},"Browse Public Projects"),(0,n.Lk)("p",{class:"text-muted"},"Find boards and ideas shared by the community")],-1)),(0,n.Lk)("div",Bo,[(0,n.Lk)("div",qo,[(0,n.Lk)("div",Mo,[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control border-0 p-3 minput",placeholder:"Search public boards...","aria-label":"Search public boards","onUpdate:modelValue":r[0]||(r[0]=e=>i.value=e),onKeyup:r[1]||(r[1]=(0,o.jR)(e=>s(i.value),["enter"]))},null,544),[[o.Jo,i.value]]),(0,n.Lk)("button",{class:"btn btn-primary",type:"button",onClick:r[2]||(r[2]=e=>s(i.value))},[...r[4]||(r[4]=[(0,n.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,n.Lk)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1\n\t\t\t\t\t\t\t\t\t\t1 0 0 0 1.415-1.415l-3.85-3.85zm-5.242\n\t\t\t\t\t\t\t\t\t\t1.656a5.5 5.5 0 1 1 0-11 5.5\n\t\t\t\t\t\t\t\t\t\t5.5 0 0 1 0 11z"})],-1)])])])])]),(0,n.Lk)("section",Yo,[(0,n.Lk)("div",Qo,[(0,n.Lk)("div",Go,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:(0,T.C4)([a.value.length<3?"col-12 col-md-6 col-xl-4":"col-12 col-lg-4 col-xl-3","card result-card project-card text-center"]),style:{height:"20rem",width:"18rem",cursor:"pointer",position:"relative"},onClick:t=>d(e.room)},[(0,n.Lk)("div",Zo,[(0,n.Lk)("h5",en,(0,T.v_)(e.title),1),(0,n.Lk)("p",tn,(0,T.v_)(e.description),1),(0,n.Lk)("footer",an,[r[7]||(r[7]=(0,n.Lk)("div",{class:"text-start small"},[(0,n.Lk)("span",null,[(0,n.eW)("Visibility: "),(0,n.Lk)("span",null,"Public")])],-1)),(0,n.Lk)("div",on,[(0,n.Lk)("span",null,[r[5]||(r[5]=(0,n.eW)("Views: ",-1)),(0,n.Lk)("span",null,(0,T.v_)(e.views),1)]),(0,n.Lk)("span",null,(0,T.v_)(e.modified),1)]),(0,n.Lk)("div",nn,[(0,n.Lk)("span",null,[r[6]||(r[6]=(0,n.eW)("Owner: ",-1)),(0,n.Lk)("a",{href:`/codraw/account/${e.owner}`,onClick:r[3]||(r[3]=(0,o.D$)(()=>{},["stop"])),style:{color:"#ff4f4f !important"}},(0,T.v_)(e.owner),9,ln)])])])])],10,Ho))),128)),0===a.value.length?((0,n.uX)(),(0,n.CE)("div",rn,[...r[8]||(r[8]=[(0,n.Lk)("text",null,"No results found :(",-1)])])):(0,n.Q3)("",!0)])])])])])])],64))}};const cn=(0,w.A)(sn,[["__scopeId","data-v-df9b94b4"]]);var dn=cn,un=a(7107),pn=a(1273),vn=a(6305),fn=a(6188),hn=a(7875);un.Yv.add(fn.fyG,fn.GEE,fn.S_v,fn.CFw,fn.Nfw,fn.v02,fn.zm_,fn.rC2,fn.U23,fn.yek,fn.MjD,fn.zpE,fn.X46,fn.pS3,fn.zLW,fn.UUN,fn._eQ,fn.IlC,hn.Vz1,fn.bFI);const gn=[{path:"/",component:Ze,meta:{showNav:!0}},{path:"/signup",component:Le,meta:{showNav:!0}},{path:"/signin",component:re,meta:{showNav:!0}},{path:"/codraw",component:Ot,meta:{showNav:!1}},{path:"/codraw/search",component:dn,meta:{showNav:!1}},{path:"/codraw/account/:username",component:Na,meta:{showNav:!1}},{path:"/board/:id/:room",component:vo,meta:{showNav:!1}},{path:"/demo/:room",component:vo,meta:{showNav:!1}},{path:"/learn-more",component:jo,meta:{showNav:!0}},{path:"/recover/:code",component:Oo,meta:{showNav:!0}},{path:"/:pathMatch(.*)*",component:Ao,meta:{showNav:!0}}],mn=(0,C.aE)({history:(0,C.LA)(),routes:gn});mn.afterEach(()=>{window.scrollTo({top:0,behavior:"instant"})}),(0,o.Ef)(L).use(mn).use((0,vn.A)({tagId:"G-QW19P198KB",config:{params:{debug_mode:!0,app_name:"CoDraw"}},pageTracker:{router:mn,useScreenview:!0}})).use(S.Ay).component("font-awesome-icon",pn.gc).mount("#app")}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,o,n,i){if(!o){var l=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],i=e[d][2];for(var r=!0,s=0;s<o.length;s++)(!1&i||l>=i)&&Object.keys(a.O).every(function(e){return a.O[e](o[s])})?o.splice(s--,1):(r=!1,i<l&&(l=i));if(r){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,i,l=o[0],r=o[1],s=o[2],c=0;if(l.some(function(t){return 0!==e[t]})){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(s)var d=s(a)}for(t&&t(o);c<l.length;c++)i=l[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],function(){return a(205)});o=a.O(o)})();
//# sourceMappingURL=app.e65a382a.js.map