(function(){"use strict";var e={2689:function(e,t,o){var a=o(5130),n=o(6768);function l(e,t,o,a,l,r){const s=(0,n.g2)("NavBar"),i=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)(n.FK,null,["/codraw"!==e.$route.path.substring(0,7)&&"/board"!==e.$route.path.substring(0,6)?((0,n.uX)(),(0,n.Wv)(s,{key:0})):(0,n.Q3)("",!0),(0,n.bF)(i)],64)}var r=o(144),s=o.p+"img/logo.10045025.webp";const i={class:"navbar navbar-expand-lg navbar-dark bg-dark shadow p-3"},c={class:"offcanvas offcanvas-end mx-2",style:{"background-color":"black"},tabindex:"-1",id:"offcanvas","aria-labelledby":"offcanvasLabel"},d={class:"offcanvas-body"},u=["src"],p={class:"navbar-nav ms-auto mb-2 mb-lg-0 d-flex flex-row align-items-center"},f={class:"nav-item mx-2"},v={class:"nav-item mx-2"},h={class:"nav-item mx-2"},g={name:"NavBar",props:{msg:String}};var b=Object.assign(g,{setup(e){return(e,t)=>{const o=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)("nav",i,[t[4]||(t[4]=(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvas","aria-controls":"offcanvas","aria-label":"Toggle navigation"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,n.Lk)("div",c,[(0,n.Lk)("div",d,[(0,n.bF)(o,{class:"navbar-brand d-flex align-items-center",to:"/"},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:(0,r.R1)(s),alt:"logo",height:"90",class:"me-3"},null,8,u),t[0]||(t[0]=(0,n.Lk)("span",null,"CoDraw",-1))])),_:1,__:[0]}),(0,n.Lk)("ul",p,[(0,n.Lk)("li",f,[(0,n.bF)(o,{class:"nav-link",to:"/#about",href:"#"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("About")]))),_:1,__:[1]})]),(0,n.Lk)("li",v,[(0,n.bF)(o,{class:"btn me-2",to:"/signup",id:"sign",style:{"border-color":"yellow",color:"yellow"}},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("Sign up")]))),_:1,__:[2]})]),(0,n.Lk)("li",h,[(0,n.bF)(o,{class:"btn btn-outline-light",id:"sing",to:"/signin"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("Sign in")]))),_:1,__:[3]})])])])])])}}}),m=o(1241);const k=(0,m.A)(b,[["__scopeId","data-v-e440355c"]]);var w=k,y={name:"App",components:{NavBar:w}};const x=(0,m.A)(y,[["render",l]]);var L=x,R=o(4251),C=o(1387),_=o(4232);function S(e){let t=null;if(document.cookie&&""!==document.cookie){const o=document.cookie.split(";");for(let a=0;a<o.length;a++){const n=o[a].trim();if(n.substring(0,e.length+1)===e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}}return t}const T={style:{"background-color":"black"}},j=["src"],K={key:0,class:"alert alert-danger text-center custom-alert p-2",role:"alert",style:{"max-width":"70vw",width:"440px",position:"fixed",top:"4rem",left:"50%",transform:"translateX(-50%)","z-index":"10000","font-size":"0.95rem","border-radius":"0.7rem","box-shadow":"0 2px 8px rgba(220,53,69,0.10)",background:"#222",border:"1.5px solid #dc3545"}},O={class:"alert-content",style:{"padding-top":"0.2rem"}},E={style:{color:"#ffc107","font-size":"1rem"}},F={class:"d-flex justify-content-center pt-5",style:{"background-color":"black","min-height":"40vh"}},J={class:"card p-3 shadow-lg",style:{"max-width":"400px",width:"100%",background:"white",border:"none","min-height":"unset"}},P={class:"mb-2"},I={class:"mb-2"},N={class:"form-check d-flex align-items-center mb-3 w-100 flex-wrap",style:{padding:"0 !important",gap:"2rem"}},X={class:"text-center mt-2"};var z={__name:"SignIn",setup(e){let t=(0,r.KR)(""),o=(0,r.KR)(!1),l=(0,r.KR)(!1);const i=(0,r.KR)(""),c=(0,r.KR)(""),d=(0,r.KR)(null);async function u(e){e.preventDefault();const a=d.value;if(a.classList.add("was-validated"),a.checkValidity())try{const e=S("csrftoken"),a=await fetch("http://localhost:8000/signin",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},credentials:"include",body:JSON.stringify({mail:i.value,password:c.value,remember:l.value})}),n=await a.json();200===n.status?window.location.href="/codraw":(o.value=!0,t.value="Invalid credentials. Please try again.")}catch(e){console.error(e),o.value=!0,t.value="An error occurred while signing in."}else e.stopPropagation()}async function p(){try{const e=S("csrftoken"),t=await fetch("http://localhost:8000/signin",{method:"GET",headers:{"X-CSRFToken":e},credentials:"include"}),o=await t.json();console.log(o),300===o.status&&(window.location.href="/codraw")}catch(e){console.error(e)}}return p(),(e,p)=>{const f=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",T,[(0,n.Lk)("img",{src:(0,r.R1)(s),class:"img-fluid border rounded-circle",style:{width:"10vw",height:"auto","margin-top":"2%","border-color":"yellow"}},null,8,j)]),(0,r.R1)(o)?((0,n.uX)(),(0,n.CE)("div",K,[(0,n.Lk)("button",{onClick:p[0]||(p[0]=e=>(0,r.i9)(o)?o.value=!1:o=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"#dc3545",color:"#fff",border:"none",width:"1.5rem",height:"1.5rem","font-size":"1.1rem","margin-top":"-0.3rem","margin-right":"-0.3rem","line-height":"1.1rem"}},"×"),(0,n.Lk)("div",O,[(0,n.Lk)("strong",E,(0,_.v_)((0,r.R1)(t)),1),p[4]||(p[4]=(0,n.Lk)("div",{style:{color:"#fff","margin-top":"0.2rem","font-size":"0.92rem"}},"Please try again.",-1))])])):(0,n.Q3)("",!0),(0,n.Lk)("div",F,[(0,n.Lk)("div",J,[p[13]||(p[13]=(0,n.Lk)("h2",{class:"text-center mb-3 text-black"},"Sign In",-1)),(0,n.Lk)("form",{ref_key:"formRef",ref:d,onSubmit:u,class:"needs-validation",novalidate:""},[(0,n.Lk)("div",P,[p[5]||(p[5]=(0,n.Lk)("label",{for:"email",class:"form-label text-black text-start w-100"},"Email address",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email","onUpdate:modelValue":p[1]||(p[1]=e=>i.value=e),class:"form-control bg-dark text-white border-secondary",id:"email",placeholder:"Enter email",required:""},null,512),[[a.Jo,i.value]]),p[6]||(p[6]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify email. ",-1))]),(0,n.Lk)("div",I,[p[7]||(p[7]=(0,n.Lk)("label",{for:"password",class:"form-label text-black text-start w-100"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password","onUpdate:modelValue":p[2]||(p[2]=e=>c.value=e),class:"form-control bg-dark text-white border-secondary",id:"password",placeholder:"Enter password",required:""},null,512),[[a.Jo,c.value]]),p[8]||(p[8]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify password. ",-1))]),(0,n.Lk)("div",N,[p[9]||(p[9]=(0,n.Lk)("label",{class:"form-check-label text-black fw-medium mb-0",for:"rememberMe"}," Remember me ",-1)),(0,n.Lk)("input",{type:"checkbox",ref_key:"ticked",ref:l,onClick:p[3]||(p[3]=e=>(0,r.i9)(l)?l.value=!(0,r.R1)(l):l=!(0,r.R1)(l)),id:"rememberMe",style:{"accent-color":"#ffc107",margin:"0 !important",width:"1.25rem",height:"1.25rem"}},null,512)]),p[10]||(p[10]=(0,n.Lk)("button",{id:"sign",type:"submit",class:"btn btn-success w-100 mt-2",style:{"background-color":"yellow",color:"black"}},"Sign In",-1))],544),(0,n.Lk)("div",X,[p[12]||(p[12]=(0,n.Lk)("span",{class:"text-secondary"},"Do not have an account?",-1)),(0,n.bF)(f,{to:"/signup",class:"ms-2 text-info"},{default:(0,n.k6)((()=>p[11]||(p[11]=[(0,n.eW)("Sign up")]))),_:1,__:[11]})])])])],64)}}};const U=(0,m.A)(z,[["__scopeId","data-v-6672f29f"]]);var V=U;const D={style:{"background-color":"black"}},A=["src"],W={key:0,class:"alert alert-danger text-center custom-alert p-2",role:"alert",style:{"max-width":"70vw",width:"440px",position:"fixed",top:"4rem",left:"50%",transform:"translateX(-50%)","z-index":"10000","font-size":"0.95rem","border-radius":"0.7rem","box-shadow":"0 2px 8px rgba(220,53,69,0.10)",background:"#222",border:"1.5px solid #dc3545"}},B={class:"alert-content",style:{"padding-top":"0.2rem"}},M={style:{color:"#ffc107","font-size":"1rem"}},$={key:1,class:"overlay"},Q={class:"popup-card"},q={class:"d-flex justify-content-center mb-3"},G={class:"d-flex justify-content-center pt-5",style:{"background-color":"black","min-height":"40vh"}},H={class:"card p-3 shadow-lg",style:{"max-width":"400px",width:"100%",background:"white",border:"none","min-height":"unset"}},Y={class:"mb-2"},Z={class:"mb-2"},ee={class:"mb-2"},te={class:"text-center mt-2"};var oe={__name:"SignUp",setup(e){let t=(0,r.KR)(!1),o=(0,r.KR)(null),l=(0,r.KR)(!1),i=(0,r.KR)("");const c=(0,r.KR)(""),d=(0,r.KR)(""),u=(0,r.KR)(""),p=(0,r.KR)(null),f=(0,r.KR)(null),v=(0,r.KR)(null),h=(0,r.KR)(null),g=(0,r.KR)(null);async function b(){try{const e=S("csrftoken"),t=await fetch("http://localhost:8000/signup",{method:"GET",headers:{"X-CSRFToken":e},credentials:"include"}),o=await t.json();console.log(o),300===o.status&&"/codraw"!==window.location.pathname&&(window.location.href="/codraw")}catch(e){console.error(e)}}async function m(e){e.preventDefault();const a=o.value;if(a.classList.add("was-validated"),!a.checkValidity())return void e.stopPropagation();const n=S("csrftoken"),r=c.value,s=d.value,f=u.value;try{const e=await fetch("http://localhost:8000/signup",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":n},body:JSON.stringify({username:r,mail:f,password:s}),credentials:"include"}),o=await e.json();200===o.status?(t.value=!0,p.value.focus()):(l.value=!0,i.value="Account already registered under this email. Did you forget your password?")}catch(e){console.error(e)}}function k(e){2===e&&f.value&&f.value.focus(),3===e&&v.value&&v.value.focus(),4===e&&h.value&&h.value.focus(),5===e&&g.value&&g.value.focus()}b();const w=(0,r.KR)(""),y=(0,r.KR)(""),x=(0,r.KR)(""),L=(0,r.KR)(""),R=(0,r.KR)("");function C(){return`${w.value}${y.value}${x.value}${L.value}${R.value}`}async function T(){const e=S("csrftoken"),o=c.value,a=u.value,n=await fetch("http://localhost:8000/verify",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},body:JSON.stringify({username:o,mail:a,code:C()})}),r=await n.json();200===r.status?window.location.href="/codraw":(t.value=!1,l.value=!0,w.value="",y.value="",x.value="",L.value="",R.value="",i.value="Invalid verification code. Please try again- new verification code has been sent.")}return(e,b)=>{const C=(0,n.g2)("RouterLink");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",D,[(0,n.Lk)("img",{src:(0,r.R1)(s),class:"img-fluid border rounded-circle border-danger-subtle",style:{width:"10vw",height:"auto","margin-top":"2%"}},null,8,A)]),(0,r.R1)(l)?((0,n.uX)(),(0,n.CE)("div",W,[(0,n.Lk)("button",{onClick:b[0]||(b[0]=e=>(0,r.i9)(l)?l.value=!1:l=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"#dc3545",color:"#fff",border:"none",width:"1.5rem",height:"1.5rem","font-size":"1.1rem","margin-top":"-0.3rem","margin-right":"-0.3rem","line-height":"1.1rem"}},"×"),(0,n.Lk)("div",B,[(0,n.Lk)("strong",M,(0,_.v_)((0,r.R1)(i)),1),b[14]||(b[14]=(0,n.Lk)("div",{style:{color:"#fff","margin-top":"0.2rem","font-size":"0.92rem"}},"Please try again.",-1))])])):(0,n.Q3)("",!0),(0,r.R1)(t)?((0,n.uX)(),(0,n.CE)("div",$,[(0,n.Lk)("div",Q,[(0,n.Lk)("button",{onClick:b[1]||(b[1]=e=>(0,r.i9)(t)?t.value=!1:t=!1),class:"close-btn rounded-circle float-end","aria-label":"Close",style:{"background-color":"red",color:"white"}},"×"),b[15]||(b[15]=(0,n.Lk)("br",null,null,-1)),b[16]||(b[16]=(0,n.Lk)("br",null,null,-1)),b[17]||(b[17]=(0,n.Lk)("h4",{class:"mb-3"},"Enter Verification Code",-1)),(0,n.Lk)("div",q,[(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"1",onInput:b[2]||(b[2]=e=>k(2)),ref_key:"ZeroInput",ref:p,"onUpdate:modelValue":b[3]||(b[3]=e=>w.value=e),class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,544),[[a.Jo,w.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"2",onInput:b[4]||(b[4]=e=>k(3)),"onUpdate:modelValue":b[5]||(b[5]=e=>y.value=e),class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric",ref_key:"OneInput",ref:f},null,544),[[a.Jo,y.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"3",onInput:b[6]||(b[6]=e=>k(4)),"onUpdate:modelValue":b[7]||(b[7]=e=>x.value=e),ref_key:"TwoInput",ref:v,class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,544),[[a.Jo,x.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"4",onInput:b[8]||(b[8]=e=>k(5)),"onUpdate:modelValue":b[9]||(b[9]=e=>L.value=e),ref_key:"ThreeInput",ref:h,class:"code-input",type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,544),[[a.Jo,L.value]]),(0,n.bo)((0,n.Lk)("input",{maxlength:"1",id:"5",class:"code-input","onUpdate:modelValue":b[10]||(b[10]=e=>R.value=e),ref_key:"FourInput",ref:g,type:"text",pattern:"[0-9]*",inputmode:"numeric"},null,512),[[a.Jo,R.value]])]),(0,n.Lk)("button",{class:"btn btn-primary w-100",onClick:T},"Verify")])])):(0,n.Q3)("",!0),(0,n.Lk)("div",G,[(0,n.Lk)("div",H,[b[27]||(b[27]=(0,n.Lk)("h2",{class:"text-center mb-3 text-black"},"Sign Up",-1)),(0,n.Lk)("form",{ref_key:"formRef",ref:o,onSubmit:m,class:"needs-validation",novalidate:""},[(0,n.Lk)("div",Y,[b[18]||(b[18]=(0,n.Lk)("label",{for:"username",class:"form-label text-black text-start w-100"},"Username",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":b[11]||(b[11]=e=>c.value=e),type:"text",class:"form-control bg-dark text-white border-secondary",id:"username",placeholder:"Enter username",style:{color:"white"},required:""},null,512),[[a.Jo,c.value]]),b[19]||(b[19]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify username. ",-1))]),(0,n.Lk)("div",Z,[b[20]||(b[20]=(0,n.Lk)("label",{for:"email",class:"form-label text-black text-start w-100"},"Email address",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":b[12]||(b[12]=e=>u.value=e),type:"email",class:"form-control bg-dark text-white border-secondary",id:"email",placeholder:"Enter email",required:""},null,512),[[a.Jo,u.value]]),b[21]||(b[21]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify email. ",-1))]),(0,n.Lk)("div",ee,[b[22]||(b[22]=(0,n.Lk)("label",{for:"password",class:"form-label text-black text-start w-100"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":b[13]||(b[13]=e=>d.value=e),type:"password",class:"form-control bg-dark text-white border-secondary",id:"password",placeholder:"Enter password",required:""},null,512),[[a.Jo,d.value]]),b[23]||(b[23]=(0,n.Lk)("div",{class:"invalid-feedback"}," Please specify password. ",-1))]),b[24]||(b[24]=(0,n.Lk)("button",{id:"sign",class:"btn btn-success w-100 mt-2",type:"submit",style:{"background-color":"yellow",color:"black"}},"Sign Up",-1))],544),(0,n.Lk)("div",te,[b[26]||(b[26]=(0,n.Lk)("span",{class:"text-secondary"},"Already have an account?",-1)),(0,n.bF)(C,{to:"/signin",class:"ms-2 text-info"},{default:(0,n.k6)((()=>b[25]||(b[25]=[(0,n.eW)("Sign In")]))),_:1,__:[25]})])])])],64)}}};const ae=(0,m.A)(oe,[["__scopeId","data-v-d9e6c2ae"]]);var ne=ae;function le(e,t,o,a,l,r){return t[0]||(t[0]=(0,n.Fv)('<div class="hero-background p-5 col-lg-4" style="background-color: black;height:60vh" data-v-20bf626e><h1 class="hero-title" style="color:white;" data-v-20bf626e> CoDraw<br data-v-20bf626e></h1><p style="color:white;" data-v-20bf626e> CoDraw is a real-time collaborative drawing platform that lets you and your friends create, share, and edit artwork together from anywhere. Experience seamless teamwork, intuitive tools, and instant updates as you bring your creative ideas to life together! </p></div><div style="background-color:black;overflow-x:hidden;margin-top:2%;" data-v-20bf626e><div class="container" data-v-20bf626e><div class="row justify-content-center" data-v-20bf626e><div class="col-md-3 mb-3" data-v-20bf626e><div class="card h-100 bg-dark text-white shadow-lg" id="card" style="border-color:yellow;" data-v-20bf626e><div class="card-body text-center" data-v-20bf626e><h5 class="card-title" data-v-20bf626e>Modern and Slick</h5><p class="card-text" data-v-20bf626e>A visually appealing interface designed for a seamless and enjoyable drawing experience.</p></div></div></div><div class="col-md-3 mb-3" data-v-20bf626e><div class="card h-100 bg-dark text-white shadow-lg" id="card" style="border-color:yellow;" data-v-20bf626e><div class="card-body text-center" data-v-20bf626e><h5 class="card-title" data-v-20bf626e>Performance Oriented</h5><p class="card-text" data-v-20bf626e>Optimized for speed and responsiveness, ensuring smooth collaboration in real time.</p></div></div></div><div class="col-md-3 mb-3" data-v-20bf626e><div class="card h-100 bg-dark text-white shadow-lg" id="card" style="border-color:yellow;" data-v-20bf626e><div class="card-body text-center" data-v-20bf626e><h5 class="card-title" data-v-20bf626e>Intuitive Design</h5><p class="card-text" data-v-20bf626e>Easy-to-use tools and layout, making creativity accessible for everyone.</p></div></div></div></div></div></div>',2))}var re={name:"HeRo",props:{msg:String},mounted(){this.check()},methods:{async check(){try{const e=S("csrftoken"),t=await fetch("http://localhost:8000/home",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":e},credentials:"include"}),o=await t.json();300===o.status&&"/codraw"!==window.location.pathname&&(window.location.href="/codraw")}catch(e){console.error(e)}}}};const se=(0,m.A)(re,[["render",le],["__scopeId","data-v-20bf626e"]]);var ie=se,ce=o.p+"img/sidebar.9317e3f0.webp";const de={class:"main-layout"},ue={class:"sidebar-header d-flex flex-column align-items-center mb-4"},pe=["src"],fe=["src"],ve={class:"main-content flex-grow-1"},he={class:"mb-4"},ge={id:"projects",class:"container"},be={class:"row g-4 w-100 mx-0"},me={class:"col-12 col-lg-4 col-xl-3"},ke=["onClick"],we={class:"card-body d-flex flex-column text-white",id:"created",style:{height:"100%"}},ye={class:"card-title",style:{"font-weight":"800"}},xe={class:"card-text",style:{"font-size":"0.8rem"}},Le={name:"MaIn"};var Re=Object.assign(Le,{setup(e){const t=S("csrftoken"),o=(0,r.KR)(!0),a=(0,r.KR)([{}]);async function l(){try{const e=await fetch("http://localhost:8000/log_out",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},credentials:"include"}),o=await e.json();200===o.status&&(window.location.href="/")}catch(e){console.error(e)}}async function i(){try{const e=await fetch("http://localhost:8000/codraw",{method:"GET",headers:{"X-CSRFToken":t},credentials:"include"}),o=await e.json();200!==o.status&&"/"!==window.location.pathname&&(window.location.href="/")}catch(e){console.error(e)}}const c=async()=>{try{const e=await fetch("http://localhost:8000/codraw/get_boards",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":t},credentials:"include"}),o=await e.json();a.value=o.boards}catch(e){console.error(e)}};async function d(e){try{const o=await fetch("http://localhost:8000/load",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},credentials:"include",body:JSON.stringify({room:e})}),a=await o.json();console.log(a.status),200===a.status&&(window.location.href=`${a.url}`)}catch(o){console.error(o)}}async function u(){try{const e=await fetch("http://localhost:8000/get_project_url",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":t},credentials:"include"}),o=await e.json();200===o.status?window.location.href=`${o.url}`:console.log("error")}catch(e){console.error(e)}}return(0,n.sV)((()=>{i(),c()})),(e,t)=>{const i=(0,n.g2)("RouterLink"),c=(0,n.g2)("RouterView");return(0,n.uX)(),(0,n.CE)("div",de,[(0,n.Lk)("aside",{class:(0,_.C4)(["sidebar d-flex flex-column flex-shrink-0 p-3 text-bg-dark",{"sidebar-collapsed":!o.value}])},[(0,n.Lk)("div",ue,[(0,n.Lk)("img",{class:(0,_.C4)(["toggle mb-3 align-self-end",{"align-self-center":!o.value}]),onClick:t[0]||(t[0]=e=>o.value=!o.value),src:(0,r.R1)(ce),style:{cursor:"pointer",width:"2rem",height:"2rem"}},null,10,pe),(0,n.Lk)("img",{src:(0,r.R1)(s),alt:"logo",class:"logo mb-3 img-fluid rounded rounded-circle",style:{"max-height":"20vh"}},null,8,fe),(0,n.bF)(i,{to:"/codraw/account",class:"nav-link account-link mb-2 w-100 text-center"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)(" My Account ")]))),_:1,__:[3]}),(0,n.bF)(i,{to:"/codraw/settings",class:"nav-link settings-link mb-2 w-100 text-center"},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)(" Settings ")]))),_:1,__:[4]}),(0,n.Lk)("button",{class:"btn btn-danger w-100",onClick:t[1]||(t[1]=e=>l()),id:"out"},"Log out")])],2),(0,n.Lk)("main",ve,[(0,n.bF)(c),t[7]||(t[7]=(0,n.Lk)("h1",null,"Welcome to CoDraw!",-1)),(0,n.Lk)("div",he,[t[6]||(t[6]=(0,n.Lk)("h2",{class:"mb-4 text-start"},"My Projects",-1)),(0,n.Lk)("div",ge,[(0,n.Lk)("div",be,[(0,n.Lk)("div",me,[(0,n.Lk)("div",{class:"card create-project-card text-center bg-dark",onClick:t[2]||(t[2]=e=>u()),style:{"min-height":"14rem","min-width":"14rem",cursor:"pointer"}},t[5]||(t[5]=[(0,n.Lk)("div",{class:"card-body d-flex flex-column align-items-center justify-content-center",style:{height:"100%"}},[(0,n.Lk)("span",{style:{"font-size":"3rem",color:"#ffc107"}},"+"),(0,n.Lk)("h5",{class:"card-title mt-2 mb-0",style:{color:"#ffc107"}},"Create Project")],-1)]))]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.value,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"col-12 col-lg-4 col-xl-3"},[(0,n.Lk)("div",{class:"card create-project-card text-center bg-dark",onClick:t=>d(e.room),style:{"min-height":"14rem","min-width":"14rem",cursor:"pointer"}},[(0,n.Lk)("div",we,[(0,n.Lk)("h5",ye,(0,_.v_)(e.title),1),(0,n.Lk)("p",xe,(0,_.v_)(e.description),1)])],8,ke)])))),128))])])]),t[8]||(t[8]=(0,n.Lk)("div",null,[(0,n.Lk)("h2",null,"Browse public projects"),(0,n.Lk)("div",{id:"searchbar"}),(0,n.Lk)("section",{id:"results"})],-1))])])}}});const Ce=(0,m.A)(Re,[["__scopeId","data-v-f463319c"]]);var _e=Ce;const Se={name:"SeTtings"};var Te=Object.assign(Se,{setup(e){const t=S("csrftoken");return console.log(t),(e,t)=>" settings "}});const je=Te;var Ke=je;const Oe={name:"AccOunt"};var Ee=Object.assign(Oe,{setup(e){const t=S("csrftoken");return console.log(t),(e,t)=>" account "}});const Fe=Ee;var Je=Fe,Pe=(o(8111),o(7588),o.p+"img/email.54f0aca4.webp"),Ie=o(5739),Ne=o.n(Ie);const Xe={style:{position:"relative",width:"100vw",height:"100vh",overflow:"hidden"}},ze={key:0,style:{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)","z-index":"100",display:"flex","align-items":"center","justify-content":"center"}},Ue={style:{background:"#23272f",color:"#fff",padding:"32px 40px","border-radius":"16px","min-width":"320px","box-shadow":"0 8px 32px rgba(0,0,0,0.25)",position:"relative"}},Ve={id:"toolbar",style:{position:"absolute",top:"32px",left:"5%",background:"rgba(30, 30, 30, 0.85)","border-radius":"16px","box-shadow":"0 4px 24px rgba(0,0,0,0.18)",padding:"20px 32px",display:"flex","align-items":"center",gap:"20px","z-index":"10"}},De={style:{color:"#fff","min-width":"32px","text-align":"center"}},Ae={id:"inv_div",style:{position:"absolute",top:"32px",right:"1rem","z-index":"10"}},We=["src"],Be={key:0},Me={key:0,style:{position:"absolute",top:"150px",left:"35%","backdrop-filter":"blur(16px)",background:"rgba(30, 30, 30, 0.75)",border:"1px solid rgba(255, 255, 255, 0.1)","border-radius":"20px","box-shadow":"0 8px 32px rgba(0, 0, 0, 0.25)",padding:"32px",display:"flex","flex-direction":"column",gap:"20px","z-index":"20","min-width":"30vw","max-width":"90vw","font-family":"'Segoe UI', Roboto, sans-serif",transition:"ease-in-out 0.6s",color:"#fff"}},$e={style:{display:"flex","flex-direction":"column",gap:"6px"}},Qe={style:{display:"flex","flex-direction":"column",gap:"6px"}},qe={style:{display:"flex","align-items":"center",gap:"10px"}},Ge={class:"switch"};var He={__name:"BoArd",setup(e){const t=S("csrftoken"),o=(0,r.KR)(null),l=(0,r.KR)(null),s=(0,r.KR)(window.innerWidth),i=(0,r.KR)(!1),c=(0,r.KR)(!1),d=(0,r.KR)(!1),u=(0,r.KR)("#ffffff"),p=(0,r.KR)("#000000"),f=(0,r.KR)(null),v=(0,r.KR)(null),h=(0,r.KR)(null),g=(0,r.KR)("Public"),b=(0,r.KR)("brush"),m=(0,r.KR)(!1),k=(0,r.KR)(5),w=(0,r.KR)([]),y=(0,r.KR)(null),x=(0,r.KR)(null),L=(0,r.KR)(null),R=(0,r.KR)(!1),C=(0,n.EW)((()=>s.value>1330)),T={width:4*document.documentElement.clientWidth,height:4*document.documentElement.clientHeight,draggable:!1},j=(0,r.KR)(null),K=(0,r.KR)(new URL(window.location.href).pathname.split("/")[3]);j.value=new WebSocket(`ws://localhost:8000/ws/socket/${K.value}/`),j.value.onmessage=e=>{const t=JSON.parse(e.data);if(!t||!t.type)return;const a=L.value.getNode();if("start"===t.type){const e=new(Ne().Line)({stroke:t.stroke,strokeWidth:t.width,globalCompositeOperation:t.operation,points:t.points,lineCap:"round",lineJoin:"round"});e._remote=!0,a.add(e),o.value=e}else if("draw"===t.type&&o.value?._remote){const e=o.value.points().concat(t.points);o.value.points(e),a.batchDraw()}};const O=e=>{e.evt.preventDefault()},E=document.createElement("canvas");E.width=T.width,E.height=T.height;const F=E.getContext("2d");F.strokeStyle=u.value,F.fillStyle=p.value,F.lineJoin="round",F.lineWidth=k.value,F.lineCap="round",F.lineJoin="round",(0,n.wB)(u,(e=>{F.strokeStyle=e}));const J=async()=>{try{const e=new URL(window.location.href).pathname.split("/"),o=e[2],a=await fetch("http://localhost:8000/codraw/check_owner",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},credentials:"include",body:JSON.stringify({owner:o})}),n=await a.json();200===n.status&&(i.value=!0)}catch(e){console.error(e)}},P=async()=>{try{const e=window.location.href;await navigator.clipboard.writeText(e),d.value=!0,v.value="Invitation link copied to clipboard!"}catch(e){console.error("Failed to copy: ",e),d.value=!0,v.value="Failed to copy the link."}},I=()=>{const e=localStorage.getItem("storage");if(e&&(w.value=JSON.parse(e),w.value.length>0)){const e=new window.Image;e.src=w.value[w.value.length-1].image,e.onload=()=>{F.clearRect(0,0,E.width,E.height),F.drawImage(e,0,0),L.value.getNode().batchDraw()}}},N=async()=>{try{const e=new URL(window.location.href).pathname.split("/"),o=e[2],a=e[3];f.value.length>66&&(d.value=!0,v.value="The title length is to large, must be at most 60 characters."),h.value.length>170&&(d.value=!0,v.value="The description length is to large, must be at most 100 characters.");const n=await fetch("http://localhost:8000/codraw/save_new",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},body:JSON.stringify({project:a,owner:o,payload:JSON.stringify(l.value.getStage().toJSON()),title:f.value,description:h.value,type:g.value})}),r=await n.json();c.value=!1,200===r.status?(d.value=!0,v.value="Board saved successfully.",D()):(d.value=!0,v.value="There was an error saving your board.")}catch(e){console.error(e)}},X=async e=>{try{const o=new URL(window.location.href).pathname.split("/"),a=o[3];if("save"===e){const e=await fetch("http://localhost:8000/codraw/save_project",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},body:JSON.stringify({project:a,payload:JSON.stringify(l.value.getStage().toJSON())})}),o=await e.json();200===o.status?(D(),d.value=!0,v.value="Board was successfully quick saved."):c.value=!0}else if("load"===e){const e=await fetch("http://localhost:8000/codraw/save_project",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},body:JSON.stringify({project:a})}),o=await e.json();return 200===o.status}}catch(o){console.error(o)}};function z(){localStorage.removeItem("storage"),i.value?window.location.href="http://localhost:8081/codraw":window.location.href="http://localhost:8081"}function U(){localStorage.removeItem("storage"),F.clearRect(0,0,E.width,E.height),L.value.getNode().clear(),L.value.getNode().batchDraw()}const V=e=>{const t=e.getAbsoluteTransform().copy();t.invert();const o=e.getPointerPosition();return t.point(o)},D=()=>{const e=l.value?.getNode?.();if(!e)return;const t=e.toDataURL();w.value=[{id:Date.now(),image:t}],localStorage.setItem("storage",JSON.stringify(w.value))},A={image:E,x:0,y:0,width:E.width,height:E.height},W=e=>{const t=e.target.getStage();if(2===e.evt.button)return R.value=!0,t.draggable(!0),t.startDrag(),void(y.value=t.getPointerPosition());m.value=!0;const a=V(t),n=new(Ne().Line)({stroke:u.value,strokeWidth:k.value,globalCompositeOperation:"eraser"===b.value?"destination-out":"source-over",points:[a.x,a.y],lineCap:"round",lineJoin:"round"});j.value.send(JSON.stringify({type:"start",stroke:u.value,width:k.value,operation:"eraser"===b.value?"destination-out":"source-over",points:[a.x,a.y]})),L.value.getNode().add(n),o.value=n},B=e=>{if(m.value=!1,o.value=null,R.value){const t=e.target.getStage();t.draggable(!1),R.value=!1}},M=e=>{if(!m.value||!o.value)return;const t=e.target.getStage(),a=V(t),n=o.value.points().concat([a.x,a.y]);o.value.points(n),L.value.getNode().batchDraw(),j.value.send(JSON.stringify({type:"draw",points:[a.x,a.y]}))},$=async()=>{try{const e=new URL(window.location.href).pathname.split("/"),o=e[3],a=await fetch("http://localhost:8000/codraw/get_details",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},credentials:"include",body:JSON.stringify({project:o})}),n=await a.json(),l=n.canva;if(l){const e=JSON.parse(l),t=L.value.getNode();t.destroyChildren(),e.children[0].children.forEach((e=>{const o=Ne().Node.create(e);t.add(o)})),t.draw()}}catch(e){console.error(e)}};return(0,n.sV)((async()=>{await(0,n.dY)(),I(),await X("load")&&setTimeout((()=>$()),100),await J();const e=l.value.getNode(),t=1.05;e.on("wheel",(o=>{o.evt.preventDefault();const a=e.scaleX(),n=e.getPointerPosition(),l={x:(n.x-e.x())/a,y:(n.y-e.y())/a},r=o.evt.deltaY>0?1:-1;if(1===a&&-1===r)return;const s=r>0?a*t:a/t;e.scale({x:s,y:s});const i={x:n.x-l.x*s,y:n.y-l.y*s};e.position(i),e.batchDraw()}));let o=null;window.addEventListener("resize",(()=>{clearTimeout(o),o=setTimeout((()=>{const e=l.value?.getNode(),t=x.value?.getNode();if(!e||!t)return;const o=window.innerWidth,a=window.innerHeight;E.width=4*o,E.height=4*a,e.width(E.width),e.height(E.height),t.width(E.width),t.height(E.height);const n=t.getLayer();n&&n.batchDraw()}),100)}));const a=()=>{s.value=window.innerWidth};window.addEventListener("resize",a)})),setInterval((()=>D()),6e4),(0,n.xo)((()=>{j.value&&j.value.close()})),(e,t)=>{const o=(0,n.g2)("v-image"),s=(0,n.g2)("v-layer"),i=(0,n.g2)("v-stage");return(0,n.uX)(),(0,n.CE)("div",Xe,[(0,n.bF)(a.eB,{name:"fade-slide"},{default:(0,n.k6)((()=>[d.value?((0,n.uX)(),(0,n.CE)("div",ze,[(0,n.Lk)("div",Ue,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=e=>d.value=!1),style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer"}}," ✕ "),(0,n.Lk)("p",null,(0,_.v_)(v.value),1),(0,n.Lk)("button",{onClick:t[1]||(t[1]=e=>d.value=!1),id:"close_form",style:{"margin-top":"20px",background:"#4f8cff",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer"}}," Close ")])])):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",Ve,[t[15]||(t[15]=(0,n.Lk)("text",{style:{color:"white"}},"Brush Color",-1)),(0,n.bo)((0,n.Lk)("input",{type:"color","onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e)},null,512),[[a.Jo,u.value]]),t[16]||(t[16]=(0,n.Lk)("text",{style:{color:"white"}},"Background Color",-1)),(0,n.bo)((0,n.Lk)("input",{type:"color","onUpdate:modelValue":t[3]||(t[3]=e=>p.value=e)},null,512),[[a.Jo,p.value]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>b.value=e),style:{background:"#23272f",color:"#fff",border:"none","border-radius":"8px",padding:"8px 16px","font-size":"1rem",outline:"none",cursor:"pointer"}},t[14]||(t[14]=[(0,n.Lk)("option",{value:"brush"},"Brush",-1),(0,n.Lk)("option",{value:"eraser"},"Eraser",-1)]),512),[[a.u1,b.value]]),t[17]||(t[17]=(0,n.Lk)("label",{style:{color:"#fff","font-size":"1rem","margin-right":"8px"}}," Line Width ",-1)),(0,n.bo)((0,n.Lk)("input",{type:"range","onUpdate:modelValue":t[5]||(t[5]=e=>k.value=e),min:"1",max:"20",style:{"accent-color":"#4f8cff",width:"60px","margin-right":"8px"}},null,512),[[a.Jo,k.value]]),(0,n.Lk)("span",De,(0,_.v_)(k.value),1),(0,n.Lk)("button",{id:"save_btn",onClick:t[6]||(t[6]=e=>X("save")),style:{background:"#4f8cff",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer",transition:"ease-in-out 0.6s"}},"Save"),(0,n.Lk)("button",{onClick:t[7]||(t[7]=e=>z()),id:"exit",style:{background:"#ff4f4f",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer",transition:"ease-in-out 0.6s"}},"Exit"),(0,n.Lk)("button",{id:"clearall",style:{background:"#f68608",color:"#fff",border:"none","border-radius":"8px",padding:"8px 20px","font-size":"1rem",cursor:"pointer",transition:"ease-in-out 0.6s"},onClick:t[8]||(t[8]=e=>U())}," Clear all ")]),(0,n.Lk)("div",Ae,[(0,n.Lk)("button",{id:"inv",onClick:P,style:{display:"flex","align-items":"center",gap:"8px",background:"#4f8cff",color:"#fff",border:"none","border-radius":"10px",padding:"10px 18px","font-size":"0.95rem","font-weight":"500",cursor:"pointer",transition:"ease-in-out 0.6s"}},[(0,n.Lk)("img",{src:(0,r.R1)(Pe),alt:"Copy",style:{width:"18px",height:"18px"}},null,8,We),C.value?((0,n.uX)(),(0,n.CE)("span",Be,"Copy invitation link")):(0,n.Q3)("",!0)])]),(0,n.bF)(a.eB,{name:"fade-slide"},{default:(0,n.k6)((()=>[c.value?((0,n.uX)(),(0,n.CE)("div",Me,[(0,n.Lk)("button",{onClick:t[9]||(t[9]=e=>c.value=!1),style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"#ccc","font-size":"20px",cursor:"pointer",transition:"color 0.2s"}}," ✕ "),(0,n.Lk)("div",$e,[t[18]||(t[18]=(0,n.Lk)("label",{class:"align-self-start"},"Title",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>f.value=e),type:"text",placeholder:"Enter title",style:{padding:"10px 14px","border-radius":"12px",border:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.05)",color:"#fff","font-size":"1rem",outline:"none",transition:"border 0.2s"}},null,512),[[a.Jo,f.value]])]),(0,n.Lk)("div",Qe,[t[19]||(t[19]=(0,n.Lk)("label",{class:"align-self-start"},"Description",-1)),(0,n.bo)((0,n.Lk)("textarea",{"onUpdate:modelValue":t[11]||(t[11]=e=>h.value=e),rows:"3",placeholder:"Enter description",style:{padding:"10px 14px","border-radius":"12px",border:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.05)",color:"#fff","font-size":"1rem",resize:"none",outline:"none",transition:"border 0.2s"}},null,512),[[a.Jo,h.value]])]),(0,n.Lk)("div",qe,[t[21]||(t[21]=(0,n.Lk)("label",{style:{"flex-shrink":"0"}},"Private",-1)),(0,n.Lk)("label",Ge,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>g.value=e),type:"checkbox","true-value":"private","false-value":"public"},null,512),[[a.lH,g.value]]),t[20]||(t[20]=(0,n.Lk)("span",{class:"slider"},null,-1))])]),(0,n.Lk)("button",{id:"save_def",onClick:t[13]||(t[13]=e=>N()),style:{background:"#4f8cff",color:"#fff",border:"none","border-radius":"12px",padding:"12px","font-size":"1rem","font-weight":"500",cursor:"pointer",transition:"0.5s ease-out"},class:"save"}," Save Details ")])):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(i,{ref_key:"stageRef",ref:l,config:T,onMousedown:W,onMousemove:M,onMouseup:B,onTouchstart:W,onTouchmove:M,onTouchend:B,onContextmenu:O,style:{"overflow-x":"hidden","overflow-y":"hidden",border:"none !important"}},{default:(0,n.k6)((()=>[(0,n.bF)(s,{ref_key:"layerRef",ref:L},{default:(0,n.k6)((()=>[(0,n.bF)(o,{ref_key:"imageRef",ref:x,config:A},null,512)])),_:1},512)])),_:1},512)])}}};const Ye=(0,m.A)(He,[["__scopeId","data-v-4a588bf6"]]);var Ze=Ye;const et=[{path:"/",component:ie},{path:"/signup",component:ne},{path:"/signin",component:V},{path:"/codraw",component:_e},{path:"/codraw/settings",component:Ke},{path:"/codraw/account",component:Je},{path:"/board/:id/:room",component:Ze}],tt=(0,C.aE)({history:(0,C.LA)(),routes:et});(0,a.Ef)(L).use(tt).use(R.A).mount("#app")}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,a,n,l){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],n=e[d][1],l=e[d][2];for(var s=!0,i=0;i<a.length;i++)(!1&l||r>=l)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(s=!1,l<r&&(r=l));if(s){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,n,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,l,r=a[0],s=a[1],i=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(i)var d=i(o)}for(t&&t(a);c<r.length;c++)l=r[c],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(d)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(2689)}));a=o.O(a)})();
//# sourceMappingURL=app.cd97a57d.js.map